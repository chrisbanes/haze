{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Overview","text":"<p>Haze is a library providing a 'glassmorphism' style blur for Compose.</p> <p></p> <p>Haze is built with Compose Multiplatform, meaning that it supports different platforms:</p> Platform Supported Android \u2705 Desktop (JVM) \u2705 iOS \u2705 Wasm \u2705 JS/Canvas \u2705 <p>You can also see it in action in the Tivi app:</p> <p></p>"},{"location":"#download","title":"Download","text":"<pre><code>repositories {\n    mavenCentral()\n}\n\ndependencies {\n    implementation(\"dev.chrisbanes.haze:haze:&lt;version&gt;\")\n}\n</code></pre>"},{"location":"#acknowledgements","title":"Acknowledgements","text":"<p>In previous versions, the Skia-backed implementation (used on iOS and Desktop) was heavily influenced by Kirill Grouchnikov's explorations on Compose Desktop. He wrote about it in his Shader based render effects in Compose Desktop with Skia blog post.</p> <p>The Android implementation was inspired by the techniques documented by Chet Haase and Nader Jawad in the RenderNode for Bigger, Better Blurs blog post.</p> <p>Thank you all.</p>"},{"location":"#license","title":"License","text":"<pre><code>Copyright 2024 Chris Banes\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n    https://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n</code></pre>"},{"location":"changelog/","title":"Changelog","text":""},{"location":"changelog/#changelog","title":"Changelog","text":"<p>All notable changes to this project are documented here.</p> <p>The format is based on Keep a Changelog, and this project adheres to Semantic Versioning.</p>"},{"location":"changelog/#1.7.1","title":"1.7.1 2025-11-24","text":""},{"location":"changelog/#changed","title":"Changed","text":"<ul> <li>Use LruCache rather than SieveCache in #827</li> </ul> <p>Full Changelog: https://github.com/chrisbanes/haze/compare/1.7.0...1.7.1</p>"},{"location":"changelog/#1.7.0","title":"1.7.0 2025-11-10","text":""},{"location":"changelog/#highlights","title":"Highlights","text":"<ul> <li>\ud83c\udd95 <code>forceInvalidateOnPreDraw</code> parameter on <code>HazeEffectScope</code> (doc)</li> <li>Optimized noise texture handling on Android</li> <li>Only enable pre-draw listeners when we need to use them</li> <li>This should be the last of the v1.x releases (barring any blocking issues which crop up).</li> </ul>"},{"location":"changelog/#key-dependencies","title":"Key dependencies","text":"<ul> <li>Kotlin 2.2.20</li> <li>Compose Multiplatform 1.9.3</li> <li>Jetpack Compose 1.9.4</li> </ul>"},{"location":"changelog/#changed_1","title":"Changed","text":"<ul> <li>Dependency updates in #752</li> <li>Add workaround for Kotlin Yarn errors in #764</li> <li>Bump compile and min SDK versions in #773</li> <li>Optimize areas and area offsets in #779</li> <li>Compose 1.9.x and Kotlin 2.2.20 in #791</li> <li>Reduce screenshot test thresholds in #806</li> <li>Only enable pre-draw listeners when necessary in #809</li> <li>Add a common pre-draw listener in #811</li> <li>Invalidate on position change in #812</li> <li>Update Android version references in platforms.md by @XIVIX134 in #814</li> </ul>"},{"location":"changelog/#added","title":"Added","text":"<ul> <li>Add LeakCanary to sample in #769</li> <li>[Android] Optimize noise texture in #778</li> <li>Enable Kotlin explicit API in #790</li> <li>Introduce expandLayerBounds flag in #807</li> <li>Add forceInvalidateOnPreDraw flag in #810</li> </ul>"},{"location":"changelog/#new-contributors","title":"New Contributors","text":"<ul> <li>@XIVIX134 made their first contribution in #814</li> </ul> <p>Full Changelog: https://github.com/chrisbanes/haze/compare/1.6.10...1.7.0</p>"},{"location":"changelog/#1.6.10","title":"1.6.10 2025-08-13","text":""},{"location":"changelog/#added_1","title":"Added","text":"<ul> <li>Add clipToAreasBounds flag in #744</li> </ul> <p>Full Changelog: https://github.com/chrisbanes/haze/compare/1.6.9...1.6.10</p>"},{"location":"changelog/#1.6.9","title":"1.6.9 2025-07-18","text":""},{"location":"changelog/#fixed","title":"Fixed","text":"<ul> <li>Fix transparent edges... again in #728</li> </ul> <p>Full Changelog: https://github.com/chrisbanes/haze/compare/1.6.8...1.6.9</p>"},{"location":"changelog/#1.6.8","title":"1.6.8 2025-07-14","text":""},{"location":"changelog/#changed_2","title":"Changed","text":"<ul> <li>Reduce unnecessary draw invalidations in #725</li> </ul>"},{"location":"changelog/#fixed_1","title":"Fixed","text":"<ul> <li>Check if node is attached from updateEffect in #724</li> </ul> <p>Full Changelog: https://github.com/chrisbanes/haze/compare/1.6.7...1.6.8</p>"},{"location":"changelog/#1.6.7","title":"1.6.7 2025-07-06","text":""},{"location":"changelog/#fixed_2","title":"Fixed","text":"<ul> <li>Workaround Compose draw exception on Android 9 in #707</li> <li>Fix bounded edge treatment not working in #710</li> <li>Fix Haze'd dialogs not blurring background content in #714</li> </ul> <p>Full Changelog: https://github.com/chrisbanes/haze/compare/1.6.6...1.6.7</p>"},{"location":"changelog/#1.6.6","title":"1.6.6 2025-06-28","text":""},{"location":"changelog/#changed_3","title":"Changed","text":"<ul> <li>Remove dependency on kotlinx-datetime in #704</li> </ul> <p>Full Changelog: https://github.com/chrisbanes/haze/compare/1.6.5...1.6.6</p>"},{"location":"changelog/#1.6.5","title":"1.6.5 2025-06-27","text":""},{"location":"changelog/#changed_4","title":"Changed","text":"<ul> <li>Add Dokka docs module in #687</li> <li>Hide internal functions in #691</li> </ul>"},{"location":"changelog/#fixed_3","title":"Fixed","text":"<ul> <li>[RenderScript] Don't crash when blurRadius == 0 in #686</li> <li>Fix docs publish action in #690</li> </ul> <p>Full Changelog: https://github.com/chrisbanes/haze/compare/1.6.4...1.6.5</p>"},{"location":"changelog/#1.6.4","title":"1.6.4 2025-06-06","text":""},{"location":"changelog/#changed_5","title":"Changed","text":"<ul> <li>Refactor screenshot testing setup in #673</li> <li>Enable Dokka v2 in #676</li> </ul>"},{"location":"changelog/#fixed_4","title":"Fixed","text":"<ul> <li>Fix overlapping content with layer transformations in #674</li> </ul> <p>Full Changelog: https://github.com/chrisbanes/haze/compare/1.6.3...1.6.4</p>"},{"location":"changelog/#1.6.3","title":"1.6.3 2025-06-01","text":""},{"location":"changelog/#highlights_1","title":"Highlights","text":"<p>\ud83c\udd95 MacOS CMP targets - Thanks to @YuKongA for adding 'native' MacOS targets. These are completely experimental (and untested), as per MacOS targets for CMP.</p>"},{"location":"changelog/#added_2","title":"Added","text":"<ul> <li>Add macos targets by @YuKongA in #660</li> </ul>"},{"location":"changelog/#fixed_5","title":"Fixed","text":"<ul> <li>Skip drawing if not attached in #666</li> <li>Skip layout calls if not attached in #668</li> </ul>"},{"location":"changelog/#new-contributors_1","title":"New Contributors","text":"<ul> <li>@YuKongA made their first contribution in #660</li> </ul> <p>Full Changelog: https://github.com/chrisbanes/haze/compare/1.6.2...1.6.3</p>"},{"location":"changelog/#1.6.2","title":"1.6.2 2025-05-20","text":""},{"location":"changelog/#fixed_6","title":"Fixed","text":"<ul> <li>Stop clipping the drawn layer size in #654</li> <li>Call drawContent safely in #655</li> </ul> <p>Full Changelog: https://github.com/chrisbanes/haze/compare/1.6.1...1.6.2</p>"},{"location":"changelog/#1.6.1","title":"1.6.1 2025-05-19","text":""},{"location":"changelog/#changed_6","title":"Changed","text":"<ul> <li>Clarify fallbackTint kdoc in #647</li> </ul>"},{"location":"changelog/#fixed_7","title":"Fixed","text":"<ul> <li>Update outdated Dialog doc by @Skaldebane in #639</li> <li>Handle RenderScript not initializing in #645</li> </ul>"},{"location":"changelog/#new-contributors_2","title":"New Contributors","text":"<ul> <li>@Skaldebane made their first contribution in #639</li> </ul> <p>Full Changelog: https://github.com/chrisbanes/haze/compare/1.6.0...1.6.1</p>"},{"location":"changelog/#1.6.0","title":"1.6.0 2025-05-12","text":""},{"location":"changelog/#highlights_2","title":"Highlights","text":""},{"location":"changelog/#support-for-all-versions-of-android","title":"\ud83e\udd16 Support for all versions of Android","text":"<p>Haze now supports blurring for all versions of Android, using RenderScript underneath. The new platforms documentation has all of the details.</p>"},{"location":"changelog/#foreground-content-blurring","title":"\ud83c\udfa8 Foreground (content) blurring","text":"<p>Haze always been a library which enables background blurring. There are times where you need to blur the foreground content though, which Haze has always left to <code>Modifier.blur</code>. With the addition of older Android support, and all of the other features Haze supports, it makes sense for Haze to support both scenarios. New in this release is foreground blurring (doc).</p>"},{"location":"changelog/#blurred-edge-treatment","title":"\ud83d\udcd0 Blurred edge treatment","text":"<p>With the addition of foreground blurring, the need to be able to customise how content is blurred at the edges is useful. This release contains a new <code>blurredEdgeTreatment</code> on the effect scope, which works the same way as <code>Modifier.blur</code>.</p>"},{"location":"changelog/#added_3","title":"Added","text":"<ul> <li>Add RenderScript backed blur implementation in #590</li> <li>Add <code>HazeState.blurEnabled</code> in #602</li> <li>Update docs for 1.6.0 in #603</li> <li>Add new platform docs in #605</li> <li>Add trace functions in #615</li> <li>Add support for content blurring in #616</li> <li>Add blurredEdgeTreatment property in #625</li> </ul>"},{"location":"changelog/#changed_7","title":"Changed","text":"<ul> <li>Remove the final withSaveLayer call in #601</li> <li>Tidy up HazeProgressive drawing in #604</li> <li>Scale the noise texture appropriately in #613</li> <li>Tweaks to Progressive support for RenderScript in #621</li> <li>Compose Multiplatform 1.8.0 in #634</li> </ul>"},{"location":"changelog/#fixed_8","title":"Fixed","text":"<ul> <li>Fix masking for content blurring in #619</li> <li>Fix input scaled content being 1px smaller in #622</li> <li>Noise fixes for Android in #626</li> <li>Fix clamping blur effect on edges in #629</li> <li>[RenderScript] Fix tint and noise size being incorrect in #632</li> </ul> <p>Full Changelog: https://github.com/chrisbanes/haze/compare/1.5.4...1.6.0</p>"},{"location":"changelog/#1.6.0-rc02","title":"1.6.0-rc02 2025-05-06","text":""},{"location":"changelog/#changed_8","title":"Changed","text":"<ul> <li>Compose Multiplatform 1.8.0 in #634</li> </ul> <p>Full Changelog: https://github.com/chrisbanes/haze/compare/1.6.0-rc01...1.6.0-rc02</p>"},{"location":"changelog/#1.6.0-rc01","title":"1.6.0-rc01 2025-05-05","text":""},{"location":"changelog/#fixed_9","title":"Fixed","text":"<ul> <li>[RenderScript] Fix tint and noise size being incorrect in #632</li> </ul> <p>Full Changelog: https://github.com/chrisbanes/haze/compare/1.6.0-beta03...1.6.0-rc01</p>"},{"location":"changelog/#1.6.0-beta03","title":"1.6.0-beta03 2025-05-04","text":""},{"location":"changelog/#added_4","title":"Added","text":"<ul> <li>Add blurredEdgeTreatment property in #625</li> </ul>"},{"location":"changelog/#changed_9","title":"Changed","text":"<ul> <li>Noise fixes for Android in #626</li> </ul>"},{"location":"changelog/#fixed_10","title":"Fixed","text":"<ul> <li>Fix clamping blur effect on edges in #629</li> </ul> <p>Full Changelog: https://github.com/chrisbanes/haze/compare/1.6.0-beta02...1.6.0-beta03</p>"},{"location":"changelog/#1.6.0-beta02","title":"1.6.0-beta02 2025-04-29","text":""},{"location":"changelog/#added_5","title":"Added","text":"<ul> <li>Add trace functions in #615</li> <li>Add support for content blurring in #616</li> </ul>"},{"location":"changelog/#changed_10","title":"Changed","text":"<ul> <li>Scale the noise texture appropriately in #613</li> <li>Tweaks to Progressive support for RenderScript in #621</li> </ul>"},{"location":"changelog/#fixed_11","title":"Fixed","text":"<ul> <li>Fix masking for content blurring in #619</li> <li>Fix input scaled content being 1px smaller in #622</li> </ul> <p>Full Changelog: https://github.com/chrisbanes/haze/compare/1.6.0-beta01...1.6.0-beta02</p>"},{"location":"changelog/#1.6.0-beta01","title":"1.6.0-beta01 2025-04-23","text":""},{"location":"changelog/#highlights_3","title":"Highlights","text":""},{"location":"changelog/#support-for-all-android-devices","title":"\ud83c\udd95 Support for all Android devices","text":"<p>We now support for older Android versions, using an implementation of blurring which uses RenderScript. You can read the new Platforms documentation for more information on how to try it.</p> <p>Big thanks to @desugar-64 for the help on this.</p>"},{"location":"changelog/#android-12-is-now-enabled-by-default","title":"Android 12 is now enabled by default","text":"<p>We have now identified a fix for the issues which meant that blurring was disabled on Android 12, and it is now enabled by default.</p>"},{"location":"changelog/#added_6","title":"Added","text":"<ul> <li>Add RenderScript backed blur implementation in #590</li> <li>Add <code>HazeState.blurEnabled</code> in #602</li> <li>Update docs for 1.6.0 in #603</li> <li>Add new platform docs in #605</li> </ul>"},{"location":"changelog/#changed_11","title":"Changed","text":"<ul> <li>Remove the final withSaveLayer call in #601</li> <li>Tidy up HazeProgressive drawing in #604</li> </ul> <p>Full Changelog: https://github.com/chrisbanes/haze/compare/1.5.4...1.6.0-beta01</p>"},{"location":"changelog/#1.5.4","title":"1.5.4 2025-04-17","text":""},{"location":"changelog/#changed_12","title":"Changed","text":"<ul> <li>Re-use BlurEffect instances in #600</li> </ul> <p>Full Changelog: https://github.com/chrisbanes/haze/compare/1.5.3...1.5.4</p>"},{"location":"changelog/#1.5.3","title":"1.5.3 2025-04-13","text":""},{"location":"changelog/#changed_13","title":"Changed","text":"<ul> <li>Reduce scope of consumer R8 rules in #579</li> <li>Extract BlurEffect interface in #589</li> <li>Use <code>Sample</code> as routes directly by @Goooler in #593</li> </ul>"},{"location":"changelog/#fixed_12","title":"Fixed","text":"<ul> <li>Fix links on docs site in #581</li> <li>Fix haze effects inside of of pagers by @Monkopedia in #594</li> </ul>"},{"location":"changelog/#new-contributors_3","title":"New Contributors","text":"<ul> <li>@Goooler made their first contribution in #593</li> <li>@Monkopedia made their first contribution in #594</li> </ul> <p>Full Changelog: https://github.com/chrisbanes/haze/compare/1.5.2...1.5.3</p>"},{"location":"changelog/#1.5.2","title":"1.5.2 2025-03-23","text":""},{"location":"changelog/#changed_14","title":"Changed","text":"<ul> <li>Migrate samples to AndroidX Navigation in #563</li> <li>Disable context-receivers compiler flag in #564</li> <li>Update baseline profile in #568</li> </ul>"},{"location":"changelog/#fixed_13","title":"Fixed","text":"<ul> <li>Fix flicker when using AndroidX Navigation in #566</li> <li>Fix wrong blur rect after rotating in #567</li> </ul> <p>Full Changelog: https://github.com/chrisbanes/haze/compare/1.5.1...1.5.2</p>"},{"location":"changelog/#1.5.1","title":"1.5.1 2025-03-19","text":""},{"location":"changelog/#fixed_14","title":"Fixed","text":"<ul> <li>Fix compilation failure of iOS sample by @keta1 in #553</li> <li>[Skiko] Fix noise effect not being masked for progressive effect in #555</li> </ul>"},{"location":"changelog/#new-contributors_4","title":"New Contributors","text":"<ul> <li>@keta1 made their first contribution in #553</li> </ul> <p>Full Changelog: https://github.com/chrisbanes/haze/compare/1.5.0...1.5.1</p>"},{"location":"changelog/#1.5.0","title":"1.5.0 2025-03-06","text":""},{"location":"changelog/#highlights_4","title":"Highlights","text":"<ul> <li>Optimised blurring shader for progressive effects. Thanks to @Kyant0 in #537</li> <li>HazeProgressive.Brush. You can now supply completely custom masks (via a shader) for progressive effects.</li> <li>Added <code>HazeLogger</code>. You can now turn on Haze's internal logging. Handy for debugging and reporting issues.</li> <li>Various bug fixes. Thanks to everyone who reported issues.</li> </ul>"},{"location":"changelog/#added_7","title":"Added","text":"<ul> <li>Add iOS sample in #532</li> <li>Add HazeLogger in #534</li> <li>Add HazeProgressive.Brush in #542</li> <li>Add HazeProgressive.forShader in #546</li> </ul>"},{"location":"changelog/#changed_15","title":"Changed","text":"<ul> <li>Optimize Gaussian blur shader by @Kyant0 in #537</li> </ul>"},{"location":"changelog/#fixed_15","title":"Fixed","text":"<ul> <li>Fix progressive effect being drawn incorrectly  in #538</li> <li>Don't create GraphicsLayer if dimension is zero in #540</li> <li>Fix support for nested Haze hierarchies in #545</li> <li>Fix baseline profile generation in #550</li> </ul>"},{"location":"changelog/#new-contributors_5","title":"New Contributors","text":"<ul> <li>@Kyant0 made their first contribution in #537</li> </ul> <p>Full Changelog: https://github.com/chrisbanes/haze/compare/1.4.0...1.5.0</p>"},{"location":"changelog/#1.4.0","title":"1.4.0 2025-02-28","text":""},{"location":"changelog/#added_8","title":"Added","text":"<ul> <li>Add HazeDialog composable in #513</li> </ul>"},{"location":"changelog/#changed_16","title":"Changed","text":"<ul> <li>Bump Android Compile SDK to 35 in #512</li> <li>Re-introduce expanded layer size in #522</li> <li>Use high-precision types in blurring shader in #530</li> </ul>"},{"location":"changelog/#fixed_16","title":"Fixed","text":"<ul> <li>Fix default style to include blurring in #527</li> <li>Fix progressive effect on certain OEMs in #528</li> </ul> <p>Full Changelog: https://github.com/chrisbanes/haze/compare/1.3.1...1.4.0</p>"},{"location":"changelog/#1.3.1","title":"1.3.1 2025-02-09","text":""},{"location":"changelog/#changed_17","title":"Changed","text":"<ul> <li>Move Lifecycle usage to androidMain in #500</li> <li>Only use positionOnScreen on Android in #503</li> </ul>"},{"location":"changelog/#fixed_17","title":"Fixed","text":"<ul> <li>Release GraphicsLayer when stopped in #499</li> </ul> <p>Full Changelog: https://github.com/chrisbanes/haze/compare/1.3.0...1.3.1</p>"},{"location":"changelog/#1.3.0","title":"1.3.0 2025-01-27","text":""},{"location":"changelog/#added_9","title":"Added","text":"<ul> <li>Add Brush support to HazeTint in #481</li> <li>Add Bottom Sheet sample in #485</li> <li>Add support for radial progressive effects in #491</li> <li>Adds section on using Haze in deep UI hierarchies. by @StylingAndroid in #494</li> </ul>"},{"location":"changelog/#changed_18","title":"Changed","text":"<ul> <li>Move all samples to <code>shared</code> in #484</li> </ul>"},{"location":"changelog/#fixed_18","title":"Fixed","text":"<ul> <li>Fix alpha property changes not invalidating in #490</li> </ul>"},{"location":"changelog/#new-contributors_6","title":"New Contributors","text":"<ul> <li>@StylingAndroid made their first contribution in #494</li> </ul> <p>Full Changelog: https://github.com/chrisbanes/haze/compare/1.2.2...1.3.0</p>"},{"location":"changelog/#1.2.2","title":"1.2.2 2025-01-16","text":""},{"location":"changelog/#fixed_19","title":"Fixed","text":"<ul> <li>Add workaround for positionOnScreen throwing in #472</li> <li>[Skia] Fix hazeSource content changes not updating hazeEffects in #476</li> </ul> <p>Full Changelog: https://github.com/chrisbanes/haze/compare/1.2.1...1.2.2</p>"},{"location":"changelog/#1.2.1","title":"1.2.1 2025-01-13","text":""},{"location":"changelog/#fixed_20","title":"Fixed","text":"<ul> <li>Fix Haze not drawing any effects in previews in #470</li> <li>Fix issues with missing effects in LazyLayouts in #469</li> </ul> <p>Full Changelog: https://github.com/chrisbanes/haze/compare/1.2.0...1.2.1</p>"},{"location":"changelog/#1.2.0","title":"1.2.0 2025-01-09","text":""},{"location":"changelog/#highlights_5","title":"Highlights","text":""},{"location":"changelog/#api-renames","title":"API renames","text":"<p>I have renamed a number of the APIs in this release to better reflect what they actually do these days:</p> <ul> <li><code>Modifier.haze</code> -&gt; <code>Modifier.hazeSource</code></li> <li><code>Modifier.hazeChild</code> -&gt; <code>Modifier.hazeEffect</code></li> <li><code>HazeChildScope</code> -&gt; <code>HazeEffectScope</code></li> </ul> <p>I've kept the old APIs around and deprecated them for easy migration.</p>"},{"location":"changelog/#overlapping-blurred-areas","title":"Overlapping blurred areas","text":"<p>Haze now supports different <code>hazeEffect</code> areas which overlap. See here for more information.</p>"},{"location":"changelog/#versioned-documentation","title":"Versioned documentation","text":"<p>A small quality of life change, but the documentation website is now versioned: https://chrisbanes.github.io/haze/</p>"},{"location":"changelog/#changed_19","title":"Changed","text":"<ul> <li>Stop using synchronized lazy in #446</li> <li>Add support for multiple Haze nodes attached to a HazeState in #441</li> <li>Rename modifiers for clarity in #452</li> <li>[Sample] Hook up back button on Android in #459</li> <li>Remove expanded layer size in #461</li> <li>Small tidy ups ready for release in #463</li> </ul> <p>Full Changelog: https://github.com/chrisbanes/haze/compare/1.1.1...1.2.0</p>"},{"location":"changelog/#1.1.1","title":"1.1.1 2024-12-04","text":""},{"location":"changelog/#changed_20","title":"Changed","text":"<ul> <li>Use onPlaced for screenshot tests in #433</li> </ul> <p>Full Changelog: https://github.com/chrisbanes/haze/compare/1.1.0...1.1.1</p>"},{"location":"changelog/#1.1.0","title":"1.1.0 2024-12-02","text":""},{"location":"changelog/#highlights_6","title":"Highlights","text":"<p>\ud83c\udd95 Input Scale - A new feature in this release is being able to set the input scale, allowing you to downscale content for potential performance gains.</p>"},{"location":"changelog/#added_10","title":"Added","text":"<ul> <li>Add inputScale in #416</li> <li>Improve HazeInputScale API in #423</li> <li>Add automatic HazeInputScale in #427</li> </ul>"},{"location":"changelog/#changed_21","title":"Changed","text":"<ul> <li>Reduce variance in benchmarks in #418</li> <li>More benchmark consistency work in #424</li> <li>Remove noise scaling on Android in #428</li> </ul> <p>Full Changelog: https://github.com/chrisbanes/haze/compare/1.0.2...1.1.0</p>"},{"location":"changelog/#1.0.2","title":"1.0.2 2024-11-15","text":""},{"location":"changelog/#highlights_7","title":"Highlights","text":"<p>\ud83c\udd95 Ability to control where the blurring effect is used - You can now control where the blur effect is used. Specifically for Android, there's more information here.</p>"},{"location":"changelog/#added_11","title":"Added","text":"<ul> <li>Add blurEnabled on HazeChildScope property in #408</li> </ul> <p>Full Changelog: https://github.com/chrisbanes/haze/compare/1.0.1...1.0.2</p>"},{"location":"changelog/#1.0.1","title":"1.0.1 2024-11-11","text":""},{"location":"changelog/#added_12","title":"Added","text":"<ul> <li>Add <code>preferPerformance</code> flag on HazeProgressive in #401</li> </ul>"},{"location":"changelog/#changed_22","title":"Changed","text":"<ul> <li>Cache RenderEffects in #402</li> </ul>"},{"location":"changelog/#fixed_21","title":"Fixed","text":"<ul> <li>Implement fallback for HazeProgressive in #400</li> </ul> <p>Full Changelog: https://github.com/chrisbanes/haze/compare/1.0.0...1.0.1</p>"},{"location":"changelog/#1.0.0","title":"1.0.0 2024-11-07","text":"<p>This is the first stable 1.0.0 release! \ud83c\udf89</p> <p>For a full list of changes since 0.7.3, see the migration guide.</p>"},{"location":"changelog/#new-contributors_7","title":"New Contributors","text":"<ul> <li>@Sanlorng made their first contribution in #306</li> </ul> <p>Full Changelog: https://github.com/chrisbanes/haze/compare/0.7.3...1.0.0</p>"},{"location":"changelog/#0.9.0-rc03","title":"0.9.0-rc03 2024-11-02","text":""},{"location":"changelog/#changed_23","title":"Changed","text":"<ul> <li>Remove LayoutAwareModifierNode and onPlaced again in #383</li> </ul>"},{"location":"changelog/#fixed_22","title":"Fixed","text":"<ul> <li>Fix crashes caused by blurRadius of 0px in #382</li> </ul> <p>Full Changelog: https://github.com/chrisbanes/haze/compare/0.9.0-rc02...0.9.0-rc03</p>"},{"location":"changelog/#0.9.0-rc02","title":"0.9.0-rc02 2024-10-26","text":""},{"location":"changelog/#changed_24","title":"Changed","text":"<ul> <li>Doc updates for Haze v0.9 in #369</li> <li>Upgrade to Robolectric 4.14-beta-1 in #370</li> <li>Start using LayoutAwareModifierNode and onPlaced again in #372</li> </ul> <p>Full Changelog: https://github.com/chrisbanes/haze/compare/0.9.0-rc01...0.9.0-rc02</p>"},{"location":"changelog/#0.9.0-rc01","title":"0.9.0-rc01 2024-10-21","text":""},{"location":"changelog/#highlights_8","title":"Highlights","text":"<p>Performance improvements for progressive blur - On platforms which support runtime shaders (everything other than Android SDK &lt; 33), progressive is ~1.9x faster than before, through the usage of a new (custom) runtime shader.</p>"},{"location":"changelog/#added_13","title":"Added","text":"<ul> <li>Add runtime shader for progressive blur in #368</li> </ul>"},{"location":"changelog/#changed_25","title":"Changed","text":"<ul> <li>Small micro optimizations in #364</li> </ul> <p>Full Changelog: https://github.com/chrisbanes/haze/compare/0.9.0-beta04.1...0.9.0-rc01</p>"},{"location":"changelog/#0.9.0-beta04.1","title":"0.9.0-beta04.1 2024-10-16","text":""},{"location":"changelog/#fixed_23","title":"Fixed","text":"<ul> <li>Fix defaults for blurRadius and noiseFactor in #361</li> </ul> <p>Full Changelog: https://github.com/chrisbanes/haze/compare/0.9.0-beta04...0.9.0-beta04.1</p>"},{"location":"changelog/#0.9.0-beta04","title":"0.9.0-beta04 2024-10-16","text":""},{"location":"changelog/#highlights_9","title":"Highlights","text":""},{"location":"changelog/#compose-multiplatform-170","title":"Compose Multiplatform 1.7.0","text":"<p>CMP 1.7.0 has gone stable. Go and upgrade.</p>"},{"location":"changelog/#progressive-blurs-aka-gradient-blurs","title":"Progressive blurs (aka gradient blurs)","text":"<p>We now have access to progressive blurring with an API very similar to the <code>Brush</code> gradient APIs.</p> <p>[!CAUTION] The performance of progressive blurring is untested as yet, but for sure it's going to be slower than without. I also haven't put any performance work into this as yet. That will come for the next release (hopefully rc01).</p>"},{"location":"changelog/#tweaked-styling-apis-again","title":"Tweaked styling APIs (again)","text":"<p>The styling APIs have changed again (sorry about that), but I'm feeling much better about the new API. We now have a the LocalHazeStyle composition local (for global styling), <code>style</code> parameter on hazeChild for node-specific, and then the individual properties on hazeChild <code>block</code>.</p>"},{"location":"changelog/#added_14","title":"Added","text":"<ul> <li>Progressive blur in #346</li> <li>Add ExoPlayer sample in #356</li> </ul>"},{"location":"changelog/#changed_26","title":"Changed","text":"<ul> <li>More benchmark tests (and perf improvements) in #349</li> <li>Throw error on descendant layouts in #357</li> <li>Style improvements for 0.9.x in #360</li> </ul> <p>Full Changelog: https://github.com/chrisbanes/haze/compare/0.9.0-beta03...0.9.0-beta04</p>"},{"location":"changelog/#0.9.0-beta03","title":"0.9.0-beta03 2024-10-04","text":""},{"location":"changelog/#changed_27","title":"Changed","text":"<ul> <li>Only use a GraphicsLayer on Android on hw-accel canvases in #341</li> <li>Remove the unused defaultStyle vars in #342</li> </ul> <p>Full Changelog: https://github.com/chrisbanes/haze/compare/0.9.0-beta02...0.9.0-beta03</p>"},{"location":"changelog/#0.9.0-beta02","title":"0.9.0-beta02 2024-10-01","text":""},{"location":"changelog/#highlights_10","title":"Highlights","text":"<ul> <li>We now depend on Compose Multiplatform 1.7.0-rc01</li> <li>Lots of API tweaks!</li> </ul>"},{"location":"changelog/#added_15","title":"Added","text":"<ul> <li>Add alpha param to hazeChild in #313</li> </ul>"},{"location":"changelog/#changed_28","title":"Changed","text":"<ul> <li>Tidy up API for v0.9.0 in #330</li> <li>Disable invalidation tick in #331</li> </ul> <p>Full Changelog: https://github.com/chrisbanes/haze/compare/0.9.0-beta01...0.9.0-beta02</p>"},{"location":"changelog/#0.9.0-beta01","title":"0.9.0-beta01 2024-09-05","text":""},{"location":"changelog/#highlights_11","title":"Highlights","text":"<ul> <li>New version of <code>hazeChild</code> which takes lambda parameters. Should be a lot more efficient if you need to animate properties.</li> <li>Using Jetpack Compose 1.7.0 (GA)</li> <li>Using Compose Multiplatform 1.7.0-beta01</li> <li>(New) FluentMaterials class, which mimics Windows blurring styles. Thanks @Sanlorng!</li> </ul>"},{"location":"changelog/#added_16","title":"Added","text":"<ul> <li>Add FluentMaterials by @Sanlorng in #306</li> <li>Add lambda version of HazeChild in #309</li> </ul>"},{"location":"changelog/#new-contributors_8","title":"New Contributors","text":"<ul> <li>@Sanlorng made their first contribution in #306</li> </ul> <p>Full Changelog: https://github.com/chrisbanes/haze/compare/0.9.0-alpha08...0.9.0-beta01</p>"},{"location":"changelog/#0.9.0-alpha08","title":"0.9.0-alpha08 2024-08-21","text":""},{"location":"changelog/#added_17","title":"Added","text":"<ul> <li>Add Brush suppport for tints in #298</li> </ul> <p>Full Changelog: https://github.com/chrisbanes/haze/compare/0.9.0-alpha07...0.9.0-alpha08</p>"},{"location":"changelog/#0.9.0-alpha07","title":"0.9.0-alpha07 2024-08-15","text":""},{"location":"changelog/#fixed_24","title":"Fixed","text":"<ul> <li>Add workaround for invalidations not happening on Skia backed platforms in #296</li> </ul> <p>Full Changelog: https://github.com/chrisbanes/haze/compare/0.9.0-alpha06...0.9.0-alpha07</p>"},{"location":"changelog/#0.9.0-alpha06","title":"0.9.0-alpha06 2024-08-07","text":""},{"location":"changelog/#fixed_25","title":"Fixed","text":"<ul> <li>Fix clipping size in #288</li> </ul> <p>Full Changelog: https://github.com/chrisbanes/haze/compare/0.9.0-alpha05...0.9.0-alpha06</p>"},{"location":"changelog/#0.9.0-alpha05","title":"0.9.0-alpha05 2024-08-01","text":""},{"location":"changelog/#changed_29","title":"Changed","text":"<ul> <li>Remove shape clipping in #287</li> </ul> <p>Full Changelog: https://github.com/chrisbanes/haze/compare/0.9.0-alpha04...0.9.0-alpha05</p>"},{"location":"changelog/#0.9.0-alpha04","title":"0.9.0-alpha04 2024-07-23","text":""},{"location":"changelog/#changed_30","title":"Changed","text":"<ul> <li>Implement better edges in #275</li> <li>Invalidate the render effect on size changes in #278</li> </ul>"},{"location":"changelog/#fixed_26","title":"Fixed","text":"<ul> <li>Fix clipping for rectangles in #279</li> </ul> <p>Full Changelog: https://github.com/chrisbanes/haze/compare/0.9.0-alpha03...0.9.0-alpha04</p>"},{"location":"changelog/#0.9.0-alpha03","title":"0.9.0-alpha03 2024-07-19","text":""},{"location":"changelog/#highlights_12","title":"Highlights","text":"<p>\ud83c\udd95 Masks - You can now supply a <code>Brush</code> to <code>hazeChild</code> which will act as a mask. The mask allows things like gradient blurs, by supplying a <code>Brush.verticalGradient</code> or similar.</p>"},{"location":"changelog/#added_18","title":"Added","text":"<ul> <li>Add ability to provide mask for blurred areas in #267</li> </ul>"},{"location":"changelog/#changed_31","title":"Changed","text":"<ul> <li>Revert usage of Poko in #268</li> <li>Turn off auto invalidation in #271</li> <li>Revert \"Update plugin mavenpublish to v0.29.0\" in #273</li> </ul>"},{"location":"changelog/#fixed_27","title":"Fixed","text":"<ul> <li>Throw error when background color is not specified in #265</li> <li>Fix samples crashing in #270</li> <li>Fix content node being placed at incorrect position in #272</li> </ul> <p>Full Changelog: https://github.com/chrisbanes/haze/compare/0.9.0-alpha02...0.9.0-alpha03</p>"},{"location":"changelog/#0.9.0-alpha02","title":"0.9.0-alpha02 2024-07-17","text":""},{"location":"changelog/#fixed_28","title":"Fixed","text":"<ul> <li>Fix NPE from missing content layer in #263</li> </ul> <p>Full Changelog: https://github.com/chrisbanes/haze/compare/0.9.0-alpha01...0.9.0-alpha02</p>"},{"location":"changelog/#0.9.0-alpha01","title":"0.9.0-alpha01 2024-07-16","text":"<p>For more information, see https://chrisbanes.github.io/haze/migrating-0.9/</p>"},{"location":"changelog/#changed_32","title":"Changed","text":"<ul> <li>[next] Initial upgrade to Compose Multiplatform 1.7.0-alpha in #250</li> <li>New rendering mode in #259</li> <li>Add some docs for 0.9 in #261</li> </ul> <p>Full Changelog: https://github.com/chrisbanes/haze/compare/0.7.3...0.9.0-alpha01</p>"},{"location":"changelog/#0.7.3","title":"0.7.3 2024-07-08","text":""},{"location":"changelog/#changed_33","title":"Changed","text":"<ul> <li>Integrate GlobalPositionAwareModifierNode into Haze modifiers in #246</li> <li>Add ListOverImage sample in #248</li> </ul> <p>Full Changelog: https://github.com/chrisbanes/haze/compare/0.7.2...0.7.3</p>"},{"location":"changelog/#0.7.2","title":"0.7.2 2024-06-17","text":""},{"location":"changelog/#changed_34","title":"Changed","text":"<ul> <li>Web updates (JS/Canvas) by @nevrozza in #228</li> </ul>"},{"location":"changelog/#fixed_29","title":"Fixed","text":"<ul> <li>Fix sample code in usage docs by @lhoyong in #211</li> <li>Fix typo in naming of \"lorem ipsum\" placeholder value by @twyatt in #215</li> <li>Fix CI and docs build in #237</li> </ul>"},{"location":"changelog/#new-contributors_9","title":"New Contributors","text":"<ul> <li>@lhoyong made their first contribution in #211</li> <li>@twyatt made their first contribution in #215</li> <li>@nevrozza made their first contribution in #228</li> </ul> <p>Full Changelog: https://github.com/chrisbanes/haze/compare/0.7.1...0.7.2</p>"},{"location":"changelog/#0.7.1","title":"0.7.1 2024-05-01","text":""},{"location":"changelog/#changed_35","title":"Changed","text":"<ul> <li>Remove usage of LFS in #198</li> <li>Kotlin 1.9.23 + CMP 1.6.2 in #199</li> <li>Don't include test sources in API files in #204</li> </ul>"},{"location":"changelog/#added_19","title":"Added","text":"<ul> <li>Add scroll behavior to Scaffold sample in #197</li> </ul>"},{"location":"changelog/#fixed_30","title":"Fixed","text":"<ul> <li>Fix glitch with clipping content out in #205</li> <li>Reset state when LazyLayout reuses node in #203</li> <li>[Android] Fix dialog being offset for non edge-to-edge windows in #206</li> <li>Fix content clip path at edges in #207</li> </ul> <p>Full Changelog: https://github.com/chrisbanes/haze/compare/0.7.0...0.7.1</p>"},{"location":"changelog/#0.7.0","title":"0.7.0 2024-04-12","text":""},{"location":"changelog/#changed_36","title":"Changed","text":"<ul> <li>Enable Robolectric hardware rendering in #147</li> <li>Tidy up settings.gradle.kts in #181</li> <li>Remove deprecated library and APIs in #182</li> </ul>"},{"location":"changelog/#fixed_31","title":"Fixed","text":"<ul> <li>Fix HazeChild being conditionally added in #174</li> </ul> <p>Full Changelog: https://github.com/chrisbanes/haze/compare/0.6.2...0.7.0</p>"},{"location":"changelog/#0.6.2","title":"0.6.2 2024-03-10","text":""},{"location":"changelog/#fixed_32","title":"Fixed","text":"<ul> <li>Fix corner radius not applying to the correct corners by @mikepenz in #162</li> </ul>"},{"location":"changelog/#added_20","title":"Added","text":"<ul> <li>[Test] Add test-case to verify rounded corners by @mikepenz in #163</li> </ul>"},{"location":"changelog/#new-contributors_10","title":"New Contributors","text":"<ul> <li>@mikepenz made their first contribution in #162</li> </ul> <p>Full Changelog: https://github.com/chrisbanes/haze/compare/0.6.1...0.6.2</p>"},{"location":"changelog/#0.6.1","title":"0.6.1 2024-03-09","text":""},{"location":"changelog/#changed_37","title":"Changed","text":"<ul> <li>Migrate samples to use Coil in #154</li> </ul>"},{"location":"changelog/#added_21","title":"Added","text":"<ul> <li>Add Kotlin WebAssembly support in #153</li> </ul>"},{"location":"changelog/#fixed_33","title":"Fixed","text":"<ul> <li>[Android] Fix empty bounds handling in #160</li> </ul> <p>Full Changelog: https://github.com/chrisbanes/haze/compare/0.6.0...0.6.1</p>"},{"location":"changelog/#0.6.0","title":"0.6.0 2024-03-06","text":""},{"location":"changelog/#highlights_13","title":"Highlights","text":"<ul> <li>[iOS and Desktop] Fix edges not being blurred uniformly (#142). Big thanks to @Dynaruid for contributing this!</li> <li>[Android] Fix artifacts on rounded edges (#132)</li> </ul>"},{"location":"changelog/#changed_38","title":"Changed","text":"<ul> <li>Use Poppins in screenshot testing in #144</li> </ul>"},{"location":"changelog/#fixed_34","title":"Fixed","text":"<ul> <li>Fixed where the edges appeared as if they were not properly blurred by @Dynaruid in #142</li> <li>Fix Android clip/rounding issue in #133</li> <li>Correct default value for Noise in Usage.md by @dev-weiqi in #149</li> </ul>"},{"location":"changelog/#new-contributors_11","title":"New Contributors","text":"<ul> <li>@Dynaruid made their first contribution in #142</li> <li>@dev-weiqi made their first contribution in #149</li> </ul> <p>Full Changelog: https://github.com/chrisbanes/haze/compare/0.5.4...0.6.0</p>"},{"location":"changelog/#0.5.4","title":"0.5.4 2024-02-27","text":"<p>Full Changelog: https://github.com/chrisbanes/haze/compare/0.5.3...0.5.4</p>"},{"location":"changelog/#0.5.3","title":"0.5.3 2024-02-18","text":"<p>Full Changelog: https://github.com/chrisbanes/haze/compare/0.5.2...0.5.3</p>"},{"location":"changelog/#0.5.2","title":"0.5.2 2024-02-14","text":"<p>Full Changelog: https://github.com/chrisbanes/haze/compare/0.5.1...0.5.2</p>"},{"location":"changelog/#0.5.1","title":"0.5.1 2024-02-07","text":""},{"location":"changelog/#fixed_35","title":"Fixed","text":"<ul> <li>Fix Android noise texture changing luminance in #126</li> </ul> <p>Full Changelog: https://github.com/chrisbanes/haze/compare/0.5.0...0.5.1</p>"},{"location":"changelog/#0.5.0","title":"0.5.0 2024-01-31","text":""},{"location":"changelog/#highlights_14","title":"Highlights","text":"<ul> <li>\ud83c\udfc3 Optimizations and performance increases (see performance docs)</li> <li>\ud83c\udf2b\ufe0f New Materials library (see materials docs)</li> <li>\ud83c\udd95 Tidied up styling API</li> <li>\u2728 Updated to Compose Multiplatform 1.6.0-beta01 (and Jetpack Compose 1.6.0)</li> <li>\ud83d\udd01 Merged haze and haze-jetpack-compose</li> <li>\ud83d\udcdc (Android) New baseline profiles bundled in library. Thanks to @simonlebras for this.</li> </ul>"},{"location":"changelog/#changed_39","title":"Changed","text":"<ul> <li>Merge :haze and :haze-jetpack-compose in #106</li> <li>Lots of small fixes in #113</li> <li>Optimize Android implementations in #115</li> </ul>"},{"location":"changelog/#added_22","title":"Added","text":"<ul> <li>Baseline profile by @simonlebras in #93</li> <li>Baseline Profile tweaks in #95</li> <li>Add HazeStyle class in #110</li> <li>Add Haze Materials in #111</li> <li>Add macrobenchmark tests in #116</li> </ul>"},{"location":"changelog/#fixed_36","title":"Fixed","text":"<ul> <li>Fix Small Typo in Docs by @jorgedotcom in #100</li> </ul>"},{"location":"changelog/#new-contributors_12","title":"New Contributors","text":"<ul> <li>@simonlebras made their first contribution in #93</li> <li>@jorgedotcom made their first contribution in #100</li> </ul> <p>Full Changelog: https://github.com/chrisbanes/haze/compare/0.4.5...0.5.0</p>"},{"location":"changelog/#0.4.5","title":"0.4.5 2024-01-12","text":""},{"location":"changelog/#changes","title":"Changes","text":"<ul> <li>Android Previews (and screenshot tests) now display a scrim, rather than nothing.</li> <li>Haze children from different Android windows (i.e. Dialogs) now work</li> </ul>"},{"location":"changelog/#fixed_37","title":"Fixed","text":"<ul> <li>Calculate areas in screen coordinates in #88</li> <li>Merge Android implementations in #91</li> </ul> <p>Full Changelog: https://github.com/chrisbanes/haze/compare/0.4.4...0.4.5</p>"},{"location":"changelog/#0.4.4","title":"0.4.4 2024-01-08","text":""},{"location":"changelog/#fixed_38","title":"Fixed","text":"<ul> <li>Fix hazeChild tint not updating on Android base in #83</li> </ul>"},{"location":"changelog/#added_23","title":"Added","text":"<ul> <li>Add screenshot tests to verify <code>hazeChild</code> tint changes in #85</li> </ul> <p>Full Changelog: https://github.com/chrisbanes/haze/compare/0.4.3...0.4.4</p>"},{"location":"changelog/#0.4.3","title":"0.4.3 2024-01-05","text":""},{"location":"changelog/#fixed_39","title":"Fixed","text":"<ul> <li>Avoid using <code>RenderNode</code> blur implementation on API 31 for now. See #77</li> <li>Transparent tints now work everywhere.</li> </ul>"},{"location":"changelog/#added_24","title":"Added","text":"<ul> <li>Allow setting a tint on each <code>hazeChild</code></li> </ul>"},{"location":"changelog/#changed_40","title":"Changed","text":"<ul> <li>Fix transparent tints causing crash on Android in #74</li> <li>Skip RenderNode impl on API 31 in #79</li> <li>Allow override tint on <code>hazeChild</code> in #81</li> </ul> <p>Full Changelog: https://github.com/chrisbanes/haze/compare/0.4.2...0.4.3</p>"},{"location":"changelog/#0.4.2","title":"0.4.2 2024-01-03","text":""},{"location":"changelog/#fixed_40","title":"Fixed","text":"<ul> <li>Android minimum SDK is now 21 to match Compose.</li> <li><code>haze</code> and <code>hazeChild</code> causing previews to crash.</li> </ul>"},{"location":"changelog/#changed_41","title":"Changed","text":"<ul> <li>Drop Android minimum sdk version to 21 in #61</li> <li>No-op on Android impl when LocalInspectionMode is true in #72</li> </ul>"},{"location":"changelog/#added_25","title":"Added","text":"<ul> <li>Add screenshot testing with Roborazzi in #70</li> </ul> <p>Full Changelog: https://github.com/chrisbanes/haze/compare/0.4.1...0.4.2</p>"},{"location":"changelog/#0.4.1","title":"0.4.1 2023-12-12","text":""},{"location":"changelog/#fixed_41","title":"Fixed","text":"<ul> <li>Apply Jetpack Compose Shape to HazeChild.kt on init by @almozavr in #55</li> <li>Port #55 to :haze in #56</li> </ul>"},{"location":"changelog/#new-contributors_13","title":"New Contributors","text":"<ul> <li>@almozavr made their first contribution in #55</li> </ul> <p>Full Changelog: https://github.com/chrisbanes/haze/compare/0.4.0...0.4.1</p>"},{"location":"changelog/#0.4.0","title":"0.4.0 2023-12-11","text":""},{"location":"changelog/#new-api","title":"New API!","text":"<p>I have broken the existing API, but hopefully you can see why. You no longer need to manually calculate bounds. <code>HazeState</code> + <code>Modifier.haze()</code> + <code>Modifier.hazeChild()</code> is all you need.</p> <pre><code>val hazeState = remember { HazeState() }\n\nBox {\n  LazyColumn(\n    modifier = Modifier\n      .fillMaxSize()\n      .haze(\n        // Pass it the HazeState we stored above\n        state = hazeState,\n        // Need to provide background color of the content\n        backgroundColor = MaterialTheme.colorScheme.surface,\n      ),\n  ) {\n    // todo\n  }\n\n  Text(\n    text = \"Content will be blurred behind this\",\n    modifier = Modifier\n      // We use hazeChild on anything where we want the background\n      // blurred. We can even provide a shape.\n      .hazeChild(\n        state = hazeState,\n        shape = RoundedCornerShape(16.dp),\n      ),\n  )\n}\n</code></pre>"},{"location":"changelog/#changed_42","title":"Changed","text":"<ul> <li>Update to Kotlin 1.9.20 in #27</li> <li>API refactor in #36</li> <li>Small API tidy-ups in #53</li> <li>More API tweaks in #54</li> </ul>"},{"location":"changelog/#fixed_42","title":"Fixed","text":"<ul> <li>Fix position issue by @MohamedRejeb in #52</li> </ul> <p>Full Changelog: https://github.com/chrisbanes/haze/compare/0.3.1...0.4.0</p>"},{"location":"changelog/#0.3.1","title":"0.3.1 2023-11-10","text":"<p>Small hotfix. We now build Android and JVM targets outputting Java 11 bytecode.</p>"},{"location":"changelog/#fixed_43","title":"Fixed","text":"<ul> <li>Fix JVM targets in #28</li> </ul> <p>Full Changelog: https://github.com/chrisbanes/haze/compare/0.3.0...0.3.1</p>"},{"location":"changelog/#0.3.0","title":"0.3.0 2023-11-08","text":""},{"location":"changelog/#added_26","title":"Added","text":"<ul> <li>\ud83c\udd95 Round Rect support - We now have support for rounded rectangles, thanks to @MohamedRejeb.</li> <li>Add RoundRect support by @MohamedRejeb in #16</li> </ul>"},{"location":"changelog/#changed_43","title":"Changed","text":"<ul> <li>Apply noise texture using HARD_LIGHT in #21</li> <li>Use Metalava to track public API in #23</li> <li>Provide more customization in the API in #22</li> </ul>"},{"location":"changelog/#new-contributors_14","title":"New Contributors","text":"<ul> <li>@MohamedRejeb made their first contribution in #16</li> </ul> <p>Full Changelog: https://github.com/chrisbanes/haze/compare/v0.2.0...0.3.0</p>"},{"location":"changelog/#0.2.0","title":"0.2.0 2023-11-01","text":""},{"location":"changelog/#changed_44","title":"Changed","text":"<ul> <li>Update Android sample to use haze-jetpack-compose in #9</li> <li>Use NodeElement instead of composed by @qdsfdhvh in #13</li> <li>Migrate Android implementations to Modifier.Node in #15</li> </ul>"},{"location":"changelog/#added_27","title":"Added","text":"<ul> <li>Add noise to Android implementation in #12</li> </ul>"},{"location":"changelog/#fixed_44","title":"Fixed","text":"<ul> <li>Fix Skiko backed Haze not displaying multiple Rects in #17</li> </ul>"},{"location":"changelog/#new-contributors_15","title":"New Contributors","text":"<ul> <li>@qdsfdhvh made their first contribution in #13</li> </ul> <p>Full Changelog: https://github.com/chrisbanes/haze/compare/v0.1.0...v0.2.0</p>"},{"location":"changelog/#0.1.0","title":"0.1.0 2023-10-30","text":"<p>First release!</p> <p>Full Changelog: https://github.com/chrisbanes/haze/commits/v0.1.0</p>"},{"location":"faq/","title":"FAQs","text":""},{"location":"faq/#whats-the-difference-between-this-and-modifierblur","title":"What's the difference between this and Modifier.blur?","text":"<p>The Modifier.blur modifier and Haze may sound similar, but what they provide is different.</p> <p>Haze primarily provides background blurring, meaning that it will blur content behind, not the content itself. This is typically required to implement glass-like effects. <code>Modifier.blur</code> performs 'foreground blurring' (or content blurring) where the content in the node itself is blurred. Haze can work in this mode too, but it's not the primary goal.</p> <p>Other than that, Haze provides a whole bunch of other features which you can read about on the Usage page.</p>"},{"location":"faq/#are-the-blur-implementations-the-same-across-different-platforms","title":"Are the blur implementations the same across different platforms?","text":"<p>The short answer to this is yes. The majority of the implementation is the same across all platforms.</p> <p>The only differences are in how the blur effect is implemented, especially on Android.</p> <p>For most platforms we can use on RenderEffects to implement the blurring, but the implementations used are platform specific. All of the platforms implement them in a very similar, its just the platform classes being used which are different.</p>"},{"location":"faq/#what-versions-of-android-does-haze-work-on","title":"What versions of Android does Haze work on?","text":"<p>See the Platforms page for a detailed run down of what is supported on various platforms.</p>"},{"location":"materials/","title":"Materials","text":"<p>We provide off of the shelf implementations of HazeStyles which implement 'materials' of various styles.</p>"},{"location":"materials/#download","title":"Download","text":"<pre><code>repositories {\n    mavenCentral()\n}\n\ndependencies {\n    implementation(\"dev.chrisbanes.haze:haze-materials:&lt;version&gt;\")\n}\n</code></pre>"},{"location":"materials/#hazematerials","title":"HazeMaterials","text":"<p>A class which contains functions to build HazeStyles which implement 'material-like' styles. It is inspired by the material APIs available in SwiftUI, but it makes no attempt to provide the exact effects provided in iOS (unlike CuperintoMaterials below).</p> <p></p> <p>Class reference: HazeMaterials.</p>"},{"location":"materials/#cupertinomaterials","title":"CupertinoMaterials","text":"<p>A class which contains functions to build HazeStyles which implement 'material' styles similar to those available on Apple platforms. The values used are taken from the iOS 18 Figma file published by Apple.</p> <p>The primary use case for using these is for when aiming for consistency with native UI (i.e. for when mixing Compose Multiplatform content alongside SwiftUI content).</p> <p></p> <p>Class reference: CupertinoMaterials.</p>"},{"location":"materials/#fluentmaterials","title":"FluentMaterials","text":"<p>These implement 'material' styles similar to those available on Windows platforms. The values used are taken from the WinUI 3 Figma file published by Microsoft.</p> <p>The primary use case for using these is for when aiming for consistency with native UI (i.e. for when mixing Compose Multiplatform content alongside WinUI content).</p> <p></p> <p>Class reference: FluentMaterials.</p>"},{"location":"materials/#usage","title":"Usage","text":"<p>All of these are provided through functions on the relevant materials class, with each function providing a different level of material.</p> <pre><code>Box {\n  // rest of sample from above\n\n  LargeTopAppBar(\n    modifier = Modifier\n      .hazeEffect(\n        ...\n        style = HazeMaterials.thin(),\n      ),\n  )\n}\n</code></pre>"},{"location":"migrating-1.0/","title":"Migrating to 1.0","text":""},{"location":"migrating-1.0/#changes","title":"Changes","text":"<p>Here's a list of known changes in v1.0.x. There may be others, so please file issues if you encounter other unexpected changes.</p>"},{"location":"migrating-1.0/#functional-changes","title":"Functional changes","text":""},{"location":"migrating-1.0/#haze-no-longer-clips-background-content","title":"Haze no longer clips background content","text":"<p>This means that blurred areas may appear less blurry at first, as you're seeing the original content behind, and then the blurred content on top. This clipping has been removed, as the clipped areas can't take part in translations, scales, etc.</p> <p>Change: Use the <code>backgroundColor</code> property on <code>HazeStyle</code> to set an appropriate opaque background color. The <code>HazeMaterial</code>s automatically use the Material3 Surface color, so you may have nothing to do here.</p>"},{"location":"migrating-1.0/#blurred-effect-may-look-different","title":"Blurred effect may look different","text":"<p>As we're now using a common implementation on all platforms, the Skia-backed platforms now have a completely different implementation. Haze has also tried to maintain consistency across the platforms, so the differences should be small. However the differences will likely trigger screenshot tests to fail.</p> <p>Change: This is working as intended for small changes, so go ahead and update your screenshot golden images. If you feel that the differences are too large, please file an issue with examples.</p>"},{"location":"migrating-1.0/#api-changes","title":"API changes","text":""},{"location":"migrating-1.0/#more-styling-parameters","title":"More styling parameters","text":"<ul> <li>What: We now have more styling parameters, including a mask <code>Brush</code>, and alpha parameter.</li> <li>Why: More is more, right?</li> </ul>"},{"location":"migrating-1.0/#hazechildscope","title":"\ud83c\udd95 HazeChildScope","text":"<ul> <li>What: We now have a parameter on <code>Modifier.hazeChild</code> which allow you to provide a lambda block for controlling all of Haze's styling parameters. It is similar to concept to <code>Modifier.graphicsLayer { ... }</code>. See here for more information.</li> <li>Why: This has been primarily added to aid animating Haze's styling parameters, in a performant way.</li> </ul>"},{"location":"migrating-1.0/#default-style-functionality-on-modifierhaze-has-been-moved","title":"Default style functionality on Modifier.haze has been moved","text":"<ul> <li>What: In previous versions, there was a <code>style</code> parameter on <code>Modifier.haze</code>, which has been moved in v1.0.</li> <li>Migration: Use the new LocalHazeStyle composition local instead.</li> <li>Why: Composition locals are used throughout styling frameworks, so this is a better API going forward.</li> </ul>"},{"location":"migrating-1.0/#hazearea-has-been-removed","title":"HazeArea has been removed","text":"<ul> <li>What: The <code>HazeArea</code> class has been removed</li> <li>Migration: None. This was mostly an internal API so if you did have a use case for this, let me know via an issue.</li> <li>Why: HazeArea instances were how we updated <code>Modifier.haze</code> instances about individual children (back-writes). With the changes listed below, drawing is now the responsibility of the children themselves, therefore there is no need to communicate this state back up.</li> </ul>"},{"location":"migrating-1.0/#why-have-these-changes-been-made","title":"Why have these changes been made?","text":"<p>Below we'll go through some of the background of the changes in v1.0. You don't need to know this stuff, but it might be interesting for some.</p>"},{"location":"migrating-1.0/#graphicslayers","title":"GraphicsLayers","text":"<p>For Haze, the most exciting APIs we now have access are the new GraphicsLayer APIs. These are very similar to RenderNodes in Android, which Haze has always used on Android. In a very short summary, GraphicsLayers give us a common API to use on all platforms.</p> <p>This has resulted in Haze now having a single implementation across all platforms now, re-using the old Android implementation. This should help minimize platform differences, and bugs.</p>"},{"location":"migrating-1.0/#new-pipeline","title":"New pipeline","text":"<p>In v0.7 and older, Haze is all 'smoke and mirrors'. It draws all of the blurred areas in the <code>haze</code> layout node. The <code>hazeChild</code> nodes just update the size, shape, etc, which the <code>haze</code> modifier reads, to know where to draw.</p> <p>With the adoption of GraphicsLayers, we now have a way to pass 'drawn' content around, meaning that we are no longer bound by the restraints of before. v1.0 contains a re-written drawing pipeline, where the blurred content is drawn by the <code>hazeChild</code>, not the parent. The parent <code>haze</code> is now only responsible for drawing the background content into a graphics layer, and putting it somewhere for the children to access.</p> <p>This fixes a number of long-known issues on Haze, where all were caused by the fact that the blurred area wasn't drawn by the child.</p>"},{"location":"performance/","title":"Performance","text":"<p>Real-time blurring is a non-trivial operation, especially for mobile devices, so developers are rightly worried about the performance impact of using something like Haze.</p> <p>Haze tries to use the most performant mechanism possible on each platform, which can basically be simplified into 2: <code>RenderEffect</code> on Android, and using Skia's <code>ImageFilter</code>s directly on iOS and Desktop.</p>"},{"location":"performance/#input-scale","title":"Input Scale","text":"<p>You can provide an input scale value which determines how much the content is scaled in both the x and y dimensions, allowing the blur effect to be potentially applied over scaled-down content (and thus less pixels), before being scaled back up and drawn at the original size. You can find more information on how to use this here.</p> <p>In terms of the performance benefit which scaling provides, it's fairly small. In our Android benchmark tests, using an <code>inputScale</code> set to <code>0.5</code> reduced the cost of Haze by 5-20%. You can read more about this below.</p> <p>Cost of Haze</p> <p>Just to call out: the percentage that I mentioned is a reduction in the cost of Haze, not the total frame duration. Haze itself introduces a cost, which you can read more about below. The reduction in total frame duration duration will be in the region of 3-5%.</p>"},{"location":"performance/#benchmarks","title":"Benchmarks","text":"<p>To quantify performance, we have a number of Macrobenchmark tests to measure Haze's effect on drawing performance on Android. We'll be using these on every major release to ensure that we do not unwittingly regress performance.</p> <p>Anyway, in the words of Jerry Maguire, \"Show Me The Money\"...</p> <p>We currently have 4 benchmark scenarios, each of them is one of the samples in the sample app, and picked to cover different things:</p> <ul> <li>Scaffold. The simple example, where the app bar and bottom navigation bar are blurred, with a scrollable list. This example uses rectangular haze areas.</li> <li>Scaffold, with progressive. Same as Scaffold, but using a progressive blur.</li> <li>Images List. Each item in the list has it's own <code>hazeSource</code> and <code>hazeEffect</code>. As each item has it's own <code>hazeSource</code>, the internal haze state does not change all that much (the list item content moves, but the <code>hazeEffect</code> doesn't in terms of local coordinates). This is more about multiple testing <code>RenderNode</code>s. This example uses rounded rectangle haze areas (i.e. we use <code>clipPath</code>).</li> <li>Credit Card. A simple example, where the user can drag the <code>hazeEffect</code>. This tests how fast Haze's internal state invalidates and propogates to the <code>RenderNode</code>s. This example uses rounded rectangle haze areas like 'Images List'.</li> </ul> <p>Test setup</p> <p>All of the tests were ran with 16 iterations on a Pixel 6, running the latest version of Android available.</p> <p>As with all benchmark tests, the results are only true for the exact things being tested. Using Haze in your own applications may result in different performance characteristics, so it is wise to write your own performance tests to validate the impact to your apps. Benchmark tests will always have variability in them too, so don't take the numbers listed below as exact values. Look at them more as a guide.</p> <p>The numbers listed below the P90 frame durations in milliseconds, which tend to be a good indicator of frames where a user interaction is happening (scrolling, etc). However, as these are the P90 values, these indicate the longest 10% frame durations, and thus are (probably) not indicitive of the performance which users see most of the time. It all depends on the distribution of the frame durations, but we're quickly getting into entry-level statistics, which is beyond what we're trying to document here.</p>"},{"location":"performance/#cost-of-haze","title":"Cost of Haze","text":"<p>We can also measure the rough cost of using Haze in the same samples. Here we've ran the same tests, with Haze being completely disabled:</p> Test 1.0.x (disabled) 1.0.x Difference Scaffold 7.5 ms 9.7 ms +29% Images List 6.6 ms 9.6 ms +45% Credit Card 6.6 ms 13.1 ms +98%"},{"location":"performance/#cost-of-features","title":"Cost of features","text":"<p>We can also measure the rough cost of using features, such as input scale, progressive and masking:</p> Test P90 frame duration (ms) Difference (in Haze cost) Scaffold 9.7 ms - Scaffold (inputScale = 0.5) 9.6 ms -5% Scaffold (masked) 9.8 ms +5% Scaffold (progressive) 9.7 ms 0% Scaffold (progressive, inputScale = 0.5) 9.4 ms -14% <p>The values are all very close, with the differences easily being within a margin of error, so don't use these differences as exact values (especially with the variability that we mentioned above). I think there's two big take aways here though:</p> <ul> <li>Masking has a negligible effect on frame durations.</li> <li>Progessive has a negligible effect on frame durations, when using using our custom blur shader (Android SDK 34+, all other platforms).</li> <li>Input Scale has a small but positive effect on frame duration.</li> </ul> <p>Full results</p> <p>For those interested, you can find the full results in this spreadsheet.</p>"},{"location":"platforms/","title":"Platforms","text":"<p>Haze works on all platforms which Compose Multiplatform supports.</p> <p>Compose Multiplatform platforms</p> <p>Please note, the list of platforms which Compose Multiplatform (CMP) supports is different to the platforms which Kotlin Multiplatform supports. Please stop raising issues about adding \"MacOS\" support; it is not supported (directly) by CMP.</p>"},{"location":"platforms/#android","title":"Android","text":""},{"location":"platforms/#android-13","title":"Android 13+","text":"<p>SDK Levels: 33+</p> <p>Haze is in its optimal environment for all use cases when running on recent versions of Android.</p>"},{"location":"platforms/#android-12-12l","title":"Android 12 &amp; 12L","text":"<p>SDK Levels: 31 &amp; 32</p> <p>When running on these versions of Android, Haze needs to use a few workarounds:</p>"},{"location":"platforms/#hazeprogressive","title":"HazeProgressive","text":"<p>Only linear gradient HazeProgressive effects are supported, and are implemented via a mechanism which draws the effect multiple times. This can hurt performance, so it is recommended to verify the performance of this yourself.</p> <p>You can disable this behavior by setting the preferPerformance property. When set to true, the progressive 'effect' will instead be drawn via a mask:</p> <pre><code>LargeTopAppBar(\n  // ...\n  modifier = Modifier.hazeEffect(hazeState) {\n    progressive = HazeProgressive.verticalGradient(\n      // ...\n      preferPerformance = true,\n    )\n  }\n)\n</code></pre> <p>All other progressive types will fallback to using a mask when running on Android 12 &amp; 12L.</p>"},{"location":"platforms/#android-12-and-below","title":"Android 12 and below","text":"<p>When running on Android 12 and below, we can not rely on RenderNode (which GraphicsLayer use internally) re-painting when content changes. For this reason, Haze previously disabled blurring effects on Android 12 by default, as we could not guarantee that it works.</p> <p>As of Haze v1.6 and newer though, we have a mechanism allowing Haze to re-enable blurring on Android 12 by default.</p> <p>This same mechanism is required to enable blurring to work on Android 11 and below too, when enabled (more on that below).</p> Manual invalidation mechanism <p>The mechanism involves Haze manually invalidating the graphics layers manually when necessary, using 'pre draw' events. This document is not the place to go deep into 'pre draw' events, but the main point here is that Compose does not send a pre-draw event itself, so Haze needs to use the host view system's listener (via ViewTreeObserver). This means that we are not subscribing to when our particular draw nodes are about to draw, but instead we are called whenever anything is about to be drawn on screen.</p> <p>The TL;DR of this section is that the event we listen to is a lot more global than we need. Ideally we would have a way to know when the <code>hazeSource</code> node is about to be drawn (and only when the node is about to be drawn) but that functionality does not exist.</p> <p>The downside to this mechanism is that it will trigger more invalidations than what is really needed. We're effectively negating some of the granular invalidations which Compose enables through it's phasing system. It should not cause your apps any performance issues, but you can disable blurring if necessary. See docs here for more information.</p>"},{"location":"platforms/#android-11-and-below","title":"Android 11 and below","text":"<p>SDK Levels: 30 and below</p> <p>On Android 11 and below, blurring by default is disabled. When disabled, a scrim (translucent overlay) implementation is used which looks like so:</p> <p></p>"},{"location":"platforms/#renderscript-blurring","title":"RenderScript blurring","text":"<p>\ud83c\udd95 in Haze 1.6 is an implementation of blurring which uses RenderScript.</p> <p>Experimental</p> <p>Blurring on Android 11 and below is not enabled by default, and is considered experimental.</p> <p>We may enable it by default in the future, or we may just remove it all together if it is deemed too unstable. Lots of testing and feedback is required, so please raise issues if you find any problems.</p> <p>Using RenderScript does come with some drawbacks compared to RenderEffect which we use on Android 12+. The biggest is that RenderScript and your drawn content are two distinct things, which means that for Haze to blur your composable content, we need to draw it somewhere which RenderScript can read, and then also write to. This results in copying of data, which makes this blurring implementation quite slow.</p> <p>As this implementation is slow, it means that processing a frame can easily take longer than our allocated frame budget time. To combat this, Haze uses a background thread to process and blur frames, but this comes with the drawback that content updates will nearly always be a frame (or more) behind. In addition to this, Haze will only ever process one frame at a time. If a new draw is called and Haze is still processing a previous frame, Haze will simply ignore it. This is to ensure that Haze does not unintentionally create a queue of frames, and potentially overwhelm the device.</p> <p>To the user the blur effect may look 'laggy' or slow to update, especially when the background content changes a lot. This is the compromise which we have decided to make in Haze, but in my opinion it is more than good enough for the majority of use cases.</p> <p></p> <p>As mentioned above, blurring on Android 11 and below is not enabled by default. See the docs here on how to enable it.</p> <p>One final thing to note is that Haze needs to use the \"Manual invalidation mechanism\" mentioned above for this to work.</p> <p>Thanks</p> <p>Big thanks to Serhii Yaremych for his help on this, as we have managed to get an optimized 'content write' working. \ud83d\ude80</p>"},{"location":"platforms/#desktop","title":"Desktop","text":"<p>Desktop JVM is a Compose Multiplatform target which is built upon Skiko, so see the Skiko docs below.</p>"},{"location":"platforms/#ios","title":"iOS","text":"<p>iOS is a Compose Multiplatform target which is built upon Skiko, so see the Skiko docs below.</p>"},{"location":"platforms/#web","title":"Web","text":"<p>Compose for Web is based on Kotlin/Wasm, and is a Compose Multiplatform target which is built upon Skiko, so see the Skiko docs below.</p>"},{"location":"platforms/#skiko","title":"Skiko","text":"<p>Most of the Compose Multiplatform targets are built on top of Skiko, which is a bundled version of the Skia Graphics Library with Kotlin bindings.</p> <p>As Skiko bundles Skia into the app binaries, this means that the host platform we're running on is not particularly important to Haze. All of that is hopefully handled by the platform integration layers in CMP, Skiko and Skia.</p> <p>The most important thing when running on these platforms is the library versions we're built against. Haze is always built, tested and released against the latest stable version of Compose Multiplatform.</p> <p>Other than that, running on a Skiko-backed platform means that Haze is running in its optimal environment.</p>"},{"location":"platforms/#using-pre-release-versions-of-compose-multiplatform","title":"Using pre-release versions of Compose Multiplatform","text":"<p>We do occasionally verify against pre-release versions of CMP, but it's not something we guarantee. If you want to use a pre-release version of Compose Multiplatform, then please test it thoroughly.</p>"},{"location":"recipes/","title":"Recipes","text":""},{"location":"recipes/#scaffold","title":"Scaffold","text":"<p>Blurring the content behind app bars is a common use case, so how can we use Haze with <code>Scaffold</code>? It's pretty much the same as above:</p> <p>Multiple hazeEffects</p> <p>Note: We are using multiple <code>hazeEffect</code>s in this example. You can actually use an abitrary number of <code>hazeEffect</code>s.</p> <pre><code>val hazeState = rememberHazeState()\n\nScaffold(\n  topBar = {\n    TopAppBar(\n      // Need to make app bar transparent to see the content behind\n      colors = TopAppBarDefaults.largeTopAppBarColors(Color.Transparent),\n      modifier = Modifier\n        .hazeEffect(state = hazeState)\n        .fillMaxWidth(),\n    ) {\n      /* todo */\n    }\n  },\n  bottomBar = {\n    NavigationBar(\n      containerColor = Color.Transparent,\n      modifier = Modifier\n        .hazeEffect(state = hazeState)\n        .fillMaxWidth(),\n    ) {\n      /* todo */\n    }\n  },\n) {\n  LazyVerticalGrid(\n    modifier = Modifier\n      .hazeSource(\n        state = hazeState,\n        style = HazeDefaults.style(backgroundColor = MaterialTheme.colorScheme.surface),\n      ),\n  ) {\n    // todo\n  }\n}\n</code></pre>"},{"location":"recipes/#sticky-headers","title":"Sticky Headers","text":"<p>The <code>stickyHeader</code> functionality on <code>LazyColumn</code> and friends is very useful, but unfortunately the limitations of Haze means that blurring the list contents for the header background is tricky.</p> <p>Since we can not use <code>Modifier.hazeSource</code> on the <code>LazyColumn</code> and <code>Modifier.hazeEffect</code> on items, as we would get into recursive drawing, we need to get a bit more creative.</p> <p>Since we can have multiple nodes using <code>Modifier.hazeSource</code>, we can use the modifier on all non-header items, and then use <code>hazeEffect</code> as normal on the <code>stickyHeader</code>:</p> <pre><code>val hazeState = rememberHazeState()\n\nLazyColumn(...) {\n  stickyHeader {\n    Header(\n      modifier = Modifier\n        .hazeEffect(state = hazeState),\n    )\n  }\n\n  items(list) { item -&gt;\n    Foo(\n      modifier = Modifier\n        .hazeSource(hazeState),\n    )\n  }\n}\n</code></pre> <p>A more complete example can be found here: ListWithStickyHeaders.</p> <p></p>"},{"location":"usage/","title":"Usage","text":"<p>Haze works has two modes: 'background blurring', and 'foreground blurring', and the way you use them is extremely similar. Most of this page will assume that you wish to use 'background blurring', as it's the most common, but there is a section at the bottom of this page to outline how to perform 'foreground blurring'.</p> <p>Haze is implemented through two Compose Modifiers: Modifier.hazeSource and Modifier.hazeEffect.</p> <p>The most basic usage would be something like:</p> <pre><code>val hazeState = rememberHazeState()\n\nBox {\n  LazyColumn(\n    modifier = Modifier\n      .fillMaxSize()\n      // Pass it the HazeState we stored above\n      .hazeSource(state = hazeState)\n  ) {\n    // todo\n  }\n\n  LargeTopAppBar(\n    // Need to make app bar transparent to see the content behind\n    colors = TopAppBarDefaults.largeTopAppBarColors(Color.Transparent),\n    modifier = Modifier\n      // We use hazeEffect on anything where we want the background\n      // blurred.\n      .hazeEffect(state = hazeState, style = HazeMaterials.ultraThin())\n      .fillMaxWidth(),\n  )\n}\n</code></pre> <p>You will notice that were using a style created by <code>HazeMaterials.ultraThin()</code>. The HazeMaterials are sets of prebuilt styles that are available as an add-on library.</p> <p>If you do not provide an explicit style, the default values will provide basic blurring, but no tinting. It's recommended to use one of the materials linked above, or a custom style which meets your requirements.</p>"},{"location":"usage/#styling","title":"Styling","text":"<p>Haze has support for customizing the resulting effect, which is performed via the HazeStyle class, or the lambda block provided to <code>hazeEffect</code>.</p> <p>Styles can be provided in a number of different ways:</p> <ul> <li>LocalHazeStyle composition local.</li> <li>The style parameter on Modifier.hazeEffect.</li> <li>By setting the relevant property in the optional HazeEffectScope lambda <code>block</code>, passed into Modifier.hazeEffect.</li> </ul>"},{"location":"usage/#hazeeffectscope","title":"HazeEffectScope","text":"<p>We now have a parameter on <code>Modifier.hazeEffect</code> which allow you to provide a lambda block, for controlling all of Haze's styling parameters. It is similar to concept to <code>Modifier.graphicsLayer { ... }</code>.</p> <p>It's useful for when you need to update styling parameters, using values derived from other state. Here's an example which fades the effect as the user scrolls:</p> <pre><code>FooAppBar(\n  ...\n  modifier = Modifier\n    .hazeEffect(state = hazeState) {\n      alpha = if (listState.firstVisibleItemIndex == 0) {\n        listState.layoutInfo.visibleItemsInfo.first().let {\n          (it.offset / it.size.height.toFloat()).absoluteValue\n        }\n      } else {\n        alpha = 1f\n      }\n    },\n)\n</code></pre>"},{"location":"usage/#styling-resolution","title":"Styling resolution","text":"<p>As we a few different ways to set styling properties, it's important to know how the final values are resolved.</p> <p>Each styling property (such as <code>blurRadius</code>) is resolved seperately, and the order of precedence for each property is as follows, in order:</p> <ul> <li>Value set in HazeEffectScope, if specified.</li> <li>Value set in style provided to hazeEffect (or HazeEffectScope.style), if specified.</li> <li>Value set in the LocalHazeStyle composition local.</li> </ul>"},{"location":"usage/#styling-properties","title":"Styling properties","text":""},{"location":"usage/#blur-radius","title":"Blur Radius","text":"<p>The blur radius controls how strong the blur effect is. This defaults to <code>20.dp</code> but can be customized as needed. Larger values might be needed to keep foreground control (such as text) legible and accessible.</p>"},{"location":"usage/#tint","title":"Tint","text":"<p>A tint effect is applied, primarily to maintain contrast and legibility. By default we use the provided background color at 70% opacity. You may wish to use a different color or opacity. You provide multiple tints, which will be applied in sequence.</p>"},{"location":"usage/#noise","title":"Noise","text":"<p>Some visual noise is applied, to provide some tactility. This is completely optional, and defaults to a value of <code>0.15f</code> (15% strength). You can disable this by providing <code>0f</code>.</p>"},{"location":"usage/#progressive-aka-gradient-blurs","title":"Progressive (aka gradient) blurs","text":"<p>Progressive blurs allow you to provide a visual effect where the blur radius is varied over a dimension. You may have seen this effect used on iOS.</p> <p></p> <p>Progressive blurs can be enabled by setting the <code>progressive</code> property on HazeEffectScope. The API is very similar to the Brush gradient APIs, so it should feel familiar.</p> <pre><code>LargeTopAppBar(\n  // ...\n  modifier = Modifier.hazeEffect(hazeState) {\n    progressive = HazeProgressive.verticalGradient(startIntensity = 1f, endIntensity = 0f)\n  }\n)\n</code></pre> <p>There are a number of different types of progressive effect supported in Haze:</p>"},{"location":"usage/#linear-gradient","title":"Linear Gradient","text":"<p>Class documentation: HazeProgressive.LinearGradient</p> <p>Linear gradients, usually vertical or horizontal, but you can set any angle.</p> <p>There are a few builder functions on <code>HazeProgressive</code>, enabling common use cases: verticalGradient and horizontalGradient.</p> <pre><code>LargeTopAppBar(\n  // ...\n  modifier = Modifier.hazeEffect(hazeState) {\n    progressive = HazeProgressive.verticalGradient(startIntensity = 1f, endIntensity = 0f)\n  }\n)\n</code></pre>"},{"location":"usage/#radial-gradient","title":"Radial Gradient","text":"<p>Class documentation: HazeProgressive.RadialGradient</p> <p>A radial gradient, with a defined center and radius.</p> <pre><code>LargeTopAppBar(\n  // ...\n  modifier = Modifier.hazeEffect(hazeState) {\n    progressive = HazeProgressive.RadialGradient()\n  }\n)\n</code></pre>"},{"location":"usage/#custom-brush","title":"Custom Brush","text":"<p>Class documentation: HazeProgressive.Brush</p> <p>A custom progressive effect, using a given Brush as the alpha mask for the entire effect.</p> <p>Commonly this will be used to create along with a custom Shader, so we have a builder function to make this easier: forShader</p> <pre><code>LargeTopAppBar(\n  // ...\n  modifier = Modifier.hazeEffect(hazeState) {\n    progressive = HazeProgressive.forShader { size -&gt;\n      // TODO: return platform-specific Shader using the given size\n    }\n  }\n)\n</code></pre> <p>The Shader class is not commonized in Compose Multiplatform (it's an alias to the platform specific class), therefore you will likely need to use <code>expect</code> and <code>actual</code> functions to build the relevant shader.</p> <p>Performance of Progressive</p> <p>Please be aware that using progressive blurring does come with a performance cost. Please see the Performance page for up-to-date benchmarks.</p> <p>As a quick summary: on Android SDK 33+ and other platforms, the cost is about 25% more than non-progressive. On Android SDK 32 it is about 2x. If performance is critical, you may wish to look at the masking functionality below.</p>"},{"location":"usage/#masking","title":"Masking","text":"<p>You can provide any Brush, which will be used as a mask when the final effect is drawn.</p> <pre><code>LargeTopAppBar(\n  // ...\n  modifier = Modifier.hazeEffect(hazeState) {\n    mask = Brush.verticalGradient(...)\n  }\n)\n</code></pre> <p>Mask vs Progressive</p> <p>When you provide a gradient brush as a mask, the effect is visually similar to a gradient blur. The difference is that the effect is faded through opacity only, and may not feel as refined. However, it is much faster than progressive blurring, having a negligible cost.</p>"},{"location":"usage/#input-scale","title":"Input Scale","text":"<p>You can provide an input scale value which determines how much the content is scaled in both the x and y dimensions, allowing the blur effect to be potentially applied over scaled-down content (and thus less pixels), before being scaled back up and drawn at the original size.</p> <p></p> <pre><code>LargeTopAppBar(\n  // ...\n  modifier = Modifier.hazeEffect(hazeState) {\n    inputScale = HazeInputScale.Auto\n  }\n)\n</code></pre> <p>HazeInputScale has a number of different options:</p> <ul> <li><code>HazeInputScale.None</code>: Turns off input scaling (default)</li> <li><code>HazeInputScale.Auto</code>: Turns on input scaling, with automatic values derived underneath.</li> <li><code>HazeInputScale.Fixed(...)</code>: Turns on input scaling, using the value you pass in.</li> </ul> <p>When using a <code>Fixed</code> value, less than 1.0 may improve performance, at the sacrifice of quality and crispness. As always, run your own benchmarks as to whether this compromise is worth it.</p> <p>If you're looking for a good value to experiment with, <code>0.66</code> results in a reduction in total resolution of ~55%, while being visually imperceptible to most people (probably).</p> <p>The minimum value I would realistically use is somewhere in the region of <code>0.33</code>, which results in the total pixel count of only 11% of the original content. This is likely to be visually different to no scaling, but depending on the styling parameters, it will be visually pleasing to the user.</p>"},{"location":"usage/#overlapping-blurred-layouts","title":"Overlapping blurred layouts","text":"<p>A layout node can use both a <code>Modifier.hazeEffect</code>, drawing a blurred effect from other areas, and use <code>Modifier.hazeSource</code> to draw itself for other <code>hazeEffect</code> users.</p> <p>This nested functionality sounds complicated, but in reality it enables a simple use case: overlapping blurred layout nodes.</p> <p></p> <p>This code to implement this is like below. You can see that the <code>CreditCard()</code> nodes use both the <code>hazeSource</code> and <code>hazeEffect</code> modifiers. Pay attention to the modifier order here.</p> <pre><code>Box {\n  val hazeState = rememberHazeState()\n\n  Background(\n    modifier = Modifier\n      .hazeSource(hazeState, zIndex = 0f)\n  )\n\n  // Rear card\n  CreditCard(\n    modifier = Modifier\n      .hazeSource(hazeState, zIndex = 1f)\n      .hazeEffect(hazeState)\n  )\n\n  // Middle card\n  CreditCard(\n    modifier = Modifier\n      .hazeSource(hazeState, zIndex = 2f)\n      .hazeEffect(hazeState),\n  )\n\n  // Front card\n  CreditCard(\n    modifier = Modifier\n      .hazeSource(hazeState, zIndex = 3f)\n      .hazeEffect(hazeState)\n  )\n}\n</code></pre> <p>You will notice that there's something different here, the <code>zIndex</code> parameter.</p> <p>For this to work you need to pass in the <code>zIndex</code> parameter of the node. It doesn't matter if you use <code>Modifier.zIndex</code>, or the implicit ordering from the layout, you need to explicitly pass in a valid <code>zIndex</code> value.</p>"},{"location":"usage/#zindex","title":"zIndex","text":"<p>Internally, the zIndex value is how Haze knows which layers to draw in which nodes. By default, <code>hazeEffect</code> will draw all layers with a <code>zIndex</code> less than the value of the sibling <code>Modifier.hazeSource</code>. So in the example above, the middle card (<code>zIndex</code> of 2) will draw the rear card (<code>zIndex</code> of 1) and background (<code>zIndex</code> of 0).</p> <p>This default behavior is usually the correct behavior for all use cases, but you can modify this behavior via the <code>canDrawArea</code> parameter, which acts as a filter when set:</p> <pre><code>CreditCard(\n  modifier = Modifier\n    .hazeSource(hazeState, zIndex = 2f, key = \"foo\")\n    .hazeEffect(hazeState) {\n      canDrawArea = { area -&gt;\n        // return true to draw\n        area.key != \"foo\"\n      }\n    },\n)\n</code></pre> <p>You'll notice that we're using another parameter here, <code>key</code>. This just acts as an ID for the node allowing easier filtering. It has serves no other purpose.</p>"},{"location":"usage/#deep-ui-hierarchies","title":"Deep UI hierarchies","text":"<p>You can pass <code>HazeState</code> objects to composables as arguments. For example:</p> <pre><code>@Composable\nfun HazeExample(modifier: Modifier = Modifier) {\n    val hazeState = rememberHazeState()\n\n    Box(modifier = modifier) {\n        Background(\n          hazeState = hazeState,\n          modifier = Modifier.fillMaxSize()\n        )\n        Foreground(\n          hazeState = hazeState,\n          modifier = Modifier.fillMaxSize()\n        )\n    }\n}\n</code></pre> <p>You can then use the argument to configure <code>hazeSource</code> and <code>hazeEffect</code>:</p> <pre><code>@OptIn(ExperimentalHazeMaterialsApi::class)\n@Composable\nfun Foreground(\n  hazeState: HazeState,\n  modifier: Modifier = Modifier\n) {\n    Box(modifier = modifier) {\n        Text(\n            text = stringResource(R.string.haze_text),\n            modifier = modifier\n                .align(Alignment.Center)\n                .wrapContentSize()\n                .hazeEffect(\n                    state = hazeState,\n                    style = HazeMaterials.ultraThin()\n                )\n        )\n    }\n}\n</code></pre> <p>However, this can problematic in deep hierarchies when you need to pass the <code>HazeState</code> instances down through many levels. To avoid this you can use a composition local to pass the <code>HazeState</code> down to the descendants in the hierarchy:</p> <pre><code>val LocalHazeState = compositionLocalOf { HazeState() }\n\n@Composable\nfun HazeExample(modifier: Modifier = Modifier) {\n    val hazeState = rememberHazeState()\n\n    CompositionLocalProvider(LocalHazeState provides hazeState) {\n        Box(modifier = modifier) {\n            Background(modifier = Modifier.fillMaxSize())\n            Foreground(modifier = Modifier.fillMaxSize())\n        }\n    }\n}\n\n@OptIn(ExperimentalHazeMaterialsApi::class)\n@Composable\nfun Foreground(modifier: Modifier = Modifier) {\n  Box(modifier = modifier) {\n    Text(\n      text = stringResource(R.string.haze_text),\n      modifier = modifier\n        .align(Alignment.Center)\n        .wrapContentSize()\n        .hazeEffect(\n          state = LocalHazeState.current,\n          style = HazeMaterials.ultraThin()\n        )\n    )\n  }\n}\n</code></pre>"},{"location":"usage/#dialogs","title":"Dialogs","text":"<p>You can use Haze with <code>Dialog</code>s, to blur dialog backgrounds over content. A sample is available: DialogSample.</p>"},{"location":"usage/#enabling-blur","title":"Enabling blur","text":"<p>Whether blurring is enabled or not can be controlled in two ways:</p> <ul> <li>The HazeState: <code>rememberHazeState(blurEnabled = true)</code>. This affects all modifiers attached to it.</li> <li>On each individual <code>hazeEffect</code> like so:</li> </ul> <pre><code>Modifier.hazeEffect(...) {\n    blurEnabled = true\n}\n</code></pre>"},{"location":"usage/#foreground-blurring","title":"Foreground blurring","text":"<p>As mentioned above, Haze also supports foreground blurring, where the content on the layout itself will be blurred by Haze and then drawn. You might be wondering why this is at the bottom of this page? Well nearly everything listed above is also applicable for 'foreground blurring'.</p> <p>The only difference with foreground blurring is that you do not need to use a <code>HazeState</code> or <code>Modifier.hazeSource</code>, you only need a <code>Modifier.hazeEffect</code>.</p> <p>To perform foreground blurring on a layout, you can do the following:</p> <pre><code>@Composable\nfun HazeExample(modifier: Modifier = Modifier) {\n  Box(modifier = modifier) {\n    Foreground(\n      modifier = Modifier\n        // Note that we do NOT pass in a HazeState\n        .hazeEffect {\n          // Use all of the same features as above\n          tints = // ...\n          progressive = // ...\n        }\n        .fillMaxSize()\n    )\n  }\n}\n</code></pre>"},{"location":"usage/#screenshot-testing","title":"Screenshot testing","text":"<p>Haze support screenshot testing. It is itself heavily screenshot tested, using Roborazzi on both JVM Desktop and Android (Robolectric).</p> <p>When using Robolectric it is important to take note of what SDK Level you are running against. When running on Android, Haze uses the built-in RenderEffect.createBlurEffect using the CLAMP tile mode. This enables the blur effect to work correctly at the edges of the area. Support for the CLAMP tile mode was only added in Robolectric recently, and requires your tests to be running against SDK 35 (or above).</p> <p>If your tests are running against an earlier SDK Level (say 33), you may find that the edges any blurred areas look strange and incorrect. This only affects your tests though. The fix is fairly simple: update your screenshot tests to use SDK Level 35+, like so: <code>@Config(sdk = [35])</code>.</p> <p>Other host screenshot testing libraries may work, but they have not tested and I have no bandwidth to support them. YMMV.</p>"},{"location":"using-snapshot-version/","title":"Using a Snapshot Version of the Library","text":""},{"location":"using-snapshot-version/#using-a-snapshot-version-of-the-library","title":"Using a Snapshot Version of the Library","text":"<p>If you would like to depend on the cutting edge version of the library, you can use the snapshot versions that are published to Sonatype Central Repository's snapshot repository. These are updated on every commit to <code>main</code>.</p> <p>To do so:</p> <pre><code>repositories {\n    // ...\n    maven(\"https://central.sonatype.com/repository/maven-snapshots\")\n}\n\ndependencies {\n    // Check the latest SNAPSHOT version from the link above\n    implementation(\"dev.chrisbanes.haze:haze:XXX-SNAPSHOT\")\n}\n</code></pre>"}]}