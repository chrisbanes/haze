{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Overview","text":"<p>Haze is a library providing visual effects (such as blur) for Compose Multiplatform.</p> <p></p> <p>Haze is built with Compose Multiplatform, meaning that it supports different platforms:</p> Platform Supported Android \u2705 Desktop (JVM) \u2705 iOS \u2705 Wasm \u2705 JS/Canvas \u2705 <p>You can also see it in action in the Tivi app:</p> <p></p>"},{"location":"#download","title":"Download","text":"<pre><code>repositories {\n    mavenCentral()\n}\n\ndependencies {\n    // Core library. Usually don't need this...\n    implementation(\"dev.chrisbanes.haze:haze:&lt;version&gt;\")\n\n    // For blur effects:\n    implementation(\"dev.chrisbanes.haze:haze-blur:&lt;version&gt;\")\n}\n</code></pre> <p>Using Effects</p> <p>Haze v2 uses a modular architecture where effects are provided as separate modules. The core <code>haze</code> module provides the infrastructure, while effects like blur are in dedicated modules (e.g., <code>haze-blur</code>). If you want to use blur effects, you need the <code>haze-blur</code> dependency. The core <code>haze</code> module alone provides just the base infrastructure for visual effects.</p> <p>See Architecture for more details about the effect system.</p>"},{"location":"#acknowledgements","title":"Acknowledgements","text":"<p>In previous versions, the Skia-backed implementation (used on iOS and Desktop) was heavily influenced by Kirill Grouchnikov's explorations on Compose Desktop. He wrote about it in his Shader based render effects in Compose Desktop with Skia blog post.</p> <p>The Android implementation was inspired by the techniques documented by Chet Haase and Nader Jawad in the RenderNode for Bigger, Better Blurs blog post.</p> <p>Thank you all.</p>"},{"location":"#license","title":"License","text":"<pre><code>Copyright 2024 Chris Banes\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n    https://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n</code></pre>"},{"location":"architecture/","title":"Architecture","text":""},{"location":"architecture/#architecture","title":"Architecture","text":"<p>Haze v2 is built around a flexible architecture that supports multiple visual effects beyond just blur. This document explains the core concepts and how to extend Haze with custom effects.</p>"},{"location":"architecture/#visual-effects-framework","title":"Visual Effects Framework","text":"<p>At the heart of Haze is the <code>VisualEffect</code> interface, which defines a common contract for all visual effects. This allows Haze to be extensible and support different types of effects on different platforms.</p>"},{"location":"architecture/#visualeffect-interface","title":"VisualEffect Interface","text":"<p>The <code>VisualEffect</code> interface is the base contract for all visual effects. Implementations provide platform-specific rendering logic for creating the desired visual effect.</p> <pre><code>interface VisualEffect {\n    fun attach(context: VisualEffectContext)\n    fun update(context: VisualEffectContext, scope: HazeEffectScope)\n    fun detach()\n    fun draw(canvas: Canvas, context: VisualEffectContext)\n}\n</code></pre> <ul> <li>attach: Called when the effect is first attached to a composable. Implementations can initialize platform-specific resources.</li> <li>update: Called whenever styling parameters change (from <code>HazeEffectScope</code>).</li> <li>detach: Called when the effect is removed. Implementations should clean up resources.</li> <li>draw: Renders the effect to the provided canvas.</li> </ul>"},{"location":"architecture/#hazeeffectscope","title":"HazeEffectScope","text":"<p>The <code>HazeEffectScope</code> is a receiver scope passed to the lambda block of <code>Modifier.hazeEffect</code>. It provides common properties that apply across all effects:</p> <pre><code>modifier = Modifier.hazeEffect(state) {\n    inputScale = HazeInputScale.Auto\n    drawContentBehind = true\n    // Effect-specific configuration\n}\n</code></pre> <p>Common properties include: - inputScale: Controls the resolution at which the effect is rendered (performance optimization) - drawContentBehind: Whether to draw the source content before applying the effect - canDrawArea: Optional filter to control which layers are included in the effect</p>"},{"location":"architecture/#modular-effect-architecture","title":"Modular Effect Architecture","text":"<p>Each effect is provided in a separate module, allowing you to include only the effects you need:</p> <ul> <li>haze - Core infrastructure (<code>VisualEffect</code>, <code>HazeState</code>, modifiers)</li> <li>haze-blur - Blur effect implementation</li> <li>haze-materials - Pre-built blur styles (Material, Cupertino, Fluent)</li> <li>haze-utils - Shared utilities for platform-specific rendering</li> </ul>"},{"location":"architecture/#module-dependencies","title":"Module Dependencies","text":"<pre><code>haze (core)\n\u251c\u2500\u2500 haze-blur (blur effect)\n\u2502   \u2514\u2500\u2500 haze-materials (blur styles)\n\u2514\u2500\u2500 haze-utils (platform utilities)\n</code></pre> <p>Future effects will follow the same pattern: - haze-liquidglass - Refraction-based liquid glass effect - Custom third-party effect modules</p>"},{"location":"architecture/#effect-registration-pattern","title":"Effect Registration Pattern","text":"<p>Effect implementations provide builder extension functions on <code>HazeEffectScope</code> for convenient configuration:</p> <pre><code>// Blur effect example\nmodifier = Modifier.hazeEffect(state) {\n    blurEffect {\n        style = HazeMaterials.thin()\n        progressive = HazeProgressive.verticalGradient(...)\n    }\n}\n</code></pre> <p>Future effects will follow the same pattern: </p><pre><code>modifier = Modifier.hazeEffect(state) {\n    liquidglassEffect {\n        // liquidglass-specific properties\n    }\n}\n</code></pre>"},{"location":"architecture/#platform-support","title":"Platform Support","text":"<p>Haze provides a <code>VisualEffectContext</code> that gives effects access to platform-specific capabilities:</p> <pre><code>interface VisualEffectContext {\n    val size: IntSize\n    val density: Float\n    val layoutDirection: LayoutDirection\n    val coroutineScope: CoroutineScope\n    // Platform-specific rendering utilities\n}\n</code></pre> <p>Effects can detect platform capabilities and provide the best implementation available. For example:</p> <ul> <li>Android 13+: Uses <code>RenderEffect.createBlurEffect()</code></li> <li>Android 12: Uses <code>RenderNode</code> with shader-based blur</li> <li>Android 11 and below: Uses Renderscript blur</li> <li>Desktop/iOS: Uses Skia shaders</li> <li>Web: Uses canvas filters</li> <li>WASM: Uses custom shader implementations</li> </ul>"},{"location":"architecture/#implementing-custom-effects","title":"Implementing Custom Effects","text":"<p>To create a custom effect, implement the <code>VisualEffect</code> interface and provide a builder extension:</p> <pre><code>class CustomVisualEffect : VisualEffect {\n    override fun attach(context: VisualEffectContext) {\n        // Initialize resources\n    }\n\n    override fun update(context: VisualEffectContext, scope: HazeEffectScope) {\n        // Update with new styling parameters\n    }\n\n    override fun detach() {\n        // Clean up resources\n    }\n\n    override fun draw(canvas: Canvas, context: VisualEffectContext) {\n        // Render the effect\n    }\n}\n\n// Provide a builder extension\nfun HazeEffectScope.customEffect(block: CustomVisualEffect.() -&gt; Unit = {}) {\n    visualEffect = CustomVisualEffect().apply(block)\n}\n</code></pre> <p>See the haze-blur module for a complete reference implementation.</p>"},{"location":"architecture/#styling-resolution","title":"Styling Resolution","text":"<p>When multiple sources of styling are provided, Haze resolves values using the following precedence:</p> <ol> <li>Value set directly in the effect builder (e.g., <code>blurEffect { }</code>)</li> <li>Value set via the <code>style</code> property</li> <li>Value set via <code>LocalHazeStyle</code> composition local</li> <li>Default value</li> </ol> <p>This allows flexible composition of styles from different sources while maintaining predictable behavior.</p>"},{"location":"changelog/","title":"Changelog","text":""},{"location":"changelog/#changelog","title":"Changelog","text":"<p>All notable changes to this project are documented here.</p> <p>The format is based on Keep a Changelog, and this project adheres to Semantic Versioning.</p>"},{"location":"changelog/#2.0.0","title":"2.0.0 WIP TBD","text":"<p>Major architectural refactor introducing a pluggable visual effects system for improved modularity and extensibility.</p>"},{"location":"changelog/#highlights","title":"Highlights","text":""},{"location":"changelog/#new-visualeffect-interface","title":"New <code>VisualEffect</code> Interface","text":"<p>Haze now uses a <code>VisualEffect</code> interface that separates the core effect infrastructure from specific effect implementations. This enables better separation of concerns, a smaller core module, and potential for custom visual effects in the future.</p>"},{"location":"changelog/#new-haze-blur-module","title":"New <code>haze-blur</code> Module","text":"<p>All blur functionality has been extracted from the core <code>haze</code> module into a separate <code>haze-blur</code> module:</p> <pre><code>implementation(\"dev.chrisbanes.haze:haze:2.0.0\")\nimplementation(\"dev.chrisbanes.haze:haze-blur:2.0.0\")\n</code></pre>"},{"location":"changelog/#new-blureffect-api","title":"New <code>blurEffect {}</code> API","text":"<p>All blur-related properties now require a <code>blurEffect {}</code> wrapper:</p> <pre><code>Modifier.hazeEffect(state = hazeState) {\n  blurEffect {\n    blurRadius = 20.dp\n    tints = listOf(HazeTint(...))\n  }\n}\n</code></pre>"},{"location":"changelog/#breaking-changes","title":"Breaking Changes","text":"<ul> <li>New module dependency: Blur functionality now requires the <code>haze-blur</code> module</li> <li>API nesting: Blur properties (<code>blurRadius</code>, <code>tints</code>, <code>style</code>, <code>noiseFactor</code>, <code>progressive</code>, <code>mask</code>, etc.) now require <code>blurEffect {}</code> wrapper</li> <li>Package changes: Blur classes moved to <code>dev.chrisbanes.haze.blur</code> package:</li> <li><code>HazeStyle</code> \u2192 <code>dev.chrisbanes.haze.blur.HazeStyle</code></li> <li><code>HazeTint</code> \u2192 <code>dev.chrisbanes.haze.blur.HazeTint</code></li> <li><code>HazeProgressive</code> \u2192 <code>dev.chrisbanes.haze.blur.HazeProgressive</code></li> <li><code>LocalHazeStyle</code> \u2192 <code>dev.chrisbanes.haze.blur.LocalHazeStyle</code></li> <li>Removed APIs: <code>rememberHazeState(blurEnabled)</code> parameter removed (use <code>blurEffect { blurEnabled = ... }</code>)</li> </ul>"},{"location":"changelog/#migration","title":"Migration","text":"<p>For detailed migration instructions, see the Migration Guide.</p> <p>Full Changelog: https://github.com/chrisbanes/haze/compare/1.7.1...2.0.0</p>"},{"location":"changelog/#1.7.1","title":"1.7.1 2025-11-24","text":""},{"location":"changelog/#changed","title":"Changed","text":"<ul> <li>Use LruCache rather than SieveCache in #827</li> </ul> <p>Full Changelog: https://github.com/chrisbanes/haze/compare/1.7.0...1.7.1</p>"},{"location":"changelog/#1.7.0","title":"1.7.0 2025-11-10","text":""},{"location":"changelog/#highlights_1","title":"Highlights","text":"<ul> <li>\ud83c\udd95 <code>forceInvalidateOnPreDraw</code> parameter on <code>HazeEffectScope</code> (doc)</li> <li>Optimized noise texture handling on Android</li> <li>Only enable pre-draw listeners when we need to use them</li> <li>This should be the last of the v1.x releases (barring any blocking issues which crop up).</li> </ul>"},{"location":"changelog/#key-dependencies","title":"Key dependencies","text":"<ul> <li>Kotlin 2.2.20</li> <li>Compose Multiplatform 1.9.3</li> <li>Jetpack Compose 1.9.4</li> </ul>"},{"location":"changelog/#changed_1","title":"Changed","text":"<ul> <li>Dependency updates in #752</li> <li>Add workaround for Kotlin Yarn errors in #764</li> <li>Bump compile and min SDK versions in #773</li> <li>Optimize areas and area offsets in #779</li> <li>Compose 1.9.x and Kotlin 2.2.20 in #791</li> <li>Reduce screenshot test thresholds in #806</li> <li>Only enable pre-draw listeners when necessary in #809</li> <li>Add a common pre-draw listener in #811</li> <li>Invalidate on position change in #812</li> <li>Update Android version references in platforms.md by @XIVIX134 in #814</li> </ul>"},{"location":"changelog/#added","title":"Added","text":"<ul> <li>Add LeakCanary to sample in #769</li> <li>[Android] Optimize noise texture in #778</li> <li>Enable Kotlin explicit API in #790</li> <li>Introduce expandLayerBounds flag in #807</li> <li>Add forceInvalidateOnPreDraw flag in #810</li> </ul>"},{"location":"changelog/#new-contributors","title":"New Contributors","text":"<ul> <li>@XIVIX134 made their first contribution in #814</li> </ul> <p>Full Changelog: https://github.com/chrisbanes/haze/compare/1.6.10...1.7.0</p>"},{"location":"changelog/#1.6.10","title":"1.6.10 2025-08-13","text":""},{"location":"changelog/#added_1","title":"Added","text":"<ul> <li>Add clipToAreasBounds flag in #744</li> </ul> <p>Full Changelog: https://github.com/chrisbanes/haze/compare/1.6.9...1.6.10</p>"},{"location":"changelog/#1.6.9","title":"1.6.9 2025-07-18","text":""},{"location":"changelog/#fixed","title":"Fixed","text":"<ul> <li>Fix transparent edges... again in #728</li> </ul> <p>Full Changelog: https://github.com/chrisbanes/haze/compare/1.6.8...1.6.9</p>"},{"location":"changelog/#1.6.8","title":"1.6.8 2025-07-14","text":""},{"location":"changelog/#changed_2","title":"Changed","text":"<ul> <li>Reduce unnecessary draw invalidations in #725</li> </ul>"},{"location":"changelog/#fixed_1","title":"Fixed","text":"<ul> <li>Check if node is attached from updateEffect in #724</li> </ul> <p>Full Changelog: https://github.com/chrisbanes/haze/compare/1.6.7...1.6.8</p>"},{"location":"changelog/#1.6.7","title":"1.6.7 2025-07-06","text":""},{"location":"changelog/#fixed_2","title":"Fixed","text":"<ul> <li>Workaround Compose draw exception on Android 9 in #707</li> <li>Fix bounded edge treatment not working in #710</li> <li>Fix Haze'd dialogs not blurring background content in #714</li> </ul> <p>Full Changelog: https://github.com/chrisbanes/haze/compare/1.6.6...1.6.7</p>"},{"location":"changelog/#1.6.6","title":"1.6.6 2025-06-28","text":""},{"location":"changelog/#changed_3","title":"Changed","text":"<ul> <li>Remove dependency on kotlinx-datetime in #704</li> </ul> <p>Full Changelog: https://github.com/chrisbanes/haze/compare/1.6.5...1.6.6</p>"},{"location":"changelog/#1.6.5","title":"1.6.5 2025-06-27","text":""},{"location":"changelog/#changed_4","title":"Changed","text":"<ul> <li>Add Dokka docs module in #687</li> <li>Hide internal functions in #691</li> </ul>"},{"location":"changelog/#fixed_3","title":"Fixed","text":"<ul> <li>[RenderScript] Don't crash when blurRadius == 0 in #686</li> <li>Fix docs publish action in #690</li> </ul> <p>Full Changelog: https://github.com/chrisbanes/haze/compare/1.6.4...1.6.5</p>"},{"location":"changelog/#1.6.4","title":"1.6.4 2025-06-06","text":""},{"location":"changelog/#changed_5","title":"Changed","text":"<ul> <li>Refactor screenshot testing setup in #673</li> <li>Enable Dokka v2 in #676</li> </ul>"},{"location":"changelog/#fixed_4","title":"Fixed","text":"<ul> <li>Fix overlapping content with layer transformations in #674</li> </ul> <p>Full Changelog: https://github.com/chrisbanes/haze/compare/1.6.3...1.6.4</p>"},{"location":"changelog/#1.6.3","title":"1.6.3 2025-06-01","text":""},{"location":"changelog/#highlights_2","title":"Highlights","text":"<p>\ud83c\udd95 MacOS CMP targets - Thanks to @YuKongA for adding 'native' MacOS targets. These are completely experimental (and untested), as per MacOS targets for CMP.</p>"},{"location":"changelog/#added_2","title":"Added","text":"<ul> <li>Add macos targets by @YuKongA in #660</li> </ul>"},{"location":"changelog/#fixed_5","title":"Fixed","text":"<ul> <li>Skip drawing if not attached in #666</li> <li>Skip layout calls if not attached in #668</li> </ul>"},{"location":"changelog/#new-contributors_1","title":"New Contributors","text":"<ul> <li>@YuKongA made their first contribution in #660</li> </ul> <p>Full Changelog: https://github.com/chrisbanes/haze/compare/1.6.2...1.6.3</p>"},{"location":"changelog/#1.6.2","title":"1.6.2 2025-05-20","text":""},{"location":"changelog/#fixed_6","title":"Fixed","text":"<ul> <li>Stop clipping the drawn layer size in #654</li> <li>Call drawContent safely in #655</li> </ul> <p>Full Changelog: https://github.com/chrisbanes/haze/compare/1.6.1...1.6.2</p>"},{"location":"changelog/#1.6.1","title":"1.6.1 2025-05-19","text":""},{"location":"changelog/#changed_6","title":"Changed","text":"<ul> <li>Clarify fallbackTint kdoc in #647</li> </ul>"},{"location":"changelog/#fixed_7","title":"Fixed","text":"<ul> <li>Update outdated Dialog doc by @Skaldebane in #639</li> <li>Handle RenderScript not initializing in #645</li> </ul>"},{"location":"changelog/#new-contributors_2","title":"New Contributors","text":"<ul> <li>@Skaldebane made their first contribution in #639</li> </ul> <p>Full Changelog: https://github.com/chrisbanes/haze/compare/1.6.0...1.6.1</p>"},{"location":"changelog/#1.6.0","title":"1.6.0 2025-05-12","text":""},{"location":"changelog/#highlights_3","title":"Highlights","text":""},{"location":"changelog/#support-for-all-versions-of-android","title":"\ud83e\udd16 Support for all versions of Android","text":"<p>Haze now supports blurring for all versions of Android, using RenderScript underneath. The new platforms documentation has all of the details.</p>"},{"location":"changelog/#foreground-content-blurring","title":"\ud83c\udfa8 Foreground (content) blurring","text":"<p>Haze always been a library which enables background blurring. There are times where you need to blur the foreground content though, which Haze has always left to <code>Modifier.blur</code>. With the addition of older Android support, and all of the other features Haze supports, it makes sense for Haze to support both scenarios. New in this release is foreground blurring (doc).</p>"},{"location":"changelog/#blurred-edge-treatment","title":"\ud83d\udcd0 Blurred edge treatment","text":"<p>With the addition of foreground blurring, the need to be able to customise how content is blurred at the edges is useful. This release contains a new <code>blurredEdgeTreatment</code> on the effect scope, which works the same way as <code>Modifier.blur</code>.</p>"},{"location":"changelog/#added_3","title":"Added","text":"<ul> <li>Add RenderScript backed blur implementation in #590</li> <li>Add <code>HazeState.blurEnabled</code> in #602</li> <li>Update docs for 1.6.0 in #603</li> <li>Add new platform docs in #605</li> <li>Add trace functions in #615</li> <li>Add support for content blurring in #616</li> <li>Add blurredEdgeTreatment property in #625</li> </ul>"},{"location":"changelog/#changed_7","title":"Changed","text":"<ul> <li>Remove the final withSaveLayer call in #601</li> <li>Tidy up HazeProgressive drawing in #604</li> <li>Scale the noise texture appropriately in #613</li> <li>Tweaks to Progressive support for RenderScript in #621</li> <li>Compose Multiplatform 1.8.0 in #634</li> </ul>"},{"location":"changelog/#fixed_8","title":"Fixed","text":"<ul> <li>Fix masking for content blurring in #619</li> <li>Fix input scaled content being 1px smaller in #622</li> <li>Noise fixes for Android in #626</li> <li>Fix clamping blur effect on edges in #629</li> <li>[RenderScript] Fix tint and noise size being incorrect in #632</li> </ul> <p>Full Changelog: https://github.com/chrisbanes/haze/compare/1.5.4...1.6.0</p>"},{"location":"changelog/#1.6.0-rc02","title":"1.6.0-rc02 2025-05-06","text":""},{"location":"changelog/#changed_8","title":"Changed","text":"<ul> <li>Compose Multiplatform 1.8.0 in #634</li> </ul> <p>Full Changelog: https://github.com/chrisbanes/haze/compare/1.6.0-rc01...1.6.0-rc02</p>"},{"location":"changelog/#1.6.0-rc01","title":"1.6.0-rc01 2025-05-05","text":""},{"location":"changelog/#fixed_9","title":"Fixed","text":"<ul> <li>[RenderScript] Fix tint and noise size being incorrect in #632</li> </ul> <p>Full Changelog: https://github.com/chrisbanes/haze/compare/1.6.0-beta03...1.6.0-rc01</p>"},{"location":"changelog/#1.6.0-beta03","title":"1.6.0-beta03 2025-05-04","text":""},{"location":"changelog/#added_4","title":"Added","text":"<ul> <li>Add blurredEdgeTreatment property in #625</li> </ul>"},{"location":"changelog/#changed_9","title":"Changed","text":"<ul> <li>Noise fixes for Android in #626</li> </ul>"},{"location":"changelog/#fixed_10","title":"Fixed","text":"<ul> <li>Fix clamping blur effect on edges in #629</li> </ul> <p>Full Changelog: https://github.com/chrisbanes/haze/compare/1.6.0-beta02...1.6.0-beta03</p>"},{"location":"changelog/#1.6.0-beta02","title":"1.6.0-beta02 2025-04-29","text":""},{"location":"changelog/#added_5","title":"Added","text":"<ul> <li>Add trace functions in #615</li> <li>Add support for content blurring in #616</li> </ul>"},{"location":"changelog/#changed_10","title":"Changed","text":"<ul> <li>Scale the noise texture appropriately in #613</li> <li>Tweaks to Progressive support for RenderScript in #621</li> </ul>"},{"location":"changelog/#fixed_11","title":"Fixed","text":"<ul> <li>Fix masking for content blurring in #619</li> <li>Fix input scaled content being 1px smaller in #622</li> </ul> <p>Full Changelog: https://github.com/chrisbanes/haze/compare/1.6.0-beta01...1.6.0-beta02</p>"},{"location":"changelog/#1.6.0-beta01","title":"1.6.0-beta01 2025-04-23","text":""},{"location":"changelog/#highlights_4","title":"Highlights","text":""},{"location":"changelog/#support-for-all-android-devices","title":"\ud83c\udd95 Support for all Android devices","text":"<p>We now support for older Android versions, using an implementation of blurring which uses RenderScript. You can read the new Platforms documentation for more information on how to try it.</p> <p>Big thanks to @desugar-64 for the help on this.</p>"},{"location":"changelog/#android-12-is-now-enabled-by-default","title":"Android 12 is now enabled by default","text":"<p>We have now identified a fix for the issues which meant that blurring was disabled on Android 12, and it is now enabled by default.</p>"},{"location":"changelog/#added_6","title":"Added","text":"<ul> <li>Add RenderScript backed blur implementation in #590</li> <li>Add <code>HazeState.blurEnabled</code> in #602</li> <li>Update docs for 1.6.0 in #603</li> <li>Add new platform docs in #605</li> </ul>"},{"location":"changelog/#changed_11","title":"Changed","text":"<ul> <li>Remove the final withSaveLayer call in #601</li> <li>Tidy up HazeProgressive drawing in #604</li> </ul> <p>Full Changelog: https://github.com/chrisbanes/haze/compare/1.5.4...1.6.0-beta01</p>"},{"location":"changelog/#1.5.4","title":"1.5.4 2025-04-17","text":""},{"location":"changelog/#changed_12","title":"Changed","text":"<ul> <li>Re-use BlurEffect instances in #600</li> </ul> <p>Full Changelog: https://github.com/chrisbanes/haze/compare/1.5.3...1.5.4</p>"},{"location":"changelog/#1.5.3","title":"1.5.3 2025-04-13","text":""},{"location":"changelog/#changed_13","title":"Changed","text":"<ul> <li>Reduce scope of consumer R8 rules in #579</li> <li>Extract BlurEffect interface in #589</li> <li>Use <code>Sample</code> as routes directly by @Goooler in #593</li> </ul>"},{"location":"changelog/#fixed_12","title":"Fixed","text":"<ul> <li>Fix links on docs site in #581</li> <li>Fix haze effects inside of of pagers by @Monkopedia in #594</li> </ul>"},{"location":"changelog/#new-contributors_3","title":"New Contributors","text":"<ul> <li>@Goooler made their first contribution in #593</li> <li>@Monkopedia made their first contribution in #594</li> </ul> <p>Full Changelog: https://github.com/chrisbanes/haze/compare/1.5.2...1.5.3</p>"},{"location":"changelog/#1.5.2","title":"1.5.2 2025-03-23","text":""},{"location":"changelog/#changed_14","title":"Changed","text":"<ul> <li>Migrate samples to AndroidX Navigation in #563</li> <li>Disable context-receivers compiler flag in #564</li> <li>Update baseline profile in #568</li> </ul>"},{"location":"changelog/#fixed_13","title":"Fixed","text":"<ul> <li>Fix flicker when using AndroidX Navigation in #566</li> <li>Fix wrong blur rect after rotating in #567</li> </ul> <p>Full Changelog: https://github.com/chrisbanes/haze/compare/1.5.1...1.5.2</p>"},{"location":"changelog/#1.5.1","title":"1.5.1 2025-03-19","text":""},{"location":"changelog/#fixed_14","title":"Fixed","text":"<ul> <li>Fix compilation failure of iOS sample by @keta1 in #553</li> <li>[Skiko] Fix noise effect not being masked for progressive effect in #555</li> </ul>"},{"location":"changelog/#new-contributors_4","title":"New Contributors","text":"<ul> <li>@keta1 made their first contribution in #553</li> </ul> <p>Full Changelog: https://github.com/chrisbanes/haze/compare/1.5.0...1.5.1</p>"},{"location":"changelog/#1.5.0","title":"1.5.0 2025-03-06","text":""},{"location":"changelog/#highlights_5","title":"Highlights","text":"<ul> <li>Optimised blurring shader for progressive effects. Thanks to @Kyant0 in #537</li> <li>HazeProgressive.Brush. You can now supply completely custom masks (via a shader) for progressive effects.</li> <li>Added <code>HazeLogger</code>. You can now turn on Haze's internal logging. Handy for debugging and reporting issues.</li> <li>Various bug fixes. Thanks to everyone who reported issues.</li> </ul>"},{"location":"changelog/#added_7","title":"Added","text":"<ul> <li>Add iOS sample in #532</li> <li>Add HazeLogger in #534</li> <li>Add HazeProgressive.Brush in #542</li> <li>Add HazeProgressive.forShader in #546</li> </ul>"},{"location":"changelog/#changed_15","title":"Changed","text":"<ul> <li>Optimize Gaussian blur shader by @Kyant0 in #537</li> </ul>"},{"location":"changelog/#fixed_15","title":"Fixed","text":"<ul> <li>Fix progressive effect being drawn incorrectly  in #538</li> <li>Don't create GraphicsLayer if dimension is zero in #540</li> <li>Fix support for nested Haze hierarchies in #545</li> <li>Fix baseline profile generation in #550</li> </ul>"},{"location":"changelog/#new-contributors_5","title":"New Contributors","text":"<ul> <li>@Kyant0 made their first contribution in #537</li> </ul> <p>Full Changelog: https://github.com/chrisbanes/haze/compare/1.4.0...1.5.0</p>"},{"location":"changelog/#1.4.0","title":"1.4.0 2025-02-28","text":""},{"location":"changelog/#added_8","title":"Added","text":"<ul> <li>Add HazeDialog composable in #513</li> </ul>"},{"location":"changelog/#changed_16","title":"Changed","text":"<ul> <li>Bump Android Compile SDK to 35 in #512</li> <li>Re-introduce expanded layer size in #522</li> <li>Use high-precision types in blurring shader in #530</li> </ul>"},{"location":"changelog/#fixed_16","title":"Fixed","text":"<ul> <li>Fix default style to include blurring in #527</li> <li>Fix progressive effect on certain OEMs in #528</li> </ul> <p>Full Changelog: https://github.com/chrisbanes/haze/compare/1.3.1...1.4.0</p>"},{"location":"changelog/#1.3.1","title":"1.3.1 2025-02-09","text":""},{"location":"changelog/#changed_17","title":"Changed","text":"<ul> <li>Move Lifecycle usage to androidMain in #500</li> <li>Only use positionOnScreen on Android in #503</li> </ul>"},{"location":"changelog/#fixed_17","title":"Fixed","text":"<ul> <li>Release GraphicsLayer when stopped in #499</li> </ul> <p>Full Changelog: https://github.com/chrisbanes/haze/compare/1.3.0...1.3.1</p>"},{"location":"changelog/#1.3.0","title":"1.3.0 2025-01-27","text":""},{"location":"changelog/#added_9","title":"Added","text":"<ul> <li>Add Brush support to HazeTint in #481</li> <li>Add Bottom Sheet sample in #485</li> <li>Add support for radial progressive effects in #491</li> <li>Adds section on using Haze in deep UI hierarchies. by @StylingAndroid in #494</li> </ul>"},{"location":"changelog/#changed_18","title":"Changed","text":"<ul> <li>Move all samples to <code>shared</code> in #484</li> </ul>"},{"location":"changelog/#fixed_18","title":"Fixed","text":"<ul> <li>Fix alpha property changes not invalidating in #490</li> </ul>"},{"location":"changelog/#new-contributors_6","title":"New Contributors","text":"<ul> <li>@StylingAndroid made their first contribution in #494</li> </ul> <p>Full Changelog: https://github.com/chrisbanes/haze/compare/1.2.2...1.3.0</p>"},{"location":"changelog/#1.2.2","title":"1.2.2 2025-01-16","text":""},{"location":"changelog/#fixed_19","title":"Fixed","text":"<ul> <li>Add workaround for positionOnScreen throwing in #472</li> <li>[Skia] Fix hazeSource content changes not updating hazeEffects in #476</li> </ul> <p>Full Changelog: https://github.com/chrisbanes/haze/compare/1.2.1...1.2.2</p>"},{"location":"changelog/#1.2.1","title":"1.2.1 2025-01-13","text":""},{"location":"changelog/#fixed_20","title":"Fixed","text":"<ul> <li>Fix Haze not drawing any effects in previews in #470</li> <li>Fix issues with missing effects in LazyLayouts in #469</li> </ul> <p>Full Changelog: https://github.com/chrisbanes/haze/compare/1.2.0...1.2.1</p>"},{"location":"changelog/#1.2.0","title":"1.2.0 2025-01-09","text":""},{"location":"changelog/#highlights_6","title":"Highlights","text":""},{"location":"changelog/#api-renames","title":"API renames","text":"<p>I have renamed a number of the APIs in this release to better reflect what they actually do these days:</p> <ul> <li><code>Modifier.haze</code> -&gt; <code>Modifier.hazeSource</code></li> <li><code>Modifier.hazeChild</code> -&gt; <code>Modifier.hazeEffect</code></li> <li><code>HazeChildScope</code> -&gt; <code>HazeEffectScope</code></li> </ul> <p>I've kept the old APIs around and deprecated them for easy migration.</p>"},{"location":"changelog/#overlapping-blurred-areas","title":"Overlapping blurred areas","text":"<p>Haze now supports different <code>hazeEffect</code> areas which overlap. See here for more information.</p>"},{"location":"changelog/#versioned-documentation","title":"Versioned documentation","text":"<p>A small quality of life change, but the documentation website is now versioned: https://chrisbanes.github.io/haze/</p>"},{"location":"changelog/#changed_19","title":"Changed","text":"<ul> <li>Stop using synchronized lazy in #446</li> <li>Add support for multiple Haze nodes attached to a HazeState in #441</li> <li>Rename modifiers for clarity in #452</li> <li>[Sample] Hook up back button on Android in #459</li> <li>Remove expanded layer size in #461</li> <li>Small tidy ups ready for release in #463</li> </ul> <p>Full Changelog: https://github.com/chrisbanes/haze/compare/1.1.1...1.2.0</p>"},{"location":"changelog/#1.1.1","title":"1.1.1 2024-12-04","text":""},{"location":"changelog/#changed_20","title":"Changed","text":"<ul> <li>Use onPlaced for screenshot tests in #433</li> </ul> <p>Full Changelog: https://github.com/chrisbanes/haze/compare/1.1.0...1.1.1</p>"},{"location":"changelog/#1.1.0","title":"1.1.0 2024-12-02","text":""},{"location":"changelog/#highlights_7","title":"Highlights","text":"<p>\ud83c\udd95 Input Scale - A new feature in this release is being able to set the input scale, allowing you to downscale content for potential performance gains.</p>"},{"location":"changelog/#added_10","title":"Added","text":"<ul> <li>Add inputScale in #416</li> <li>Improve HazeInputScale API in #423</li> <li>Add automatic HazeInputScale in #427</li> </ul>"},{"location":"changelog/#changed_21","title":"Changed","text":"<ul> <li>Reduce variance in benchmarks in #418</li> <li>More benchmark consistency work in #424</li> <li>Remove noise scaling on Android in #428</li> </ul> <p>Full Changelog: https://github.com/chrisbanes/haze/compare/1.0.2...1.1.0</p>"},{"location":"changelog/#1.0.2","title":"1.0.2 2024-11-15","text":""},{"location":"changelog/#highlights_8","title":"Highlights","text":"<p>\ud83c\udd95 Ability to control where the blurring effect is used - You can now control where the blur effect is used. Specifically for Android, there's more information here.</p>"},{"location":"changelog/#added_11","title":"Added","text":"<ul> <li>Add blurEnabled on HazeChildScope property in #408</li> </ul> <p>Full Changelog: https://github.com/chrisbanes/haze/compare/1.0.1...1.0.2</p>"},{"location":"changelog/#1.0.1","title":"1.0.1 2024-11-11","text":""},{"location":"changelog/#added_12","title":"Added","text":"<ul> <li>Add <code>preferPerformance</code> flag on HazeProgressive in #401</li> </ul>"},{"location":"changelog/#changed_22","title":"Changed","text":"<ul> <li>Cache RenderEffects in #402</li> </ul>"},{"location":"changelog/#fixed_21","title":"Fixed","text":"<ul> <li>Implement fallback for HazeProgressive in #400</li> </ul> <p>Full Changelog: https://github.com/chrisbanes/haze/compare/1.0.0...1.0.1</p>"},{"location":"changelog/#1.0.0","title":"1.0.0 2024-11-07","text":"<p>This is the first stable 1.0.0 release! \ud83c\udf89</p> <p>For a full list of changes since 0.7.3, see the migration guide.</p>"},{"location":"changelog/#new-contributors_7","title":"New Contributors","text":"<ul> <li>@Sanlorng made their first contribution in #306</li> </ul> <p>Full Changelog: https://github.com/chrisbanes/haze/compare/0.7.3...1.0.0</p>"},{"location":"changelog/#0.9.0-rc03","title":"0.9.0-rc03 2024-11-02","text":""},{"location":"changelog/#changed_23","title":"Changed","text":"<ul> <li>Remove LayoutAwareModifierNode and onPlaced again in #383</li> </ul>"},{"location":"changelog/#fixed_22","title":"Fixed","text":"<ul> <li>Fix crashes caused by blurRadius of 0px in #382</li> </ul> <p>Full Changelog: https://github.com/chrisbanes/haze/compare/0.9.0-rc02...0.9.0-rc03</p>"},{"location":"changelog/#0.9.0-rc02","title":"0.9.0-rc02 2024-10-26","text":""},{"location":"changelog/#changed_24","title":"Changed","text":"<ul> <li>Doc updates for Haze v0.9 in #369</li> <li>Upgrade to Robolectric 4.14-beta-1 in #370</li> <li>Start using LayoutAwareModifierNode and onPlaced again in #372</li> </ul> <p>Full Changelog: https://github.com/chrisbanes/haze/compare/0.9.0-rc01...0.9.0-rc02</p>"},{"location":"changelog/#0.9.0-rc01","title":"0.9.0-rc01 2024-10-21","text":""},{"location":"changelog/#highlights_9","title":"Highlights","text":"<p>Performance improvements for progressive blur - On platforms which support runtime shaders (everything other than Android SDK &lt; 33), progressive is ~1.9x faster than before, through the usage of a new (custom) runtime shader.</p>"},{"location":"changelog/#added_13","title":"Added","text":"<ul> <li>Add runtime shader for progressive blur in #368</li> </ul>"},{"location":"changelog/#changed_25","title":"Changed","text":"<ul> <li>Small micro optimizations in #364</li> </ul> <p>Full Changelog: https://github.com/chrisbanes/haze/compare/0.9.0-beta04.1...0.9.0-rc01</p>"},{"location":"changelog/#0.9.0-beta04.1","title":"0.9.0-beta04.1 2024-10-16","text":""},{"location":"changelog/#fixed_23","title":"Fixed","text":"<ul> <li>Fix defaults for blurRadius and noiseFactor in #361</li> </ul> <p>Full Changelog: https://github.com/chrisbanes/haze/compare/0.9.0-beta04...0.9.0-beta04.1</p>"},{"location":"changelog/#0.9.0-beta04","title":"0.9.0-beta04 2024-10-16","text":""},{"location":"changelog/#highlights_10","title":"Highlights","text":""},{"location":"changelog/#compose-multiplatform-170","title":"Compose Multiplatform 1.7.0","text":"<p>CMP 1.7.0 has gone stable. Go and upgrade.</p>"},{"location":"changelog/#progressive-blurs-aka-gradient-blurs","title":"Progressive blurs (aka gradient blurs)","text":"<p>We now have access to progressive blurring with an API very similar to the <code>Brush</code> gradient APIs.</p> <p>[!CAUTION] The performance of progressive blurring is untested as yet, but for sure it's going to be slower than without. I also haven't put any performance work into this as yet. That will come for the next release (hopefully rc01).</p>"},{"location":"changelog/#tweaked-styling-apis-again","title":"Tweaked styling APIs (again)","text":"<p>The styling APIs have changed again (sorry about that), but I'm feeling much better about the new API. We now have a the LocalHazeStyle composition local (for global styling), <code>style</code> parameter on hazeChild for node-specific, and then the individual properties on hazeChild <code>block</code>.</p>"},{"location":"changelog/#added_14","title":"Added","text":"<ul> <li>Progressive blur in #346</li> <li>Add ExoPlayer sample in #356</li> </ul>"},{"location":"changelog/#changed_26","title":"Changed","text":"<ul> <li>More benchmark tests (and perf improvements) in #349</li> <li>Throw error on descendant layouts in #357</li> <li>Style improvements for 0.9.x in #360</li> </ul> <p>Full Changelog: https://github.com/chrisbanes/haze/compare/0.9.0-beta03...0.9.0-beta04</p>"},{"location":"changelog/#0.9.0-beta03","title":"0.9.0-beta03 2024-10-04","text":""},{"location":"changelog/#changed_27","title":"Changed","text":"<ul> <li>Only use a GraphicsLayer on Android on hw-accel canvases in #341</li> <li>Remove the unused defaultStyle vars in #342</li> </ul> <p>Full Changelog: https://github.com/chrisbanes/haze/compare/0.9.0-beta02...0.9.0-beta03</p>"},{"location":"changelog/#0.9.0-beta02","title":"0.9.0-beta02 2024-10-01","text":""},{"location":"changelog/#highlights_11","title":"Highlights","text":"<ul> <li>We now depend on Compose Multiplatform 1.7.0-rc01</li> <li>Lots of API tweaks!</li> </ul>"},{"location":"changelog/#added_15","title":"Added","text":"<ul> <li>Add alpha param to hazeChild in #313</li> </ul>"},{"location":"changelog/#changed_28","title":"Changed","text":"<ul> <li>Tidy up API for v0.9.0 in #330</li> <li>Disable invalidation tick in #331</li> </ul> <p>Full Changelog: https://github.com/chrisbanes/haze/compare/0.9.0-beta01...0.9.0-beta02</p>"},{"location":"changelog/#0.9.0-beta01","title":"0.9.0-beta01 2024-09-05","text":""},{"location":"changelog/#highlights_12","title":"Highlights","text":"<ul> <li>New version of <code>hazeChild</code> which takes lambda parameters. Should be a lot more efficient if you need to animate properties.</li> <li>Using Jetpack Compose 1.7.0 (GA)</li> <li>Using Compose Multiplatform 1.7.0-beta01</li> <li>(New) FluentMaterials class, which mimics Windows blurring styles. Thanks @Sanlorng!</li> </ul>"},{"location":"changelog/#added_16","title":"Added","text":"<ul> <li>Add FluentMaterials by @Sanlorng in #306</li> <li>Add lambda version of HazeChild in #309</li> </ul>"},{"location":"changelog/#new-contributors_8","title":"New Contributors","text":"<ul> <li>@Sanlorng made their first contribution in #306</li> </ul> <p>Full Changelog: https://github.com/chrisbanes/haze/compare/0.9.0-alpha08...0.9.0-beta01</p>"},{"location":"changelog/#0.9.0-alpha08","title":"0.9.0-alpha08 2024-08-21","text":""},{"location":"changelog/#added_17","title":"Added","text":"<ul> <li>Add Brush suppport for tints in #298</li> </ul> <p>Full Changelog: https://github.com/chrisbanes/haze/compare/0.9.0-alpha07...0.9.0-alpha08</p>"},{"location":"changelog/#0.9.0-alpha07","title":"0.9.0-alpha07 2024-08-15","text":""},{"location":"changelog/#fixed_24","title":"Fixed","text":"<ul> <li>Add workaround for invalidations not happening on Skia backed platforms in #296</li> </ul> <p>Full Changelog: https://github.com/chrisbanes/haze/compare/0.9.0-alpha06...0.9.0-alpha07</p>"},{"location":"changelog/#0.9.0-alpha06","title":"0.9.0-alpha06 2024-08-07","text":""},{"location":"changelog/#fixed_25","title":"Fixed","text":"<ul> <li>Fix clipping size in #288</li> </ul> <p>Full Changelog: https://github.com/chrisbanes/haze/compare/0.9.0-alpha05...0.9.0-alpha06</p>"},{"location":"changelog/#0.9.0-alpha05","title":"0.9.0-alpha05 2024-08-01","text":""},{"location":"changelog/#changed_29","title":"Changed","text":"<ul> <li>Remove shape clipping in #287</li> </ul> <p>Full Changelog: https://github.com/chrisbanes/haze/compare/0.9.0-alpha04...0.9.0-alpha05</p>"},{"location":"changelog/#0.9.0-alpha04","title":"0.9.0-alpha04 2024-07-23","text":""},{"location":"changelog/#changed_30","title":"Changed","text":"<ul> <li>Implement better edges in #275</li> <li>Invalidate the render effect on size changes in #278</li> </ul>"},{"location":"changelog/#fixed_26","title":"Fixed","text":"<ul> <li>Fix clipping for rectangles in #279</li> </ul> <p>Full Changelog: https://github.com/chrisbanes/haze/compare/0.9.0-alpha03...0.9.0-alpha04</p>"},{"location":"changelog/#0.9.0-alpha03","title":"0.9.0-alpha03 2024-07-19","text":""},{"location":"changelog/#highlights_13","title":"Highlights","text":"<p>\ud83c\udd95 Masks - You can now supply a <code>Brush</code> to <code>hazeChild</code> which will act as a mask. The mask allows things like gradient blurs, by supplying a <code>Brush.verticalGradient</code> or similar.</p>"},{"location":"changelog/#added_18","title":"Added","text":"<ul> <li>Add ability to provide mask for blurred areas in #267</li> </ul>"},{"location":"changelog/#changed_31","title":"Changed","text":"<ul> <li>Revert usage of Poko in #268</li> <li>Turn off auto invalidation in #271</li> <li>Revert \"Update plugin mavenpublish to v0.29.0\" in #273</li> </ul>"},{"location":"changelog/#fixed_27","title":"Fixed","text":"<ul> <li>Throw error when background color is not specified in #265</li> <li>Fix samples crashing in #270</li> <li>Fix content node being placed at incorrect position in #272</li> </ul> <p>Full Changelog: https://github.com/chrisbanes/haze/compare/0.9.0-alpha02...0.9.0-alpha03</p>"},{"location":"changelog/#0.9.0-alpha02","title":"0.9.0-alpha02 2024-07-17","text":""},{"location":"changelog/#fixed_28","title":"Fixed","text":"<ul> <li>Fix NPE from missing content layer in #263</li> </ul> <p>Full Changelog: https://github.com/chrisbanes/haze/compare/0.9.0-alpha01...0.9.0-alpha02</p>"},{"location":"changelog/#0.9.0-alpha01","title":"0.9.0-alpha01 2024-07-16","text":"<p>For more information, see https://chrisbanes.github.io/haze/migrating-0.9/</p>"},{"location":"changelog/#changed_32","title":"Changed","text":"<ul> <li>[next] Initial upgrade to Compose Multiplatform 1.7.0-alpha in #250</li> <li>New rendering mode in #259</li> <li>Add some docs for 0.9 in #261</li> </ul> <p>Full Changelog: https://github.com/chrisbanes/haze/compare/0.7.3...0.9.0-alpha01</p>"},{"location":"changelog/#0.7.3","title":"0.7.3 2024-07-08","text":""},{"location":"changelog/#changed_33","title":"Changed","text":"<ul> <li>Integrate GlobalPositionAwareModifierNode into Haze modifiers in #246</li> <li>Add ListOverImage sample in #248</li> </ul> <p>Full Changelog: https://github.com/chrisbanes/haze/compare/0.7.2...0.7.3</p>"},{"location":"changelog/#0.7.2","title":"0.7.2 2024-06-17","text":""},{"location":"changelog/#changed_34","title":"Changed","text":"<ul> <li>Web updates (JS/Canvas) by @nevrozza in #228</li> </ul>"},{"location":"changelog/#fixed_29","title":"Fixed","text":"<ul> <li>Fix sample code in usage docs by @lhoyong in #211</li> <li>Fix typo in naming of \"lorem ipsum\" placeholder value by @twyatt in #215</li> <li>Fix CI and docs build in #237</li> </ul>"},{"location":"changelog/#new-contributors_9","title":"New Contributors","text":"<ul> <li>@lhoyong made their first contribution in #211</li> <li>@twyatt made their first contribution in #215</li> <li>@nevrozza made their first contribution in #228</li> </ul> <p>Full Changelog: https://github.com/chrisbanes/haze/compare/0.7.1...0.7.2</p>"},{"location":"changelog/#0.7.1","title":"0.7.1 2024-05-01","text":""},{"location":"changelog/#changed_35","title":"Changed","text":"<ul> <li>Remove usage of LFS in #198</li> <li>Kotlin 1.9.23 + CMP 1.6.2 in #199</li> <li>Don't include test sources in API files in #204</li> </ul>"},{"location":"changelog/#added_19","title":"Added","text":"<ul> <li>Add scroll behavior to Scaffold sample in #197</li> </ul>"},{"location":"changelog/#fixed_30","title":"Fixed","text":"<ul> <li>Fix glitch with clipping content out in #205</li> <li>Reset state when LazyLayout reuses node in #203</li> <li>[Android] Fix dialog being offset for non edge-to-edge windows in #206</li> <li>Fix content clip path at edges in #207</li> </ul> <p>Full Changelog: https://github.com/chrisbanes/haze/compare/0.7.0...0.7.1</p>"},{"location":"changelog/#0.7.0","title":"0.7.0 2024-04-12","text":""},{"location":"changelog/#changed_36","title":"Changed","text":"<ul> <li>Enable Robolectric hardware rendering in #147</li> <li>Tidy up settings.gradle.kts in #181</li> <li>Remove deprecated library and APIs in #182</li> </ul>"},{"location":"changelog/#fixed_31","title":"Fixed","text":"<ul> <li>Fix HazeChild being conditionally added in #174</li> </ul> <p>Full Changelog: https://github.com/chrisbanes/haze/compare/0.6.2...0.7.0</p>"},{"location":"changelog/#0.6.2","title":"0.6.2 2024-03-10","text":""},{"location":"changelog/#fixed_32","title":"Fixed","text":"<ul> <li>Fix corner radius not applying to the correct corners by @mikepenz in #162</li> </ul>"},{"location":"changelog/#added_20","title":"Added","text":"<ul> <li>[Test] Add test-case to verify rounded corners by @mikepenz in #163</li> </ul>"},{"location":"changelog/#new-contributors_10","title":"New Contributors","text":"<ul> <li>@mikepenz made their first contribution in #162</li> </ul> <p>Full Changelog: https://github.com/chrisbanes/haze/compare/0.6.1...0.6.2</p>"},{"location":"changelog/#0.6.1","title":"0.6.1 2024-03-09","text":""},{"location":"changelog/#changed_37","title":"Changed","text":"<ul> <li>Migrate samples to use Coil in #154</li> </ul>"},{"location":"changelog/#added_21","title":"Added","text":"<ul> <li>Add Kotlin WebAssembly support in #153</li> </ul>"},{"location":"changelog/#fixed_33","title":"Fixed","text":"<ul> <li>[Android] Fix empty bounds handling in #160</li> </ul> <p>Full Changelog: https://github.com/chrisbanes/haze/compare/0.6.0...0.6.1</p>"},{"location":"changelog/#0.6.0","title":"0.6.0 2024-03-06","text":""},{"location":"changelog/#highlights_14","title":"Highlights","text":"<ul> <li>[iOS and Desktop] Fix edges not being blurred uniformly (#142). Big thanks to @Dynaruid for contributing this!</li> <li>[Android] Fix artifacts on rounded edges (#132)</li> </ul>"},{"location":"changelog/#changed_38","title":"Changed","text":"<ul> <li>Use Poppins in screenshot testing in #144</li> </ul>"},{"location":"changelog/#fixed_34","title":"Fixed","text":"<ul> <li>Fixed where the edges appeared as if they were not properly blurred by @Dynaruid in #142</li> <li>Fix Android clip/rounding issue in #133</li> <li>Correct default value for Noise in Usage.md by @dev-weiqi in #149</li> </ul>"},{"location":"changelog/#new-contributors_11","title":"New Contributors","text":"<ul> <li>@Dynaruid made their first contribution in #142</li> <li>@dev-weiqi made their first contribution in #149</li> </ul> <p>Full Changelog: https://github.com/chrisbanes/haze/compare/0.5.4...0.6.0</p>"},{"location":"changelog/#0.5.4","title":"0.5.4 2024-02-27","text":"<p>Full Changelog: https://github.com/chrisbanes/haze/compare/0.5.3...0.5.4</p>"},{"location":"changelog/#0.5.3","title":"0.5.3 2024-02-18","text":"<p>Full Changelog: https://github.com/chrisbanes/haze/compare/0.5.2...0.5.3</p>"},{"location":"changelog/#0.5.2","title":"0.5.2 2024-02-14","text":"<p>Full Changelog: https://github.com/chrisbanes/haze/compare/0.5.1...0.5.2</p>"},{"location":"changelog/#0.5.1","title":"0.5.1 2024-02-07","text":""},{"location":"changelog/#fixed_35","title":"Fixed","text":"<ul> <li>Fix Android noise texture changing luminance in #126</li> </ul> <p>Full Changelog: https://github.com/chrisbanes/haze/compare/0.5.0...0.5.1</p>"},{"location":"changelog/#0.5.0","title":"0.5.0 2024-01-31","text":""},{"location":"changelog/#highlights_15","title":"Highlights","text":"<ul> <li>\ud83c\udfc3 Optimizations and performance increases (see performance docs)</li> <li>\ud83c\udf2b\ufe0f New Materials library (see materials docs)</li> <li>\ud83c\udd95 Tidied up styling API</li> <li>\u2728 Updated to Compose Multiplatform 1.6.0-beta01 (and Jetpack Compose 1.6.0)</li> <li>\ud83d\udd01 Merged haze and haze-jetpack-compose</li> <li>\ud83d\udcdc (Android) New baseline profiles bundled in library. Thanks to @simonlebras for this.</li> </ul>"},{"location":"changelog/#changed_39","title":"Changed","text":"<ul> <li>Merge :haze and :haze-jetpack-compose in #106</li> <li>Lots of small fixes in #113</li> <li>Optimize Android implementations in #115</li> </ul>"},{"location":"changelog/#added_22","title":"Added","text":"<ul> <li>Baseline profile by @simonlebras in #93</li> <li>Baseline Profile tweaks in #95</li> <li>Add HazeStyle class in #110</li> <li>Add Haze Materials in #111</li> <li>Add macrobenchmark tests in #116</li> </ul>"},{"location":"changelog/#fixed_36","title":"Fixed","text":"<ul> <li>Fix Small Typo in Docs by @jorgedotcom in #100</li> </ul>"},{"location":"changelog/#new-contributors_12","title":"New Contributors","text":"<ul> <li>@simonlebras made their first contribution in #93</li> <li>@jorgedotcom made their first contribution in #100</li> </ul> <p>Full Changelog: https://github.com/chrisbanes/haze/compare/0.4.5...0.5.0</p>"},{"location":"changelog/#0.4.5","title":"0.4.5 2024-01-12","text":""},{"location":"changelog/#changes","title":"Changes","text":"<ul> <li>Android Previews (and screenshot tests) now display a scrim, rather than nothing.</li> <li>Haze children from different Android windows (i.e. Dialogs) now work</li> </ul>"},{"location":"changelog/#fixed_37","title":"Fixed","text":"<ul> <li>Calculate areas in screen coordinates in #88</li> <li>Merge Android implementations in #91</li> </ul> <p>Full Changelog: https://github.com/chrisbanes/haze/compare/0.4.4...0.4.5</p>"},{"location":"changelog/#0.4.4","title":"0.4.4 2024-01-08","text":""},{"location":"changelog/#fixed_38","title":"Fixed","text":"<ul> <li>Fix hazeChild tint not updating on Android base in #83</li> </ul>"},{"location":"changelog/#added_23","title":"Added","text":"<ul> <li>Add screenshot tests to verify <code>hazeChild</code> tint changes in #85</li> </ul> <p>Full Changelog: https://github.com/chrisbanes/haze/compare/0.4.3...0.4.4</p>"},{"location":"changelog/#0.4.3","title":"0.4.3 2024-01-05","text":""},{"location":"changelog/#fixed_39","title":"Fixed","text":"<ul> <li>Avoid using <code>RenderNode</code> blur implementation on API 31 for now. See #77</li> <li>Transparent tints now work everywhere.</li> </ul>"},{"location":"changelog/#added_24","title":"Added","text":"<ul> <li>Allow setting a tint on each <code>hazeChild</code></li> </ul>"},{"location":"changelog/#changed_40","title":"Changed","text":"<ul> <li>Fix transparent tints causing crash on Android in #74</li> <li>Skip RenderNode impl on API 31 in #79</li> <li>Allow override tint on <code>hazeChild</code> in #81</li> </ul> <p>Full Changelog: https://github.com/chrisbanes/haze/compare/0.4.2...0.4.3</p>"},{"location":"changelog/#0.4.2","title":"0.4.2 2024-01-03","text":""},{"location":"changelog/#fixed_40","title":"Fixed","text":"<ul> <li>Android minimum SDK is now 21 to match Compose.</li> <li><code>haze</code> and <code>hazeChild</code> causing previews to crash.</li> </ul>"},{"location":"changelog/#changed_41","title":"Changed","text":"<ul> <li>Drop Android minimum sdk version to 21 in #61</li> <li>No-op on Android impl when LocalInspectionMode is true in #72</li> </ul>"},{"location":"changelog/#added_25","title":"Added","text":"<ul> <li>Add screenshot testing with Roborazzi in #70</li> </ul> <p>Full Changelog: https://github.com/chrisbanes/haze/compare/0.4.1...0.4.2</p>"},{"location":"changelog/#0.4.1","title":"0.4.1 2023-12-12","text":""},{"location":"changelog/#fixed_41","title":"Fixed","text":"<ul> <li>Apply Jetpack Compose Shape to HazeChild.kt on init by @almozavr in #55</li> <li>Port #55 to :haze in #56</li> </ul>"},{"location":"changelog/#new-contributors_13","title":"New Contributors","text":"<ul> <li>@almozavr made their first contribution in #55</li> </ul> <p>Full Changelog: https://github.com/chrisbanes/haze/compare/0.4.0...0.4.1</p>"},{"location":"changelog/#0.4.0","title":"0.4.0 2023-12-11","text":""},{"location":"changelog/#new-api","title":"New API!","text":"<p>I have broken the existing API, but hopefully you can see why. You no longer need to manually calculate bounds. <code>HazeState</code> + <code>Modifier.haze()</code> + <code>Modifier.hazeChild()</code> is all you need.</p> <pre><code>val hazeState = remember { HazeState() }\n\nBox {\n  LazyColumn(\n    modifier = Modifier\n      .fillMaxSize()\n      .haze(\n        // Pass it the HazeState we stored above\n        state = hazeState,\n        // Need to provide background color of the content\n        backgroundColor = MaterialTheme.colorScheme.surface,\n      ),\n  ) {\n    // todo\n  }\n\n  Text(\n    text = \"Content will be blurred behind this\",\n    modifier = Modifier\n      // We use hazeChild on anything where we want the background\n      // blurred. We can even provide a shape.\n      .hazeChild(\n        state = hazeState,\n        shape = RoundedCornerShape(16.dp),\n      ),\n  )\n}\n</code></pre>"},{"location":"changelog/#changed_42","title":"Changed","text":"<ul> <li>Update to Kotlin 1.9.20 in #27</li> <li>API refactor in #36</li> <li>Small API tidy-ups in #53</li> <li>More API tweaks in #54</li> </ul>"},{"location":"changelog/#fixed_42","title":"Fixed","text":"<ul> <li>Fix position issue by @MohamedRejeb in #52</li> </ul> <p>Full Changelog: https://github.com/chrisbanes/haze/compare/0.3.1...0.4.0</p>"},{"location":"changelog/#0.3.1","title":"0.3.1 2023-11-10","text":"<p>Small hotfix. We now build Android and JVM targets outputting Java 11 bytecode.</p>"},{"location":"changelog/#fixed_43","title":"Fixed","text":"<ul> <li>Fix JVM targets in #28</li> </ul> <p>Full Changelog: https://github.com/chrisbanes/haze/compare/0.3.0...0.3.1</p>"},{"location":"changelog/#0.3.0","title":"0.3.0 2023-11-08","text":""},{"location":"changelog/#added_26","title":"Added","text":"<ul> <li>\ud83c\udd95 Round Rect support - We now have support for rounded rectangles, thanks to @MohamedRejeb.</li> <li>Add RoundRect support by @MohamedRejeb in #16</li> </ul>"},{"location":"changelog/#changed_43","title":"Changed","text":"<ul> <li>Apply noise texture using HARD_LIGHT in #21</li> <li>Use Metalava to track public API in #23</li> <li>Provide more customization in the API in #22</li> </ul>"},{"location":"changelog/#new-contributors_14","title":"New Contributors","text":"<ul> <li>@MohamedRejeb made their first contribution in #16</li> </ul> <p>Full Changelog: https://github.com/chrisbanes/haze/compare/v0.2.0...0.3.0</p>"},{"location":"changelog/#0.2.0","title":"0.2.0 2023-11-01","text":""},{"location":"changelog/#changed_44","title":"Changed","text":"<ul> <li>Update Android sample to use haze-jetpack-compose in #9</li> <li>Use NodeElement instead of composed by @qdsfdhvh in #13</li> <li>Migrate Android implementations to Modifier.Node in #15</li> </ul>"},{"location":"changelog/#added_27","title":"Added","text":"<ul> <li>Add noise to Android implementation in #12</li> </ul>"},{"location":"changelog/#fixed_44","title":"Fixed","text":"<ul> <li>Fix Skiko backed Haze not displaying multiple Rects in #17</li> </ul>"},{"location":"changelog/#new-contributors_15","title":"New Contributors","text":"<ul> <li>@qdsfdhvh made their first contribution in #13</li> </ul> <p>Full Changelog: https://github.com/chrisbanes/haze/compare/v0.1.0...v0.2.0</p>"},{"location":"changelog/#0.1.0","title":"0.1.0 2023-10-30","text":"<p>First release!</p> <p>Full Changelog: https://github.com/chrisbanes/haze/commits/v0.1.0</p>"},{"location":"core-concepts/","title":"Core Concepts","text":""},{"location":"core-concepts/#core-concepts","title":"Core Concepts","text":"<p>This page explains the fundamental concepts and patterns used throughout Haze, regardless of which effect you're using.</p>"},{"location":"core-concepts/#hazestate","title":"HazeState","text":"<p><code>HazeState</code> is a state holder that manages the rendering targets for visual effects. You create one using <code>rememberHazeState()</code>:</p> <pre><code>val hazeState = rememberHazeState()\n</code></pre> <p>This state is then shared between a <code>Modifier.hazeSource</code> (content to blur from) and one or more <code>Modifier.hazeEffect</code> (content to apply the blur to).</p>"},{"location":"core-concepts/#modifiers","title":"Modifiers","text":"<p>Haze provides two main modifiers that work together:</p>"},{"location":"core-concepts/#modifierhazesource","title":"Modifier.hazeSource","text":"<p>Marks a composable as a source of content that can be blurred by effects elsewhere in the hierarchy.</p> <pre><code>LazyColumn(\n    modifier = Modifier\n        .fillMaxSize()\n        .hazeSource(state = hazeState)\n) {\n    // content\n}\n</code></pre> <p>Parameters:</p> <ul> <li>state: The <code>HazeState</code> instance to share</li> <li>zIndex: Optional z-index for layering (when using overlapping effects)</li> <li>key: Optional identifier for filtering which areas to draw</li> </ul>"},{"location":"core-concepts/#modifierhazeeffect","title":"Modifier.hazeEffect","text":"<p>Applies a visual effect to a composable, drawing blurred content from areas marked with <code>Modifier.hazeSource</code>.</p> <pre><code>TopAppBar(\n    modifier = Modifier.hazeEffect(state = hazeState) {\n        blurEffect {\n            style = HazeMaterials.thin()\n        }\n    }\n)\n</code></pre> <p>The effect is configured inside the lambda block using effect-specific builders.</p>"},{"location":"core-concepts/#hazeeffectscope","title":"HazeEffectScope","text":"<p>The lambda block parameter of <code>Modifier.hazeEffect</code> receives a <code>HazeEffectScope</code>, which provides common properties applicable to all effects:</p>"},{"location":"core-concepts/#common-properties","title":"Common Properties","text":"<pre><code>modifier = Modifier.hazeEffect(state = hazeState) {\n    // Common properties\n    inputScale = HazeInputScale.Auto\n    drawContentBehind = true\n    canDrawArea = { area -&gt; true }\n\n    // Effect-specific configuration\n    blurEffect {\n        // ...\n    }\n}\n</code></pre>"},{"location":"core-concepts/#inputscale","title":"inputScale","text":"<p>Controls the resolution at which the effect source content is rendered. This is a performance optimization that allows the effect to be applied at a lower resolution before being scaled back up.</p> <p>Options:</p> <ul> <li><code>HazeInputScale.None</code>: No scaling (default)</li> <li><code>HazeInputScale.Auto</code>: Automatic scaling with platform defaults</li> <li><code>HazeInputScale.Fixed(value)</code>: Fixed scaling factor (0.0 to 1.0)</li> </ul>"},{"location":"core-concepts/#drawcontentbehind","title":"drawContentBehind","text":"<p>When <code>true</code>, the original source content is drawn before the effect is applied. When <code>false</code>, only the effect is drawn. Defaults to <code>true</code>.</p>"},{"location":"core-concepts/#candrawarea","title":"canDrawArea","text":"<p>An optional filter function that controls which source areas should be included in the effect rendering. Useful for excluding specific layers:</p> <pre><code>canDrawArea = { area -&gt;\n    // return true to include, false to exclude\n    area.key != \"exclude_me\"\n}\n</code></pre>"},{"location":"core-concepts/#foreground-vs-background-effects","title":"Foreground vs Background Effects","text":"<p>Haze supports two modes of applying effects:</p>"},{"location":"core-concepts/#background-effect-most-common","title":"Background Effect (Most Common)","text":"<p>The effect blurs content from elsewhere (behind the composable). Requires both <code>hazeSource</code> and <code>hazeEffect</code>:</p> <pre><code>Box {\n    LazyColumn(\n        modifier = Modifier.hazeSource(state = hazeState)\n    ) {\n        // content\n    }\n\n    TopAppBar(\n        modifier = Modifier.hazeEffect(state = hazeState) {\n            blurEffect { /* ... */ }\n        }\n    )\n}\n</code></pre>"},{"location":"core-concepts/#foreground-effect","title":"Foreground Effect","text":"<p>The effect blurs the content within the composable itself. Only requires <code>hazeEffect</code>:</p> <pre><code>Box(\n    modifier = Modifier.hazeEffect {\n        blurEffect { /* ... */ }\n    }\n) {\n    // This content will be blurred\n}\n</code></pre>"},{"location":"core-concepts/#deep-ui-hierarchies","title":"Deep UI Hierarchies","text":"<p>When <code>HazeState</code> needs to be passed through many levels of nested composables, you can use a composition local instead:</p> <pre><code>val LocalHazeState = compositionLocalOf { HazeState() }\n\n@Composable\nfun HazeExample() {\n    val hazeState = rememberHazeState()\n\n    CompositionLocalProvider(LocalHazeState provides hazeState) {\n        Box {\n            Background()\n            Foreground()\n        }\n    }\n}\n\n@Composable\nfun Foreground() {\n    Text(\n        modifier = Modifier.hazeEffect(state = LocalHazeState.current) {\n            blurEffect { /* ... */ }\n        }\n    )\n}\n</code></pre>"},{"location":"core-concepts/#overlapping-effects","title":"Overlapping Effects","text":"<p>You can have multiple composables that both draw effects from the same source and serve as sources for other effects. This enables complex layering:</p> <pre><code>Box {\n    val hazeState = rememberHazeState()\n\n    Background(\n        modifier = Modifier.hazeSource(hazeState, zIndex = 0f)\n    )\n\n    Card(\n        modifier = Modifier\n            .hazeSource(hazeState, zIndex = 1f)\n            .hazeEffect(hazeState)\n    )\n\n    TopAppBar(\n        modifier = Modifier\n            .hazeSource(hazeState, zIndex = 2f)\n            .hazeEffect(hazeState)\n    )\n}\n</code></pre> <p>In this example: - Background is at zIndex 0 - Card at zIndex 1 draws the background through its effect - TopAppBar at zIndex 2 draws both background and card through its effect</p>"},{"location":"core-concepts/#dialogs","title":"Dialogs","text":"<p>When using effects with dialogs, the effect source must be marked before the dialog is shown:</p> <pre><code>val hazeState = rememberHazeState()\nvar showDialog by remember { mutableStateOf(false) }\n\nBox {\n    LazyColumn(\n        modifier = Modifier.hazeSource(state = hazeState)\n    ) {\n        // background content\n    }\n\n    if (showDialog) {\n        Dialog(onDismissRequest = { showDialog = false }) {\n            Surface(\n                modifier = Modifier.hazeEffect(state = hazeState) {\n                    blurEffect { /* ... */ }\n                }\n            ) {\n                // dialog content\n            }\n        }\n    }\n}\n</code></pre>"},{"location":"core-concepts/#screenshot-testing","title":"Screenshot Testing","text":"<p>Haze supports screenshot testing with platform-specific considerations:</p>"},{"location":"core-concepts/#android-with-robolectric","title":"Android with Robolectric","text":"<p>The <code>RenderEffect.createBlurEffect()</code> tile mode support was only recently added to Robolectric. For correct results at effect edges, run tests against SDK 35+:</p> <pre><code>@Config(sdk = [35])\nclass MyScreenshotTest {\n    // tests\n}\n</code></pre> <p>Without this, you may see strange results at effect boundaries on earlier SDK levels (though this doesn't affect real devices).</p> <p>Other screenshot testing libraries may work but haven't been tested. YMMV.</p>"},{"location":"custom-effects/","title":"Custom Effects","text":""},{"location":"custom-effects/#custom-effects","title":"Custom Effects","text":"<p>This guide explains how to implement custom visual effects that work with Haze's architecture.</p>"},{"location":"custom-effects/#overview","title":"Overview","text":"<p>Haze is designed to be extensible. While Haze ships with a blur effect, you can implement custom effects by implementing the <code>VisualEffect</code> interface and providing a builder extension function.</p> <p>For a complete reference implementation, see the haze-blur module.</p>"},{"location":"custom-effects/#implementing-a-visualeffect","title":"Implementing a VisualEffect","text":"<p>Create a class that implements the <code>VisualEffect</code> interface:</p> <pre><code>import android.graphics.Canvas\nimport dev.chrisbanes.haze.VisualEffect\nimport dev.chrisbanes.haze.VisualEffectContext\n\nclass CustomVisualEffect : VisualEffect {\n    // Your effect's configuration properties\n    var intensity: Float = 1f\n    var color: Color = Color.Black\n\n    override fun attach(context: VisualEffectContext) {\n        // Called when the effect is first attached\n        // Initialize any platform-specific resources here\n    }\n\n    override fun update(context: VisualEffectContext, scope: HazeEffectScope) {\n        // Called when styling properties change\n        // Update internal state based on scope properties\n    }\n\n    override fun detach() {\n        // Called when the effect is removed\n        // Clean up any resources allocated in attach()\n    }\n\n    override fun draw(canvas: Canvas, context: VisualEffectContext) {\n        // Called to render the effect\n        // Draw the effect to the provided canvas\n    }\n}\n</code></pre>"},{"location":"custom-effects/#interface-methods","title":"Interface Methods","text":""},{"location":"custom-effects/#attachcontext-visualeffectcontext","title":"attach(context: VisualEffectContext)","text":"<p>Called once when the effect is first attached to a composable. Use this to: - Allocate platform-specific resources (Shaders, RenderEffects, etc.) - Initialize expensive objects - Query platform capabilities</p> <pre><code>override fun attach(context: VisualEffectContext) {\n    // Example: Initialize a platform-specific shader\n    myShader = createShader(context.size, context.density)\n}\n</code></pre>"},{"location":"custom-effects/#updatecontext-visualeffectcontext-scope-hazeeffectscope","title":"update(context: VisualEffectContext, scope: HazeEffectScope)","text":"<p>Called whenever styling parameters change (when <code>HazeEffectScope</code> properties are updated). Use this to: - Update effect parameters from <code>HazeEffectScope</code> - Recalculate values based on new properties - Update platform-specific rendering parameters</p> <pre><code>override fun update(context: VisualEffectContext, scope: HazeEffectScope) {\n    // Update effect from scope properties\n    myIntensity = scope.alpha\n    myInputScale = scope.inputScale\n}\n</code></pre>"},{"location":"custom-effects/#detach","title":"detach()","text":"<p>Called when the effect is removed. Use this to: - Release native resources - Cancel coroutines - Clean up allocations from <code>attach()</code></p> <pre><code>override fun detach() {\n    myShader?.release()\n    myCoroutineScope.cancel()\n}\n</code></pre>"},{"location":"custom-effects/#drawcanvas-canvas-context-visualeffectcontext","title":"draw(canvas: Canvas, context: VisualEffectContext)","text":"<p>Called to render the effect. This is where the actual effect rendering happens.</p> <pre><code>override fun draw(canvas: Canvas, context: VisualEffectContext) {\n    // Draw the effect to canvas\n    canvas.drawRect(0f, 0f, context.size.width.toFloat(),\n                   context.size.height.toFloat(), myPaint)\n}\n</code></pre>"},{"location":"custom-effects/#visualeffectcontext","title":"VisualEffectContext","text":"<p>The context provided to effect methods gives you access to:</p> <pre><code>interface VisualEffectContext {\n    val size: IntSize                    // Size of the effect area\n    val density: Float                  // Screen pixel density\n    val layoutDirection: LayoutDirection // Text layout direction\n    val coroutineScope: CoroutineScope  // For async operations\n}\n</code></pre>"},{"location":"custom-effects/#hazeeffectscope","title":"HazeEffectScope","text":"<p>The effect receives the <code>HazeEffectScope</code> which provides common properties:</p> <pre><code>interface HazeEffectScope {\n    var alpha: Float                    // Overall effect opacity\n    var inputScale: HazeInputScale      // Performance optimization\n    var drawContentBehind: Boolean      // Whether to draw source content\n    var canDrawArea: ((DrawArea) -&gt; Boolean)? // Layer filtering\n}\n</code></pre>"},{"location":"custom-effects/#providing-a-builder-extension","title":"Providing a Builder Extension","text":"<p>To make your effect convenient to use, provide a builder extension function:</p> <pre><code>fun HazeEffectScope.customEffect(\n    block: CustomVisualEffect.() -&gt; Unit = {}\n): CustomVisualEffect {\n    val effect = CustomVisualEffect()\n    effect.apply(block)\n    visualEffect = effect\n    return effect\n}\n</code></pre> <p>Users can then configure your effect like this:</p> <pre><code>modifier = Modifier.hazeEffect(state = hazeState) {\n    customEffect {\n        intensity = 0.8f\n        color = Color.Blue\n    }\n}\n</code></pre>"},{"location":"custom-effects/#platform-specific-implementations","title":"Platform-Specific Implementations","text":"<p>Effects often need platform-specific code. Use <code>expect</code>/<code>actual</code> to provide platform implementations:</p> <p>commonMain: </p><pre><code>expect fun createCustomShader(size: IntSize): Shader\n\nclass CustomVisualEffect : VisualEffect {\n    private lateinit var shader: Shader\n\n    override fun attach(context: VisualEffectContext) {\n        shader = createCustomShader(context.size)\n    }\n}\n</code></pre> <p>androidMain: </p><pre><code>actual fun createCustomShader(size: IntSize): Shader {\n    // Android-specific shader creation\n}\n</code></pre> <p>desktopMain: </p><pre><code>actual fun createCustomShader(size: IntSize): Shader {\n    // Skiko-based shader creation\n}\n</code></pre> <p>See the haze-blur module for complete platform-specific examples.</p>"},{"location":"custom-effects/#publishing-your-effect-module","title":"Publishing Your Effect Module","text":"<p>To share your custom effect, publish it as a library:</p> <ol> <li>Create a new Gradle module (e.g., <code>haze-myeffect</code>)</li> <li>Add <code>haze</code> as a dependency:    <pre><code>dependencies {\n    api(\"dev.chrisbanes.haze:haze:2.0.0\")\n}\n</code></pre></li> <li>Publish to Maven Central or your preferred repository</li> </ol> <p>Users can then add it like any effect: </p><pre><code>dependencies {\n    implementation(\"dev.chrisbanes.haze:haze-myeffect:1.0.0\")\n}\n</code></pre>"},{"location":"custom-effects/#example-simple-tint-effect","title":"Example: Simple Tint Effect","text":"<p>Here's a minimal example of a custom effect that applies a color tint:</p> <pre><code>class TintVisualEffect : VisualEffect {\n    var color: Color = Color.Black\n    var alpha: Float = 0.2f\n\n    private val paint = Paint().apply {\n        isAntiAlias = true\n    }\n\n    override fun attach(context: VisualEffectContext) {\n        // No resources to allocate for a simple tint\n    }\n\n    override fun update(context: VisualEffectContext, scope: HazeEffectScope) {\n        paint.color = color.copy(alpha = scope.alpha * alpha).toArgb()\n    }\n\n    override fun detach() {\n        // Nothing to clean up\n    }\n\n    override fun draw(canvas: Canvas, context: VisualEffectContext) {\n        canvas.drawRect(\n            0f, 0f,\n            context.size.width.toFloat(),\n            context.size.height.toFloat(),\n            paint\n        )\n    }\n}\n\nfun HazeEffectScope.tintEffect(\n    block: TintVisualEffect.() -&gt; Unit = {}\n) {\n    val effect = TintVisualEffect()\n    effect.apply(block)\n    visualEffect = effect\n}\n</code></pre> <p>Usage: </p><pre><code>modifier = Modifier.hazeEffect(state = hazeState) {\n    tintEffect {\n        color = Color.Blue\n        alpha = 0.3f\n    }\n}\n</code></pre>"},{"location":"custom-effects/#best-practices","title":"Best Practices","text":"<ol> <li>Resource Management - Always allocate resources in <code>attach()</code> and clean up in <code>detach()</code></li> <li>Thread Safety - Effects may be accessed from multiple threads; use appropriate synchronization</li> <li>Performance - Remember <code>draw()</code> is called frequently; optimize for performance</li> <li>Input Scale - Respect <code>inputScale</code> from <code>HazeEffectScope</code> to support performance optimizations</li> <li>Documentation - Document your effect's configuration properties clearly</li> <li>Testing - Use screenshot tests to verify your effect works correctly</li> </ol>"},{"location":"custom-effects/#next-steps","title":"Next Steps","text":"<ul> <li>See Architecture for an overview of Haze's design</li> <li>Review the haze-blur module for a production implementation</li> <li>Check out the sample code for usage examples</li> </ul>"},{"location":"migrating-2.0/","title":"Migrating to Haze 2.0","text":""},{"location":"migrating-2.0/#migrating-to-haze-20","title":"Migrating to Haze 2.0","text":"<p>Haze 2.0 introduces a major architectural refactor that improves modularity and extensibility by introducing a pluggable visual effects system. While this is a breaking change, the migration path is straightforward and the core usage patterns remain familiar.</p>"},{"location":"migrating-2.0/#overview-of-changes","title":"Overview of Changes","text":"<p>The primary change in v2 is the extraction of blur functionality from the core <code>haze</code> module into a separate <code>haze-blur</code> module. This is part of a new architecture that introduces the <code>VisualEffect</code> interface, allowing Haze to support different types of visual effects beyond just blurring.</p> <p>Key Changes:</p> <ul> <li>New module dependency: Blur functionality now requires the <code>haze-blur</code> module</li> <li>API nesting: All blur properties now require a <code>blurEffect {}</code> wrapper</li> <li>Package changes: Blur-related classes moved to <code>dev.chrisbanes.haze.blur</code> package</li> <li>Removed APIs: <code>rememberHazeState(blurEnabled)</code> parameter removed</li> </ul> <p>What Hasn't Changed:</p> <ul> <li>Core modifiers (<code>hazeSource</code>, <code>hazeEffect</code>) signatures remain the same</li> <li><code>HazeState</code> core API unchanged</li> <li>Platform support unchanged</li> <li>Performance characteristics unchanged</li> <li><code>HazeEffectScope</code> properties like <code>inputScale</code>, <code>drawContentBehind</code>, <code>canDrawArea</code> unchanged</li> </ul>"},{"location":"migrating-2.0/#dependency-changes","title":"Dependency Changes","text":""},{"location":"migrating-2.0/#add-the-haze-blur-module","title":"Add the haze-blur Module","text":"<p>In addition to the core <code>haze</code> module, you now need to explicitly add the <code>haze-blur</code> module to use blur effects:</p> <pre><code>dependencies {\n  implementation(\"dev.chrisbanes.haze:haze:2.0.0\")\n  implementation(\"dev.chrisbanes.haze:haze-blur:2.0.0\") // NEW in v2\n}\n</code></pre>"},{"location":"migrating-2.0/#update-imports","title":"Update Imports","text":"<p>Several blur-related classes have moved to the <code>dev.chrisbanes.haze.blur</code> package:</p> <p>V1 imports: </p><pre><code>import dev.chrisbanes.haze.HazeStyle\nimport dev.chrisbanes.haze.HazeTint\nimport dev.chrisbanes.haze.HazeProgressive\nimport dev.chrisbanes.haze.LocalHazeStyle\n</code></pre> <p>V2 imports: </p><pre><code>import dev.chrisbanes.haze.blur.HazeStyle\nimport dev.chrisbanes.haze.blur.HazeTint\nimport dev.chrisbanes.haze.blur.HazeProgressive\nimport dev.chrisbanes.haze.blur.LocalHazeStyle\nimport dev.chrisbanes.haze.blur.blurEffect // NEW: extension function\n</code></pre>"},{"location":"migrating-2.0/#api-migration","title":"API Migration","text":""},{"location":"migrating-2.0/#basic-blur-configuration","title":"Basic Blur Configuration","text":"<p>All blur-related properties that were previously set directly on <code>HazeEffectScope</code> now need to be wrapped in a <code>blurEffect {}</code> block.</p> v1v2 <pre><code>Modifier.hazeEffect(state = hazeState) {\n  blurRadius = 20.dp\n  tints = listOf(HazeTint(Color.Black.copy(alpha = 0.7f)))\n  noiseFactor = 0.15f\n}\n</code></pre> <pre><code>Modifier.hazeEffect(state = hazeState) {\n  blurEffect {  // NEW: wrap blur properties\n    blurRadius = 20.dp\n    tints = listOf(HazeTint(Color.Black.copy(alpha = 0.7f)))\n    noiseFactor = 0.15f\n  }\n}\n</code></pre>"},{"location":"migrating-2.0/#using-material-styles","title":"Using Material Styles","text":"v1v2 <pre><code>Modifier.hazeEffect(state = hazeState, style = HazeMaterials.ultraThin())\n</code></pre> <pre><code>val ultraThin = HazeMaterials.ultraThin()\nModifier.hazeEffect(state = hazeState) {\n  blurEffect {\n    style = ultraThin\n  }\n}\n</code></pre>"},{"location":"migrating-2.0/#progressive-blurs","title":"Progressive Blurs","text":"v1v2 <pre><code>Modifier.hazeEffect(state = hazeState) {\n  progressive = HazeProgressive.verticalGradient(startIntensity = 1f, endIntensity = 0f)\n}\n</code></pre> <pre><code>Modifier.hazeEffect(state = hazeState) {\n  blurEffect {\n    progressive = HazeProgressive.verticalGradient(startIntensity = 1f, endIntensity = 0f)\n  }\n}\n</code></pre>"},{"location":"migrating-2.0/#masking","title":"Masking","text":"v1v2 <pre><code>Modifier.hazeEffect(state = hazeState) {\n  mask = Brush.verticalGradient(...)\n}\n</code></pre> <pre><code>Modifier.hazeEffect(state = hazeState) {\n  blurEffect {\n    mask = Brush.verticalGradient(...)\n  }\n}\n</code></pre>"},{"location":"migrating-2.0/#enablingdisabling-blur","title":"Enabling/Disabling Blur","text":"v1v2 <pre><code>// At the state level (REMOVED in v2)\nval hazeState = rememberHazeState(blurEnabled = true)\n\n// At the effect level\nModifier.hazeEffect(state = hazeState) {\n  blurEnabled = true\n}\n</code></pre> <pre><code>// At the state level - parameter removed\nval hazeState = rememberHazeState()\n\n// At the effect level - now inside blurEffect {}\nModifier.hazeEffect(state = hazeState) {\n  blurEffect {\n    blurEnabled = true\n  }\n}\n</code></pre>"},{"location":"migrating-2.0/#foreground-blurring","title":"Foreground Blurring","text":"v1v2 <pre><code>Modifier.hazeEffect {\n  tints = listOf(HazeTint(Color.Black.copy(alpha = 0.5f)))\n  progressive = HazeProgressive.verticalGradient(...)\n}\n</code></pre> <pre><code>Modifier.hazeEffect {\n  blurEffect {\n    tints = listOf(HazeTint(Color.Black.copy(alpha = 0.5f)))\n    progressive = HazeProgressive.verticalGradient(...)\n  }\n}\n</code></pre>"},{"location":"migrating-2.0/#complete-api-mapping","title":"Complete API Mapping","text":"V1 Location V2 Location Notes <code>HazeEffectScope.blurRadius</code> <code>BlurVisualEffect.blurRadius</code> Inside <code>blurEffect {}</code> <code>HazeEffectScope.tints</code> <code>BlurVisualEffect.tints</code> Inside <code>blurEffect {}</code> <code>HazeEffectScope.noiseFactor</code> <code>BlurVisualEffect.noiseFactor</code> Inside <code>blurEffect {}</code> <code>HazeEffectScope.progressive</code> <code>BlurVisualEffect.progressive</code> Inside <code>blurEffect {}</code> <code>HazeEffectScope.mask</code> <code>BlurVisualEffect.mask</code> Inside <code>blurEffect {}</code> <code>HazeEffectScope.style</code> <code>BlurVisualEffect.style</code> Inside <code>blurEffect {}</code> <code>HazeEffectScope.backgroundColor</code> <code>BlurVisualEffect.backgroundColor</code> Inside <code>blurEffect {}</code> <code>HazeEffectScope.blurredEdgeTreatment</code> <code>BlurVisualEffect.blurredEdgeTreatment</code> Inside <code>blurEffect {}</code> <code>HazeEffectScope.fallbackTint</code> <code>BlurVisualEffect.fallbackTint</code> Inside <code>blurEffect {}</code> <code>HazeEffectScope.alpha</code> <code>BlurVisualEffect.alpha</code> Inside <code>blurEffect {}</code> <code>HazeEffectScope.blurEnabled</code> <code>BlurVisualEffect.blurEnabled</code> Inside <code>blurEffect {}</code> <code>HazeEffectScope.inputScale</code> <code>HazeEffectScope.inputScale</code> Unchanged - still on scope <code>HazeEffectScope.drawContentBehind</code> <code>HazeEffectScope.drawContentBehind</code> Unchanged - still on scope <code>HazeEffectScope.clipToAreasBounds</code> <code>HazeEffectScope.clipToAreasBounds</code> Unchanged - still on scope <code>HazeEffectScope.canDrawArea</code> <code>HazeEffectScope.canDrawArea</code> Unchanged - still on scope <code>rememberHazeState(blurEnabled)</code> Removed Use <code>blurEffect { blurEnabled = ... }</code> <code>dev.chrisbanes.haze.HazeStyle</code> <code>dev.chrisbanes.haze.blur.HazeStyle</code> Package change <code>dev.chrisbanes.haze.HazeTint</code> <code>dev.chrisbanes.haze.blur.HazeTint</code> Package change <code>dev.chrisbanes.haze.HazeProgressive</code> <code>dev.chrisbanes.haze.blur.HazeProgressive</code> Package change <code>dev.chrisbanes.haze.LocalHazeStyle</code> <code>dev.chrisbanes.haze.blur.LocalHazeStyle</code> Package change"},{"location":"migrating-2.0/#step-by-step-migration","title":"Step-by-Step Migration","text":"<p>Update dependencies in your <code>build.gradle.kts</code>:</p> <pre><code>implementation(\"dev.chrisbanes.haze:haze:2.0.0\")\nimplementation(\"dev.chrisbanes.haze:haze-blur:2.0.0\") // Add this\n</code></pre> <p>Update imports for blur-related classes:</p> <ul> <li>Change <code>dev.chrisbanes.haze.HazeStyle</code> \u2192 <code>dev.chrisbanes.haze.blur.HazeStyle</code></li> <li>Change <code>dev.chrisbanes.haze.HazeTint</code> \u2192 <code>dev.chrisbanes.haze.blur.HazeTint</code></li> <li>Change <code>dev.chrisbanes.haze.HazeProgressive</code> \u2192 <code>dev.chrisbanes.haze.blur.HazeProgressive</code></li> <li>Change <code>dev.chrisbanes.haze.LocalHazeStyle</code> \u2192 <code>dev.chrisbanes.haze.blur.LocalHazeStyle</code></li> <li>Add <code>import dev.chrisbanes.haze.blur.blurEffect</code></li> </ul> <p>Wrap blur properties in <code>blurEffect {}</code>:</p> <ul> <li>Find all <code>Modifier.hazeEffect { ... }</code> blocks</li> <li>Wrap blur-related properties in <code>blurEffect { ... }</code></li> <li>Leave <code>inputScale</code>, <code>drawContentBehind</code>, <code>clipToAreasBounds</code>, <code>canDrawArea</code> outside the <code>blurEffect {}</code> block</li> </ul> <p>Update <code>rememberHazeState()</code> calls:</p> <ul> <li>Remove <code>blurEnabled</code> parameter if present</li> <li>Move blur enabling logic to <code>blurEffect { blurEnabled = ... }</code> if needed</li> </ul> <p>Update Material style usage:</p> <ul> <li>Change <code>hazeEffect(state, style = ...)</code> to <code>hazeEffect(state) { blurEffect { style = ... } }</code></li> </ul>"},{"location":"migrating-2.0/#understanding-the-new-architecture","title":"Understanding the New Architecture","text":"<p>The v2 architecture introduces the <code>VisualEffect</code> interface, which allows Haze to support different types of visual effects:</p> <ul> <li><code>VisualEffect</code> - Core interface for all visual effects (in <code>haze</code> module)</li> <li><code>BlurVisualEffect</code> - Implementation for blur effects (in <code>haze-blur</code> module)</li> <li><code>HazeEffectScope.visualEffect</code> - Property that holds the current effect</li> </ul> <p>The <code>blurEffect {}</code> extension function is a convenience API that creates and configures a <code>BlurVisualEffect</code> instance. Under the hood, it sets the <code>visualEffect</code> property on <code>HazeEffectScope</code>.</p> <p>This architecture enables:</p> <ul> <li>Better separation of concerns</li> <li>Potential for custom visual effects in the future</li> <li>Smaller core module for users who don't need blur</li> <li>More maintainable and testable code</li> </ul>"},{"location":"migrating-2.0/#getting-help","title":"Getting Help","text":"<p>If you encounter issues during migration:</p> <ul> <li>Check the GitHub Discussions</li> <li>Review the updated usage documentation</li> <li>See working examples in the sample app</li> <li>File an issue on GitHub</li> </ul>"},{"location":"performance/","title":"Performance","text":"<p>Real-time blurring is a non-trivial operation, especially for mobile devices, so developers are rightly worried about the performance impact of using something like Haze.</p> <p>Haze tries to use the most performant mechanism possible on each platform, which can basically be simplified into 2: <code>RenderEffect</code> on Android, and using Skia's <code>ImageFilter</code>s directly on iOS and Desktop.</p>"},{"location":"performance/#input-scale","title":"Input Scale","text":"<p>You can provide an input scale value which determines how much the content is scaled in both the x and y dimensions, allowing the blur effect to be potentially applied over scaled-down content (and thus less pixels), before being scaled back up and drawn at the original size. You can find more information on how to use this here.</p> <p>In terms of the performance benefit which scaling provides, it's fairly small. In our Android benchmark tests, using an <code>inputScale</code> set to <code>0.5</code> reduced the cost of Haze by 5-20%. You can read more about this below.</p> <p>Cost of Haze</p> <p>Just to call out: the percentage that I mentioned is a reduction in the cost of Haze, not the total frame duration. Haze itself introduces a cost, which you can read more about below. The reduction in total frame duration duration will be in the region of 3-5%.</p>"},{"location":"performance/#benchmarks","title":"Benchmarks","text":"<p>To quantify performance, we have a number of Macrobenchmark tests to measure Haze's effect on drawing performance on Android. We'll be using these on every major release to ensure that we do not unwittingly regress performance.</p> <p>Anyway, in the words of Jerry Maguire, \"Show Me The Money\"...</p> <p>We currently have 4 benchmark scenarios, each of them is one of the samples in the sample app, and picked to cover different things:</p> <ul> <li>Scaffold. The simple example, where the app bar and bottom navigation bar are blurred, with a scrollable list. This example uses rectangular haze areas.</li> <li>Scaffold, with progressive. Same as Scaffold, but using a progressive blur.</li> <li>Images List. Each item in the list has it's own <code>hazeSource</code> and <code>hazeEffect</code>. As each item has it's own <code>hazeSource</code>, the internal haze state does not change all that much (the list item content moves, but the <code>hazeEffect</code> doesn't in terms of local coordinates). This is more about multiple testing <code>RenderNode</code>s. This example uses rounded rectangle haze areas (i.e. we use <code>clipPath</code>).</li> <li>Credit Card. A simple example, where the user can drag the <code>hazeEffect</code>. This tests how fast Haze's internal state invalidates and propogates to the <code>RenderNode</code>s. This example uses rounded rectangle haze areas like 'Images List'.</li> </ul> <p>Test setup</p> <p>All of the tests were ran with 16 iterations on a Pixel 6, running the latest version of Android available.</p> <p>As with all benchmark tests, the results are only true for the exact things being tested. Using Haze in your own applications may result in different performance characteristics, so it is wise to write your own performance tests to validate the impact to your apps. Benchmark tests will always have variability in them too, so don't take the numbers listed below as exact values. Look at them more as a guide.</p> <p>The numbers listed below the P90 frame durations in milliseconds, which tend to be a good indicator of frames where a user interaction is happening (scrolling, etc). However, as these are the P90 values, these indicate the longest 10% frame durations, and thus are (probably) not indicitive of the performance which users see most of the time. It all depends on the distribution of the frame durations, but we're quickly getting into entry-level statistics, which is beyond what we're trying to document here.</p>"},{"location":"performance/#cost-of-haze","title":"Cost of Haze","text":"<p>We can also measure the rough cost of using Haze in the same samples. Here we've ran the same tests, with Haze being completely disabled:</p> Test 1.0.x (disabled) 1.0.x Difference Scaffold 7.5 ms 9.7 ms +29% Images List 6.6 ms 9.6 ms +45% Credit Card 6.6 ms 13.1 ms +98%"},{"location":"performance/#cost-of-features","title":"Cost of features","text":"<p>We can also measure the rough cost of using features, such as input scale, progressive and masking:</p> Test P90 frame duration (ms) Difference (in Haze cost) Scaffold 9.7 ms - Scaffold (inputScale = 0.5) 9.6 ms -5% Scaffold (masked) 9.8 ms +5% Scaffold (progressive) 9.7 ms 0% Scaffold (progressive, inputScale = 0.5) 9.4 ms -14% <p>The values are all very close, with the differences easily being within a margin of error, so don't use these differences as exact values (especially with the variability that we mentioned above). I think there's two big take aways here though:</p> <ul> <li>Masking has a negligible effect on frame durations.</li> <li>Progessive has a negligible effect on frame durations, when using using our custom blur shader (Android SDK 34+, all other platforms).</li> <li>Input Scale has a small but positive effect on frame duration.</li> </ul> <p>Full results</p> <p>For those interested, you can find the full results in this spreadsheet.</p>"},{"location":"recipes/","title":"Recipes","text":""},{"location":"recipes/#scaffold","title":"Scaffold","text":"<p>Blurring the content behind app bars is a common use case, so how can we use Haze with <code>Scaffold</code>? It's pretty much the same as above:</p> <p>Multiple hazeEffects</p> <p>Note: We are using multiple <code>hazeEffect</code>s in this example. You can actually use an abitrary number of <code>hazeEffect</code>s.</p> <pre><code>val hazeState = rememberHazeState()\n\nScaffold(\n  topBar = {\n    TopAppBar(\n      // Need to make app bar transparent to see the content behind\n      colors = TopAppBarDefaults.largeTopAppBarColors(Color.Transparent),\n      modifier = Modifier\n        .hazeEffect(state = hazeState) {\n          blurEffect {\n            style = HazeMaterials.thin()\n          }\n        }\n        .fillMaxWidth(),\n    ) {\n      /* todo */\n    }\n  },\n  bottomBar = {\n    NavigationBar(\n      containerColor = Color.Transparent,\n      modifier = Modifier\n        .hazeEffect(state = hazeState) {\n          blurEffect {\n            style = HazeMaterials.thin()\n          }\n        }\n        .fillMaxWidth(),\n    ) {\n      /* todo */\n    }\n  },\n) {\n  LazyVerticalGrid(\n    modifier = Modifier\n      .hazeSource(\n        state = hazeState,\n        style = HazeDefaults.style(backgroundColor = MaterialTheme.colorScheme.surface),\n      ),\n  ) {\n    // todo\n  }\n}\n</code></pre>"},{"location":"recipes/#sticky-headers","title":"Sticky Headers","text":"<p>The <code>stickyHeader</code> functionality on <code>LazyColumn</code> and friends is very useful, but unfortunately the limitations of Haze means that blurring the list contents for the header background is tricky.</p> <p>Since we can not use <code>Modifier.hazeSource</code> on the <code>LazyColumn</code> and <code>Modifier.hazeEffect</code> on items, as we would get into recursive drawing, we need to get a bit more creative.</p> <p>Since we can have multiple nodes using <code>Modifier.hazeSource</code>, we can use the modifier on all non-header items, and then use <code>hazeEffect</code> as normal on the <code>stickyHeader</code>:</p> <pre><code>val hazeState = rememberHazeState()\n\nLazyColumn(...) {\n  stickyHeader {\n    Header(\n      modifier = Modifier\n        .hazeEffect(state = hazeState) {\n          blurEffect {\n            style = HazeMaterials.thin()\n          }\n        },\n    )\n  }\n\n  items(list) { item -&gt;\n    Foo(\n      modifier = Modifier\n        .hazeSource(hazeState),\n    )\n  }\n}\n</code></pre> <p>A more complete example can be found here: ListWithStickyHeaders.</p> <p></p>"},{"location":"using-snapshot-version/","title":"Using a Snapshot Version of the Library","text":""},{"location":"using-snapshot-version/#using-a-snapshot-version-of-the-library","title":"Using a Snapshot Version of the Library","text":"<p>If you would like to depend on the cutting edge version of the library, you can use the snapshot versions that are published to Sonatype Central Repository's snapshot repository. These are updated on every commit to <code>main</code>.</p> <p>To do so:</p> <pre><code>repositories {\n    // ...\n    maven(\"https://central.sonatype.com/repository/maven-snapshots\")\n}\n\ndependencies {\n    // Check the latest SNAPSHOT version from the link above\n    implementation(\"dev.chrisbanes.haze:haze:XXX-SNAPSHOT\")\n}\n</code></pre>"},{"location":"blur/","title":"Overview","text":""},{"location":"blur/#blur-effect","title":"Blur Effect","text":"<p>The blur effect creates a glassmorphism-style blur of content in your UI. It's the primary visual effect in Haze and can be applied to both background and foreground content.</p>"},{"location":"blur/#download","title":"Download","text":"<pre><code>repositories {\n    mavenCentral()\n}\n\ndependencies {\n    // Core library infrastructure\n    implementation(\"dev.chrisbanes.haze:haze:&lt;version&gt;\")\n\n    // Blur effect\n    implementation(\"dev.chrisbanes.haze:haze-blur:&lt;version&gt;\")\n\n    // Optional: Pre-built blur styles\n    implementation(\"dev.chrisbanes.haze:haze-materials:&lt;version&gt;\")\n}\n</code></pre>"},{"location":"blur/#platform-support","title":"Platform Support","text":"<p>The blur effect is supported on all platforms with platform-optimized implementations:</p> Platform Supported Notes Android \u2705 API 11+, optimized for API 13+ Desktop (JVM) \u2705 Skia-based shader implementation iOS \u2705 Skia-based shader implementation Wasm \u2705 Custom shader implementation JS/Canvas \u2705 Canvas filter-based"},{"location":"blur/#basic-usage","title":"Basic Usage","text":"<p>The blur effect is applied using the <code>blurEffect {}</code> builder within <code>Modifier.hazeEffect</code>:</p> <pre><code>val hazeState = rememberHazeState()\n\nBox {\n    LazyColumn(\n        modifier = Modifier\n            .fillMaxSize()\n            .hazeSource(state = hazeState)\n    ) {\n        // scrollable content\n    }\n\n    TopAppBar(\n        modifier = Modifier\n            .hazeEffect(state = hazeState) {\n                blurEffect {\n                    style = HazeMaterials.thin()\n                }\n            }\n    )\n}\n</code></pre> <p>For more detailed usage patterns, see the Blur Usage guide.</p>"},{"location":"blur/#styling","title":"Styling","text":"<p>The appearance of the blur effect is controlled through the HazeStyle class:</p> <ul> <li>Blur Radius: Controls the strength of the blur</li> <li>Tint: Applies a color overlay for contrast</li> <li>Noise: Adds visual texture</li> </ul> <p>Pre-built styles are available in the materials guide.</p>"},{"location":"blur/#performance","title":"Performance","text":"<p>Blur can be a resource-intensive effect. See the Performance page for detailed benchmarks and optimization techniques on each platform.</p>"},{"location":"blur/#next-steps","title":"Next Steps","text":"<ul> <li>Blur Usage Guide - Comprehensive usage patterns and features</li> <li>Materials - Pre-built blur styles</li> <li>Performance Tips - Optimization techniques</li> </ul>"},{"location":"blur/faq/","title":"FAQs","text":""},{"location":"blur/faq/#whats-the-difference-between-this-and-modifierblur","title":"What's the difference between this and Modifier.blur?","text":"<p>The Modifier.blur modifier and Haze may sound similar, but what they provide is different.</p> <p>Haze primarily provides background blurring, meaning that it will blur content behind, not the content itself. This is typically required to implement glass-like effects. <code>Modifier.blur</code> performs 'foreground blurring' (or content blurring) where the content in the node itself is blurred. Haze can work in this mode too, but it's not the primary goal.</p> <p>Other than that, Haze provides a whole bunch of other features which you can read about on the Usage page.</p>"},{"location":"blur/faq/#are-the-blur-implementations-the-same-across-different-platforms","title":"Are the blur implementations the same across different platforms?","text":"<p>The short answer to this is yes. The majority of the implementation is the same across all platforms.</p> <p>The only differences are in how the blur effect is implemented, especially on Android.</p> <p>For most platforms we can use on RenderEffects to implement the blurring, but the implementations used are platform specific. All of the platforms implement them in a very similar, its just the platform classes being used which are different.</p>"},{"location":"blur/faq/#what-versions-of-android-does-haze-work-on","title":"What versions of Android does Haze work on?","text":"<p>See the Platforms page for a detailed run down of what is supported on various platforms.</p>"},{"location":"blur/materials/","title":"Materials","text":""},{"location":"blur/materials/#blur-materials","title":"Blur Materials","text":"<p>Pre-built blur style implementations that match common design systems.</p>"},{"location":"blur/materials/#download","title":"Download","text":"<pre><code>repositories {\n    mavenCentral()\n}\n\ndependencies {\n    implementation(\"dev.chrisbanes.haze:haze-materials:&lt;version&gt;\")\n}\n</code></pre>"},{"location":"blur/materials/#hazematerials","title":"HazeMaterials","text":"<p>Implementations of Material Design blur styles, inspired by SwiftUI Material APIs. These don't attempt to replicate exact iOS effects, but rather provide pleasant blur styles compatible with Material Design.</p> <p></p> <p>Class reference: HazeMaterials.</p>"},{"location":"blur/materials/#usage","title":"Usage","text":"<pre><code>Box {\n  LazyColumn(\n    modifier = Modifier.hazeSource(state = hazeState)\n  ) {\n    // content\n  }\n\n  TopAppBar(\n    modifier = Modifier.hazeEffect(state = hazeState) {\n      blurEffect {\n        style = HazeMaterials.thin()\n      }\n    }\n  )\n}\n</code></pre> <p>Available levels: <code>thin()</code>, <code>regular()</code>, <code>thick()</code>, and more.</p>"},{"location":"blur/materials/#cupertinomaterials","title":"CupertinoMaterials","text":"<p>Blur styles matching Apple platforms (iOS, macOS). Values are taken from the iOS 18 Figma file published by Apple.</p> <p>Use these for consistency when mixing Compose Multiplatform with SwiftUI.</p> <p></p> <p>Class reference: CupertinoMaterials.</p>"},{"location":"blur/materials/#usage_1","title":"Usage","text":"<pre><code>blurEffect {\n  style = CupertinoMaterials.thin()\n}\n</code></pre>"},{"location":"blur/materials/#fluentmaterials","title":"FluentMaterials","text":"<p>Blur styles matching Windows platforms (WinUI 3). Values are taken from the WinUI 3 Figma file published by Microsoft.</p> <p>Use these for consistency when mixing Compose Multiplatform with WinUI.</p> <p></p> <p>Class reference: FluentMaterials.</p>"},{"location":"blur/materials/#usage_2","title":"Usage","text":"<pre><code>blurEffect {\n  style = FluentMaterials.thin()\n}\n</code></pre>"},{"location":"blur/materials/#custom-styles","title":"Custom Styles","text":"<p>To create custom blur styles, use the HazeStyle data class:</p> <pre><code>val customStyle = HazeStyle(\n  blurRadius = 15.dp,\n  tints = listOf(Color.Black.copy(alpha = 0.2f)),\n  noise = 0.1f\n)\n\nblurEffect {\n  style = customStyle\n}\n</code></pre> <p>Or set properties directly in the <code>blurEffect</code> block:</p> <pre><code>blurEffect {\n  blurRadius = 15.dp\n  tints = listOf(Color.Black.copy(alpha = 0.2f))\n  noise = 0.1f\n}\n</code></pre>"},{"location":"blur/platforms/","title":"Platforms","text":"<p>Haze works on all platforms which Compose Multiplatform supports.</p> <p>Compose Multiplatform platforms</p> <p>Please note, the list of platforms which Compose Multiplatform (CMP) supports is different to the platforms which Kotlin Multiplatform supports. Please stop raising issues about adding \"MacOS\" support; it is not supported (directly) by CMP.</p>"},{"location":"blur/platforms/#android","title":"Android","text":""},{"location":"blur/platforms/#android-13","title":"Android 13+","text":"<p>SDK Levels: 33+</p> <p>Haze is in its optimal environment for all use cases when running on recent versions of Android.</p>"},{"location":"blur/platforms/#android-12-12l","title":"Android 12 &amp; 12L","text":"<p>SDK Levels: 31 &amp; 32</p> <p>When running on these versions of Android, Haze needs to use a few workarounds:</p>"},{"location":"blur/platforms/#hazeprogressive","title":"HazeProgressive","text":"<p>Only linear gradient HazeProgressive effects are supported, and are implemented via a mechanism which draws the effect multiple times. This can hurt performance, so it is recommended to verify the performance of this yourself.</p> <p>You can disable this behavior by setting the preferPerformance property. When set to true, the progressive 'effect' will instead be drawn via a mask:</p> <pre><code>LargeTopAppBar(\n  // ...\n  modifier = Modifier.hazeEffect(hazeState) {\n    progressive = HazeProgressive.verticalGradient(\n      // ...\n      preferPerformance = true,\n    )\n  }\n)\n</code></pre> <p>All other progressive types will fallback to using a mask when running on Android 12 &amp; 12L.</p>"},{"location":"blur/platforms/#android-12-and-below","title":"Android 12 and below","text":"<p>When running on Android 12 and below, we can not rely on RenderNode (which GraphicsLayer use internally) re-painting when content changes. For this reason, Haze previously disabled blurring effects on Android 12 by default, as we could not guarantee that it works.</p> <p>As of Haze v1.6 and newer though, we have a mechanism allowing Haze to re-enable blurring on Android 12 by default.</p> <p>This same mechanism is required to enable blurring to work on Android 11 and below too, when enabled (more on that below).</p> Manual invalidation mechanism <p>The mechanism involves Haze manually invalidating the graphics layers manually when necessary, using 'pre draw' events. This document is not the place to go deep into 'pre draw' events, but the main point here is that Compose does not send a pre-draw event itself, so Haze needs to use the host view system's listener (via ViewTreeObserver). This means that we are not subscribing to when our particular draw nodes are about to draw, but instead we are called whenever anything is about to be drawn on screen.</p> <p>The TL;DR of this section is that the event we listen to is a lot more global than we need. Ideally we would have a way to know when the <code>hazeSource</code> node is about to be drawn (and only when the node is about to be drawn) but that functionality does not exist.</p> <p>The downside to this mechanism is that it will trigger more invalidations than what is really needed. We're effectively negating some of the granular invalidations which Compose enables through it's phasing system. It should not cause your apps any performance issues, but you can disable blurring if necessary. See docs here for more information.</p>"},{"location":"blur/platforms/#android-11-and-below","title":"Android 11 and below","text":"<p>SDK Levels: 30 and below</p> <p>On Android 11 and below, blurring by default is disabled. When disabled, a scrim (translucent overlay) implementation is used which looks like so:</p> <p></p>"},{"location":"blur/platforms/#renderscript-blurring","title":"RenderScript blurring","text":"<p>\ud83c\udd95 in Haze 1.6 is an implementation of blurring which uses RenderScript.</p> <p>Experimental</p> <p>Blurring on Android 11 and below is not enabled by default, and is considered experimental.</p> <p>We may enable it by default in the future, or we may just remove it all together if it is deemed too unstable. Lots of testing and feedback is required, so please raise issues if you find any problems.</p> <p>Using RenderScript does come with some drawbacks compared to RenderEffect which we use on Android 12+. The biggest is that RenderScript and your drawn content are two distinct things, which means that for Haze to blur your composable content, we need to draw it somewhere which RenderScript can read, and then also write to. This results in copying of data, which makes this blurring implementation quite slow.</p> <p>As this implementation is slow, it means that processing a frame can easily take longer than our allocated frame budget time. To combat this, Haze uses a background thread to process and blur frames, but this comes with the drawback that content updates will nearly always be a frame (or more) behind. In addition to this, Haze will only ever process one frame at a time. If a new draw is called and Haze is still processing a previous frame, Haze will simply ignore it. This is to ensure that Haze does not unintentionally create a queue of frames, and potentially overwhelm the device.</p> <p>To the user the blur effect may look 'laggy' or slow to update, especially when the background content changes a lot. This is the compromise which we have decided to make in Haze, but in my opinion it is more than good enough for the majority of use cases.</p> <p></p> <p>As mentioned above, blurring on Android 11 and below is not enabled by default. See the docs here on how to enable it.</p> <p>One final thing to note is that Haze needs to use the \"Manual invalidation mechanism\" mentioned above for this to work.</p> <p>Thanks</p> <p>Big thanks to Serhii Yaremych for his help on this, as we have managed to get an optimized 'content write' working. \ud83d\ude80</p>"},{"location":"blur/platforms/#desktop","title":"Desktop","text":"<p>Desktop JVM is a Compose Multiplatform target which is built upon Skiko, so see the Skiko docs below.</p>"},{"location":"blur/platforms/#ios","title":"iOS","text":"<p>iOS is a Compose Multiplatform target which is built upon Skiko, so see the Skiko docs below.</p>"},{"location":"blur/platforms/#web","title":"Web","text":"<p>Compose for Web is based on Kotlin/Wasm, and is a Compose Multiplatform target which is built upon Skiko, so see the Skiko docs below.</p>"},{"location":"blur/platforms/#skiko","title":"Skiko","text":"<p>Most of the Compose Multiplatform targets are built on top of Skiko, which is a bundled version of the Skia Graphics Library with Kotlin bindings.</p> <p>As Skiko bundles Skia into the app binaries, this means that the host platform we're running on is not particularly important to Haze. All of that is hopefully handled by the platform integration layers in CMP, Skiko and Skia.</p> <p>The most important thing when running on these platforms is the library versions we're built against. Haze is always built, tested and released against the latest stable version of Compose Multiplatform.</p> <p>Other than that, running on a Skiko-backed platform means that Haze is running in its optimal environment.</p>"},{"location":"blur/platforms/#using-pre-release-versions-of-compose-multiplatform","title":"Using pre-release versions of Compose Multiplatform","text":"<p>We do occasionally verify against pre-release versions of CMP, but it's not something we guarantee. If you want to use a pre-release version of Compose Multiplatform, then please test it thoroughly.</p>"},{"location":"blur/usage/","title":"Usage","text":""},{"location":"blur/usage/#blur-usage","title":"Blur Usage","text":"<p>This guide covers the blur effect in detail, including all available features and patterns.</p>"},{"location":"blur/usage/#modes","title":"Modes","text":"<p>Blur works in two modes: 'background blurring' and 'foreground blurring'. Both modes use the same APIs and features, with the main difference being whether you need a <code>HazeState</code>.</p>"},{"location":"blur/usage/#background-blurring-most-common","title":"Background Blurring (Most Common)","text":"<p>Blurs content from elsewhere in the UI that's marked with <code>hazeSource</code>:</p> <pre><code>val hazeState = rememberHazeState()\n\nBox {\n  LazyColumn(\n    modifier = Modifier\n      .fillMaxSize()\n      .hazeSource(state = hazeState)\n  ) {\n    // scrollable content\n  }\n\n  TopAppBar(\n    modifier = Modifier\n      .hazeEffect(state = hazeState) {\n        blurEffect {\n          style = HazeMaterials.thin()\n        }\n      }\n      .fillMaxWidth(),\n  )\n}\n</code></pre>"},{"location":"blur/usage/#foreground-blurring","title":"Foreground Blurring","text":"<p>Blurs the content within the composable itself. No <code>HazeState</code> or <code>hazeSource</code> needed:</p> <pre><code>@Composable\nfun HazeExample(modifier: Modifier = Modifier) {\n  Box(modifier = modifier) {\n    Foreground(\n      modifier = Modifier\n        .hazeEffect {\n          blurEffect {\n            style = HazeMaterials.thin()\n          }\n        }\n        .fillMaxSize()\n    )\n  }\n}\n</code></pre>"},{"location":"blur/usage/#styling","title":"Styling","text":"<p>Blur appearance is controlled via the HazeStyle class or properties in the <code>blurEffect</code> block:</p> <p>Styles can be provided in multiple ways:</p> <ul> <li>LocalHazeStyle composition local</li> <li><code>style</code> property inside <code>blurEffect {}</code> block</li> <li>Individual properties in the <code>blurEffect {}</code> block</li> </ul>"},{"location":"blur/usage/#hazeeffectscope-lambda","title":"HazeEffectScope Lambda","text":"<p>The <code>blurEffect</code> block receives properties you can set dynamically:</p> <pre><code>TopAppBar(\n  modifier = Modifier\n    .hazeEffect(state = hazeState) {\n      blurEffect {\n        alpha = if (listState.firstVisibleItemIndex == 0) {\n          listState.layoutInfo.visibleItemsInfo.first().let {\n            (it.offset / it.size.height.toFloat()).absoluteValue\n          }\n        } else {\n          1f\n        }\n      }\n    },\n)\n</code></pre>"},{"location":"blur/usage/#styling-resolution","title":"Styling Resolution","text":"<p>Each styling property is resolved using the following precedence:</p> <ol> <li>Value set in <code>blurEffect {}</code> block (if specified)</li> <li>Value set via <code>style</code> property in <code>blurEffect {}</code> (if specified)</li> <li>Value set in LocalHazeStyle composition local</li> <li>Default value</li> </ol>"},{"location":"blur/usage/#styling-properties","title":"Styling Properties","text":""},{"location":"blur/usage/#blur-radius","title":"Blur Radius","text":"<p>Controls how strong the blur effect is. Defaults to <code>20.dp</code>. Larger values may be needed to keep foreground control (text) legible.</p> <pre><code>blurEffect {\n  blurRadius = 20.dp\n}\n</code></pre>"},{"location":"blur/usage/#tint","title":"Tint","text":"<p>A tint effect is applied primarily to maintain contrast and legibility. By default, the provided background color is used at 70% opacity. You can provide multiple tints applied in sequence:</p> <pre><code>blurEffect {\n  tints = listOf(\n    Color.Black.copy(alpha = 0.2f),\n    Color.Blue.copy(alpha = 0.1f)\n  )\n}\n</code></pre>"},{"location":"blur/usage/#noise","title":"Noise","text":"<p>Visual noise provides tactility. Defaults to <code>0.15f</code> (15% strength). Disable by setting to <code>0f</code>:</p> <pre><code>blurEffect {\n  noise = 0f  // Disable noise\n}\n</code></pre>"},{"location":"blur/usage/#progressive-gradient-blurs","title":"Progressive (Gradient) Blurs","text":"<p>Progressive blurs vary the blur radius across a dimension. This effect is common on iOS:</p> <p></p> <p>Enable by setting the <code>progressive</code> property on HazeEffectScope:</p> <pre><code>TopAppBar(\n  modifier = Modifier.hazeEffect(hazeState) {\n    blurEffect {\n      progressive = HazeProgressive.verticalGradient(\n        startIntensity = 1f,\n        endIntensity = 0f\n      )\n    }\n  }\n)\n</code></pre>"},{"location":"blur/usage/#linear-gradient","title":"Linear Gradient","text":"<p>Vertical, horizontal, or custom-angle gradients:</p> <pre><code>progressive = HazeProgressive.verticalGradient(\n  startIntensity = 1f,\n  endIntensity = 0f\n)\n\n// or horizontal\nprogressive = HazeProgressive.horizontalGradient(\n  startIntensity = 1f,\n  endIntensity = 0f\n)\n</code></pre> <p>Class documentation: HazeProgressive.LinearGradient</p>"},{"location":"blur/usage/#radial-gradient","title":"Radial Gradient","text":"<p>A gradient radiating from a center point:</p> <pre><code>progressive = HazeProgressive.RadialGradient()\n</code></pre> <p>Class documentation: HazeProgressive.RadialGradient</p>"},{"location":"blur/usage/#custom-brush","title":"Custom Brush","text":"<p>Use any Brush as an alpha mask:</p> <pre><code>progressive = HazeProgressive.Brush(\n  brush = Brush.verticalGradient(...)\n)\n</code></pre> <p>Class documentation: HazeProgressive.Brush</p> <p>Performance of Progressive Blur</p> <p>Progressive blur comes with a performance cost. See the Performance page for benchmarks.</p> <p>Quick summary: Android 13+ costs ~25% more than non-progressive. On Android 12 it's about 2x. Consider using masking below for better performance.</p>"},{"location":"blur/usage/#masking","title":"Masking","text":"<p>Apply any Brush as an opacity mask:</p> <pre><code>TopAppBar(\n  modifier = Modifier.hazeEffect(state = hazeState) {\n    blurEffect {\n      mask = Brush.verticalGradient(\n        colors = listOf(Color.Black, Color.Transparent)\n      )\n    }\n  }\n)\n</code></pre> <p>Mask vs Progressive</p> <p>Masks fade the effect through opacity only and may not feel as refined as progressive blur. However, masks are much faster with negligible performance cost.</p>"},{"location":"blur/usage/#input-scale","title":"Input Scale","text":"<p>Optimize performance by rendering the effect at a lower resolution:</p> <p></p> <pre><code>TopAppBar(\n  modifier = Modifier.hazeEffect(state = hazeState) {\n    inputScale = HazeInputScale.Auto\n    blurEffect {\n      // ...\n    }\n  }\n)\n</code></pre> <p>HazeInputScale options:</p> <ul> <li><code>HazeInputScale.None</code>: No scaling (default)</li> <li><code>HazeInputScale.Auto</code>: Automatic scaling with platform defaults</li> <li><code>HazeInputScale.Fixed(...)</code>: Custom scaling factor (0.0 to 1.0)</li> </ul> <p>Values less than 1.0 improve performance at the cost of quality. Common values: - <code>0.66</code> - ~55% pixel reduction, imperceptible to most users - <code>0.5</code> - ~75% pixel reduction, noticeable but often acceptable - <code>0.33</code> - ~89% pixel reduction, likely visually different</p> <p>Experimentation Recommended</p> <p>Always benchmark with your specific styling parameters to find the right balance for your use case.</p>"},{"location":"blur/usage/#overlapping-blurred-layouts","title":"Overlapping Blurred Layouts","text":"<p>A layout can use both <code>hazeEffect</code> (drawing blur from other areas) and <code>hazeSource</code> (serving as a blur source for others):</p> <p></p> <p>This enables overlapping blurred cards:</p> <pre><code>Box {\n  val hazeState = rememberHazeState()\n\n  Background(\n    modifier = Modifier.hazeSource(hazeState, zIndex = 0f)\n  )\n\n  // Rear card\n  CreditCard(\n    modifier = Modifier\n      .hazeSource(hazeState, zIndex = 1f)\n      .hazeEffect(hazeState)\n  )\n\n  // Middle card\n  CreditCard(\n    modifier = Modifier\n      .hazeSource(hazeState, zIndex = 2f)\n      .hazeEffect(hazeState),\n  )\n\n  // Front card\n  CreditCard(\n    modifier = Modifier\n      .hazeSource(hazeState, zIndex = 3f)\n      .hazeEffect(hazeState)\n  )\n}\n</code></pre> <p>The <code>zIndex</code> parameter tells Haze which layers to draw. By default, a <code>hazeEffect</code> draws all layers with a <code>zIndex</code> less than its sibling <code>hazeSource</code>.</p>"},{"location":"blur/usage/#filtering-areas","title":"Filtering Areas","text":"<p>Control which layers are included via the <code>canDrawArea</code> filter:</p> <pre><code>CreditCard(\n  modifier = Modifier\n    .hazeSource(hazeState, zIndex = 2f, key = \"foo\")\n    .hazeEffect(hazeState) {\n      canDrawArea = { area -&gt;\n        area.key != \"foo\"  // Exclude self\n      }\n    },\n)\n</code></pre>"},{"location":"blur/usage/#enabling-blur","title":"Enabling Blur","text":"<p>Control whether blurring is active on individual effects:</p> <pre><code>blurEffect {\n  blurEnabled = true  // or false to disable\n}\n</code></pre>"},{"location":"blur/usage/#dialogs","title":"Dialogs","text":"<p>You can blur dialog backgrounds over content. Important: Tints display as a scrim over background with dialogs, so use a translucent dialog background color instead:</p> <pre><code>val hazeState = rememberHazeState()\nvar showDialog by remember { mutableStateOf(false) }\n\nBox {\n  if (showDialog) {\n    Dialog(onDismissRequest = { showDialog = false }) {\n      Surface(\n        modifier = Modifier\n          .fillMaxWidth()\n          .fillMaxHeight(fraction = .5f),\n        shape = MaterialTheme.shapes.extraLarge,\n        // Set translucent background instead of using tints\n        color = MaterialTheme.colorScheme.surface.copy(alpha = 0.2f),\n      ) {\n        Box(\n          Modifier.hazeEffect(state = hazeState) {\n            blurEffect {\n              style = HazeMaterials.regular()\n            }\n          },\n        ) {\n          // Dialog content\n        }\n      }\n    }\n  }\n\n  LazyVerticalGrid(\n    modifier = Modifier.hazeSource(state = hazeState),\n  ) {\n    // Background content\n  }\n}\n</code></pre> <p>Complete sample: DialogSample</p>"}]}